<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TripleBTrains: TBT::UDPClientInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TripleBTrains
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classTBT_1_1UDPClientInterface.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classTBT_1_1UDPClientInterface-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TBT::UDPClientInterface Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="UDPClientInterface_8h_source.html">UDPClientInterface.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for TBT::UDPClientInterface:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classTBT_1_1UDPClientInterface.png" usemap="#TBT::UDPClientInterface_map" alt=""/>
  <map id="TBT::UDPClientInterface_map" name="TBT::UDPClientInterface_map">
<area href="classTBT_1_1ClientInterface.html" alt="TBT::ClientInterface" shape="rect" coords="0,0,147,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad03356f6abf16596c181851e9fcaf7a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_ad03356f6abf16596c181851e9fcaf7a9.html#ad03356f6abf16596c181851e9fcaf7a9">UDPClientInterface</a> (<a class="el" href="classTBT_1_1Manager.html">Manager</a> *pManager, const in_port_t &amp;port=21105)</td></tr>
<tr class="memdesc:ad03356f6abf16596c181851e9fcaf7a9"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classTBT_1_1UDPClientInterface.html">UDPClientInterface</a> constructor.  <a href="classTBT_1_1UDPClientInterface_ad03356f6abf16596c181851e9fcaf7a9.html#ad03356f6abf16596c181851e9fcaf7a9">More...</a><br /></td></tr>
<tr class="separator:ad03356f6abf16596c181851e9fcaf7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3361cf4ee8f6ab5a854f34cd1377f0e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_af3361cf4ee8f6ab5a854f34cd1377f0e.html#af3361cf4ee8f6ab5a854f34cd1377f0e">~UDPClientInterface</a> ()</td></tr>
<tr class="memdesc:af3361cf4ee8f6ab5a854f34cd1377f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classTBT_1_1UDPClientInterface.html">UDPClientInterface</a> destructor.  <a href="classTBT_1_1UDPClientInterface_af3361cf4ee8f6ab5a854f34cd1377f0e.html#af3361cf4ee8f6ab5a854f34cd1377f0e">More...</a><br /></td></tr>
<tr class="separator:af3361cf4ee8f6ab5a854f34cd1377f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25b06823d045631f3c7b76e9c50f22e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_ac25b06823d045631f3c7b76e9c50f22e.html#ac25b06823d045631f3c7b76e9c50f22e">getMySocket</a> (void)</td></tr>
<tr class="separator:ac25b06823d045631f3c7b76e9c50f22e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60ddc3657a12b4e6c7ef7db0a31c9e3c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a60ddc3657a12b4e6c7ef7db0a31c9e3c.html#a60ddc3657a12b4e6c7ef7db0a31c9e3c">broadcastPowerStateChange</a> (bool newState)</td></tr>
<tr class="memdesc:a60ddc3657a12b4e6c7ef7db0a31c9e3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends a notification to all clients about a powerstate change.  <a href="classTBT_1_1UDPClientInterface_a60ddc3657a12b4e6c7ef7db0a31c9e3c.html#a60ddc3657a12b4e6c7ef7db0a31c9e3c">More...</a><br /></td></tr>
<tr class="separator:a60ddc3657a12b4e6c7ef7db0a31c9e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e63115b3156b151d4dfd50342b36e7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_af4e63115b3156b151d4dfd50342b36e7.html#af4e63115b3156b151d4dfd50342b36e7">broadcastLocInfoChange</a> (<a class="el" href="classTBT_1_1LocDecoder.html">LocDecoder</a> *pLoc)</td></tr>
<tr class="memdesc:af4e63115b3156b151d4dfd50342b36e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends a notification to all clients about the locdecoder.  <a href="classTBT_1_1UDPClientInterface_af4e63115b3156b151d4dfd50342b36e7.html#af4e63115b3156b151d4dfd50342b36e7">More...</a><br /></td></tr>
<tr class="separator:af4e63115b3156b151d4dfd50342b36e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a0c51d141a457cda9dacc4d82d5304"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a33a0c51d141a457cda9dacc4d82d5304.html#a33a0c51d141a457cda9dacc4d82d5304">broadcastEmergencyStop</a> (void)</td></tr>
<tr class="memdesc:a33a0c51d141a457cda9dacc4d82d5304"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends a notification to all clients about an emergencystop.  <a href="classTBT_1_1UDPClientInterface_a33a0c51d141a457cda9dacc4d82d5304.html#a33a0c51d141a457cda9dacc4d82d5304">More...</a><br /></td></tr>
<tr class="separator:a33a0c51d141a457cda9dacc4d82d5304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classTBT_1_1ClientInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classTBT_1_1ClientInterface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classTBT_1_1ClientInterface.html">TBT::ClientInterface</a></td></tr>
<tr class="memitem:a77cd35b080e78932f2371ea0f897964b inherit pub_methods_classTBT_1_1ClientInterface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1ClientInterface_a77cd35b080e78932f2371ea0f897964b.html#a77cd35b080e78932f2371ea0f897964b">ClientInterface</a> (<a class="el" href="classTBT_1_1Manager.html">Manager</a> *pManager)</td></tr>
<tr class="separator:a77cd35b080e78932f2371ea0f897964b inherit pub_methods_classTBT_1_1ClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42abb5947fa0af75eed777325cbff27 inherit pub_methods_classTBT_1_1ClientInterface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1ClientInterface_aa42abb5947fa0af75eed777325cbff27.html#aa42abb5947fa0af75eed777325cbff27">~ClientInterface</a> ()</td></tr>
<tr class="separator:aa42abb5947fa0af75eed777325cbff27 inherit pub_methods_classTBT_1_1ClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e144856b1253744b20c5638065acf7 inherit pub_methods_classTBT_1_1ClientInterface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTBT_1_1Manager.html">Manager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1ClientInterface_a26e144856b1253744b20c5638065acf7.html#a26e144856b1253744b20c5638065acf7">getManager</a> (void)</td></tr>
<tr class="separator:a26e144856b1253744b20c5638065acf7 inherit pub_methods_classTBT_1_1ClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aea926878d35ed4b37143e320143a84df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTBT_1_1UDPClient.html">UDPClient</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_aea926878d35ed4b37143e320143a84df.html#aea926878d35ed4b37143e320143a84df">findClient</a> (const sockaddr_in &amp;address)</td></tr>
<tr class="memdesc:aea926878d35ed4b37143e320143a84df"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns pointer to client with specified address.  <a href="classTBT_1_1UDPClientInterface_aea926878d35ed4b37143e320143a84df.html#aea926878d35ed4b37143e320143a84df">More...</a><br /></td></tr>
<tr class="separator:aea926878d35ed4b37143e320143a84df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a80ed1e5670443bc35691c9f3d5ff72"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a1a80ed1e5670443bc35691c9f3d5ff72.html#a1a80ed1e5670443bc35691c9f3d5ff72">removeClient</a> (<a class="el" href="classTBT_1_1UDPClient.html">UDPClient</a> *pClient)</td></tr>
<tr class="memdesc:a1a80ed1e5670443bc35691c9f3d5ff72"><td class="mdescLeft">&#160;</td><td class="mdescRight">removes client with specified address and destroys it.  <a href="classTBT_1_1UDPClientInterface_a1a80ed1e5670443bc35691c9f3d5ff72.html#a1a80ed1e5670443bc35691c9f3d5ff72">More...</a><br /></td></tr>
<tr class="separator:a1a80ed1e5670443bc35691c9f3d5ff72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abce6a58e1d8fbb71f9b08e4d5b3871c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_abce6a58e1d8fbb71f9b08e4d5b3871c2.html#abce6a58e1d8fbb71f9b08e4d5b3871c2">threadFunc</a> (void)</td></tr>
<tr class="memdesc:abce6a58e1d8fbb71f9b08e4d5b3871c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">does the actual work in a separate thread.  <a href="classTBT_1_1UDPClientInterface_abce6a58e1d8fbb71f9b08e4d5b3871c2.html#abce6a58e1d8fbb71f9b08e4d5b3871c2">More...</a><br /></td></tr>
<tr class="separator:abce6a58e1d8fbb71f9b08e4d5b3871c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad867ee98c92aceffd8a7e48d82fb56d8"><td class="memItemLeft" align="right" valign="top">in_port_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_ad867ee98c92aceffd8a7e48d82fb56d8.html#ad867ee98c92aceffd8a7e48d82fb56d8">m_port</a></td></tr>
<tr class="separator:ad867ee98c92aceffd8a7e48d82fb56d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de3a81eedc6b4fff185ba58aa554821"><td class="memItemLeft" align="right" valign="top">thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a9de3a81eedc6b4fff185ba58aa554821.html#a9de3a81eedc6b4fff185ba58aa554821">m_thread</a></td></tr>
<tr class="separator:a9de3a81eedc6b4fff185ba58aa554821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5adeebce6d0adc96e590d45ffcd2103a"><td class="memItemLeft" align="right" valign="top">sockaddr_in&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a5adeebce6d0adc96e590d45ffcd2103a.html#a5adeebce6d0adc96e590d45ffcd2103a">m_sockaddr_me</a></td></tr>
<tr class="separator:a5adeebce6d0adc96e590d45ffcd2103a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f8f9eb8a8b44876f24ca146b24c99d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a12f8f9eb8a8b44876f24ca146b24c99d.html#a12f8f9eb8a8b44876f24ca146b24c99d">m_fdsock_me</a></td></tr>
<tr class="separator:a12f8f9eb8a8b44876f24ca146b24c99d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487ce29e92a6df41d8d5346f523b27ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a487ce29e92a6df41d8d5346f523b27ff.html#a487ce29e92a6df41d8d5346f523b27ff">m_fdStop</a></td></tr>
<tr class="separator:a487ce29e92a6df41d8d5346f523b27ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeda0ecc87606d12d0de088344b2b31cc"><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classTBT_1_1UDPClient.html">UDPClient</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_aeda0ecc87606d12d0de088344b2b31cc.html#aeda0ecc87606d12d0de088344b2b31cc">sm_Clients</a></td></tr>
<tr class="separator:aeda0ecc87606d12d0de088344b2b31cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa85fe79ea5527845988eed7d8758ab"><td class="memItemLeft" align="right" valign="top">recursive_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1UDPClientInterface_a8aa85fe79ea5527845988eed7d8758ab.html#a8aa85fe79ea5527845988eed7d8758ab">sm_MClients</a></td></tr>
<tr class="separator:a8aa85fe79ea5527845988eed7d8758ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classTBT_1_1ClientInterface"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classTBT_1_1ClientInterface')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classTBT_1_1ClientInterface.html">TBT::ClientInterface</a></td></tr>
<tr class="memitem:a1d6558ab5cd2ebcc135e5fc37a1844ba inherit pro_attribs_classTBT_1_1ClientInterface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTBT_1_1Manager.html">Manager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTBT_1_1ClientInterface_a1d6558ab5cd2ebcc135e5fc37a1844ba.html#a1d6558ab5cd2ebcc135e5fc37a1844ba">m_pManager</a></td></tr>
<tr class="separator:a1d6558ab5cd2ebcc135e5fc37a1844ba inherit pro_attribs_classTBT_1_1ClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class <a class="el" href="classTBT_1_1UDPClientInterface.html">UDPClientInterface</a> represents the <a class="el" href="classTBT_1_1ClientInterface.html">ClientInterface</a> for UDP clients using the Z21 Lan Protocol.</p>
<h1>Basics</h1>
<h2>Communication:</h2>
<p>Communication with the Z21 protocol over UDP port 21105 or 21106. Control applications on the client (PC, App, ...) should primarily use port 21105. The communication is always asynchronous, i.e. between a request and the corresponding response other broadcast messages can occur.</p>
<p>It is expected that each client communicates with the Z21 once per minute, otherwise it will be removed from the list of active participants. If possible, a client should log off when exiting with the LAN_LOGOFF command.</p>
<h2>Z21 Datagram layout</h2>
<p>A Z21 datagram, i.e. a request or response is structured as follows:</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Z21 Datagram Layout</caption>
<tr>
<th>DataLen</th><th>Header</th><th>Data </th></tr>
<tr>
<td>2 Bytes</td><td>2 Bytes</td><td>n Bytes </td></tr>
</table>
<ul>
<li><p class="startli"><b>DataLen</b> (little endian):</p>
<p class="startli">Total length over the entire data set including DataLen, Header and Data, i.e. DataLen = 2 + 2 + n.</p>
</li>
<li><p class="startli"><b>Header</b> (little endian):</p>
<p class="startli">Describes the command or protocol group.</p>
</li>
<li><p class="startli"><b>Data</b>:</p>
<p class="startli">Structure and length depend on command. Exact description see respective command.</p>
</li>
</ul>
<p>Unless otherwise stated, the byte order is little-endian, i.e. first the low byte, then the high byte. </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="UDPClientInterface_8h_source.html">UDPClientInterface.h</a></li>
<li><a class="el" href="UDPClientInterface_8cpp.html">UDPClientInterface.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceTBT.html">TBT</a></li><li class="navelem"><a class="el" href="classTBT_1_1UDPClientInterface.html">UDPClientInterface</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
