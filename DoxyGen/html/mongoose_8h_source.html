<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TripleBTrains: mongoose.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TripleBTrains
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mongoose_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mongoose.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mongoose_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/common.h&quot;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (c) 2004-2013 Sergey Lyubka</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (c) 2013-2015 Cesanta Software Limited</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This software is dual-licensed: you can redistribute it and/or modify</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License version 2 as</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * published by the Free Software Foundation. For the terms of this</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * license, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You are free to use this software under the terms of the GNU General</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Public License, but WITHOUT ANY WARRANTY; without even the implied</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * See the GNU General Public License for more details.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Alternatively, you can license this software under a commercial</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * license, as set out in &lt;https://www.cesanta.com/license&gt;.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_COMMON_H_</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="mongoose_8h_a1aecfe324420345a87a449777448f121.html#a1aecfe324420345a87a449777448f121">   24</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_COMMON_H_</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="mongoose_8h_aab94e3401068fd8a1116237ea111789e.html#aab94e3401068fd8a1116237ea111789e">   26</a></span>&#160;<span class="preprocessor">#define MG_VERSION &quot;6.10&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* Local tweaks, applied before any of Mongoose&#39;s own headers. */</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifdef MG_LOCALS</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;mg_locals.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_COMMON_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#line 1 &quot;common/platform.h&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORM_H_</span></div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="mongoose_8h_a3c20eeaaf387b34981176a05475f61de.html#a3c20eeaaf387b34981176a05475f61de">   38</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORM_H_</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * For the &quot;custom&quot; platform, includes and dependencies can be</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * provided through mg_locals.h.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="mongoose_8h_a77f64683a09660416c1f866c5d1a72ef.html#a77f64683a09660416c1f866c5d1a72ef">   44</a></span>&#160;<span class="preprocessor">#define CS_P_CUSTOM 0</span></div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="mongoose_8h_aea960149d88c25f6d88a89b7f198b687.html#aea960149d88c25f6d88a89b7f198b687">   45</a></span>&#160;<span class="preprocessor">#define CS_P_UNIX 1</span></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="mongoose_8h_a1f386cd64b293dab85787871880443f5.html#a1f386cd64b293dab85787871880443f5">   46</a></span>&#160;<span class="preprocessor">#define CS_P_WINDOWS 2</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="mongoose_8h_ad2f4b24b1d4265342a4484bd7eb2cbd2.html#ad2f4b24b1d4265342a4484bd7eb2cbd2">   47</a></span>&#160;<span class="preprocessor">#define CS_P_ESP32 15</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="mongoose_8h_afb724eec0dcc03202a624e919c13ee52.html#afb724eec0dcc03202a624e919c13ee52">   48</a></span>&#160;<span class="preprocessor">#define CS_P_ESP8266 3</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="mongoose_8h_ab7d2fcd99cfe0c763c0bd1e4b89fac8f.html#ab7d2fcd99cfe0c763c0bd1e4b89fac8f">   49</a></span>&#160;<span class="preprocessor">#define CS_P_CC3100 6</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="mongoose_8h_a9b04b9ad405bafe3d31d75fa9814bf3e.html#a9b04b9ad405bafe3d31d75fa9814bf3e">   50</a></span>&#160;<span class="preprocessor">#define CS_P_CC3200 4</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="mongoose_8h_ad192d83e01f4513ca498b861612ea32a.html#ad192d83e01f4513ca498b861612ea32a">   51</a></span>&#160;<span class="preprocessor">#define CS_P_CC3220 17</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="mongoose_8h_af55370a8b47bb2a8722822548203944d.html#af55370a8b47bb2a8722822548203944d">   52</a></span>&#160;<span class="preprocessor">#define CS_P_MSP432 5</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="mongoose_8h_a0eeaf18b7625d1914fdd12d0af89b919.html#a0eeaf18b7625d1914fdd12d0af89b919">   53</a></span>&#160;<span class="preprocessor">#define CS_P_TM4C129 14</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="mongoose_8h_a59d370a6a4ad6f1f1cb7c65fb2e41e11.html#a59d370a6a4ad6f1f1cb7c65fb2e41e11">   54</a></span>&#160;<span class="preprocessor">#define CS_P_MBED 7</span></div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="mongoose_8h_a4ce6b0376a3aca5279d4707ba1fd939f.html#a4ce6b0376a3aca5279d4707ba1fd939f">   55</a></span>&#160;<span class="preprocessor">#define CS_P_WINCE 8</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="mongoose_8h_a14dc4d14d42a98b1a6ecec570e0419bd.html#a14dc4d14d42a98b1a6ecec570e0419bd">   56</a></span>&#160;<span class="preprocessor">#define CS_P_NXP_LPC 13</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="mongoose_8h_a74226d9008bde17a388dfcba7e80bebf.html#a74226d9008bde17a388dfcba7e80bebf">   57</a></span>&#160;<span class="preprocessor">#define CS_P_NXP_KINETIS 9</span></div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="mongoose_8h_a1b2f9220ad5cdf4e3366e732134cba70.html#a1b2f9220ad5cdf4e3366e732134cba70">   58</a></span>&#160;<span class="preprocessor">#define CS_P_NRF51 12</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="mongoose_8h_a3aada9c973650f89f18eefeed243dce9.html#a3aada9c973650f89f18eefeed243dce9">   59</a></span>&#160;<span class="preprocessor">#define CS_P_NRF52 10</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="mongoose_8h_a2d116080229ac79a351d6ad2534b7892.html#a2d116080229ac79a351d6ad2534b7892">   60</a></span>&#160;<span class="preprocessor">#define CS_P_PIC32 11</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="mongoose_8h_a64676fa45780c7fedfc73b0023a60c56.html#a64676fa45780c7fedfc73b0023a60c56">   61</a></span>&#160;<span class="preprocessor">#define CS_P_STM32 16</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/* Next id: 18 */</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/* If not specified explicitly, we guess platform by defines. */</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#ifndef CS_PLATFORM</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#if defined(TARGET_IS_MSP432P4XX) || defined(__MSP432P401R__)</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_MSP432</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#elif defined(cc3200) || defined(TARGET_IS_CC3200)</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_CC3200</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#elif defined(cc3220) || defined(TARGET_IS_CC3220)</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_CC3220</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#elif defined(__unix__) || defined(__APPLE__)</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_UNIX</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#elif defined(WINCE)</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_WINCE</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#elif defined(_WIN32)</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_WINDOWS</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#elif defined(__MBED__)</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_MBED</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#elif defined(__USE_LPCOPEN)</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_NXP_LPC</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#elif defined(FRDM_K64F) || defined(FREEDOM)</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_NXP_KINETIS</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#elif defined(PIC32)</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_PIC32</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#elif defined(ESP_PLATFORM)</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_ESP32</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#elif defined(ICACHE_FLASH)</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_ESP8266</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#elif defined(TARGET_IS_TM4C129_RA0) || defined(TARGET_IS_TM4C129_RA1) || \</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">    defined(TARGET_IS_TM4C129_RA2)</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_TM4C129</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#elif defined(STM32)</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#define CS_PLATFORM CS_P_STM32</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#ifndef CS_PLATFORM</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#error &quot;CS_PLATFORM is not specified and we couldn&#39;t guess it.&quot;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !defined(CS_PLATFORM) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="mongoose_8h_aa730f5051319baecebcf0ec1b1dbe504.html#aa730f5051319baecebcf0ec1b1dbe504">  104</a></span>&#160;<span class="preprocessor">#define MG_NET_IF_SOCKET 1</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="mongoose_8h_a395998c1e711cd8bd03257c43ce92a13.html#a395998c1e711cd8bd03257c43ce92a13">  105</a></span>&#160;<span class="preprocessor">#define MG_NET_IF_SIMPLELINK 2</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="mongoose_8h_a71e01d2ff5fa3b6d5f625d0cc80b7384.html#a71e01d2ff5fa3b6d5f625d0cc80b7384">  106</a></span>&#160;<span class="preprocessor">#define MG_NET_IF_LWIP_LOW_LEVEL 3</span></div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="mongoose_8h_adf6134c5b182cd10288fa270f18304fd.html#adf6134c5b182cd10288fa270f18304fd">  107</a></span>&#160;<span class="preprocessor">#define MG_NET_IF_PIC32 4</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="mongoose_8h_a6fd1737e6dd5b56a415a510df2a2bb7f.html#a6fd1737e6dd5b56a415a510df2a2bb7f">  109</a></span>&#160;<span class="preprocessor">#define MG_SSL_IF_OPENSSL 1</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="mongoose_8h_a601858fe0100ad94b2e918dff09b0a20.html#a601858fe0100ad94b2e918dff09b0a20">  110</a></span>&#160;<span class="preprocessor">#define MG_SSL_IF_MBEDTLS 2</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="mongoose_8h_a95083be1f405218ea9c9a439624e3bd2.html#a95083be1f405218ea9c9a439624e3bd2">  111</a></span>&#160;<span class="preprocessor">#define MG_SSL_IF_SIMPLELINK 3</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_unix.h&quot; */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_windows.h&quot; */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_esp32.h&quot; */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_esp8266.h&quot; */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_cc3100.h&quot; */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_cc3200.h&quot; */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_cc3220.h&quot; */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_mbed.h&quot; */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_nrf51.h&quot; */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_nrf52.h&quot; */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_wince.h&quot; */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_nxp_lpc.h&quot; */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_nxp_kinetis.h&quot; */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_pic32.h&quot; */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/platform_stm32.h&quot; */</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">/* Common stuff */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#if !defined(WEAK)</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#if (defined(__GNUC__) || defined(__TI_COMPILER_VERSION__)) &amp;&amp; !defined(_WIN32)</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#define WEAK __attribute__((weak))</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="mongoose_8h_ad1480e9557edcc543498ca259cee6c7d.html#ad1480e9557edcc543498ca259cee6c7d">  135</a></span>&#160;<span class="preprocessor">#define WEAK</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#ifdef __GNUC__</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#define NORETURN __attribute__((noreturn))</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#define NOINLINE __attribute__((noinline))</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#define WARN_UNUSED_RESULT __attribute__((warn_unused_result))</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#define NOINSTR __attribute__((no_instrument_function))</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#define DO_NOT_WARN_UNUSED __attribute__((unused))</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="mongoose_8h_aa1728270d73c5d1598de1fd691762eb1.html#aa1728270d73c5d1598de1fd691762eb1">  146</a></span>&#160;<span class="preprocessor">#define NORETURN</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="mongoose_8h_a1b173d22e57d9395897acbd8de62d505.html#a1b173d22e57d9395897acbd8de62d505">  147</a></span>&#160;<span class="preprocessor">#define NOINLINE</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="mongoose_8h_a4e0e2d9e1ee0f401844b5b6ff8338f82.html#a4e0e2d9e1ee0f401844b5b6ff8338f82">  148</a></span>&#160;<span class="preprocessor">#define WARN_UNUSED_RESULT</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="mongoose_8h_ad81cb9cf9210bfccdc9055beb13b43be.html#ad81cb9cf9210bfccdc9055beb13b43be">  149</a></span>&#160;<span class="preprocessor">#define NOINSTR</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="mongoose_8h_a228d9763c706348d69abf6f6b8684ead.html#a228d9763c706348d69abf6f6b8684ead">  150</a></span>&#160;<span class="preprocessor">#define DO_NOT_WARN_UNUSED</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __GNUC__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#ifndef ARRAY_SIZE</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="mongoose_8h_a70c57aae3eb654e205459b4362c8089a.html#a70c57aae3eb654e205459b4362c8089a">  154</a></span>&#160;<span class="preprocessor">#define ARRAY_SIZE(array) (sizeof(array) / sizeof(array[0]))</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORM_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_windows.h&quot;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_WINDOWS_H_</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="mongoose_8h_aa8011c048dfbfc70bbc912c9d32d44ec.html#aa8011c048dfbfc70bbc912c9d32d44ec">  162</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_WINDOWS_H_</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_WINDOWS</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"> * MSVC++ 14.0 _MSC_VER == 1900 (Visual Studio 2015)</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> * MSVC++ 12.0 _MSC_VER == 1800 (Visual Studio 2013)</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> * MSVC++ 11.0 _MSC_VER == 1700 (Visual Studio 2012)</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * MSVC++ 10.0 _MSC_VER == 1600 (Visual Studio 2010)</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> * MSVC++ 9.0  _MSC_VER == 1500 (Visual Studio 2008)</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> * MSVC++ 8.0  _MSC_VER == 1400 (Visual Studio 2005)</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> * MSVC++ 7.1  _MSC_VER == 1310 (Visual Studio 2003)</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> * MSVC++ 7.0  _MSC_VER == 1300</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * MSVC++ 6.0  _MSC_VER == 1200</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> * MSVC++ 5.0  _MSC_VER == 1100</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#pragma warning(disable : 4127) </span><span class="comment">/* FD_SET() emits warning, disable it */</span><span class="preprocessor"></span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#pragma warning(disable : 4204) </span><span class="comment">/* missing c99 support */</span><span class="preprocessor"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#ifndef _WINSOCK_DEPRECATED_NO_WARNINGS</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#define _WINSOCK_DEPRECATED_NO_WARNINGS 1</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#ifndef _CRT_SECURE_NO_WARNINGS</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#define _CRT_SECURE_NO_WARNINGS</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">#include &lt;direct.h&gt;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#include &lt;io.h&gt;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;ws2_32.lib&quot;) </span><span class="comment">/* Linking with winsock library */</span><span class="preprocessor"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#include &lt;winsock2.h&gt;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#include &lt;ws2tcpip.h&gt;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#include &lt;process.h&gt;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#if _MSC_VER &lt; 1700</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> bool;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; _MSC_VER &gt;= 1800</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#define strdup _strdup</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#ifndef EINPROGRESS</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#define EINPROGRESS WSAEINPROGRESS</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#ifndef EWOULDBLOCK</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#define EWOULDBLOCK WSAEWOULDBLOCK</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#ifndef __func__</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#define STRX(x) #x</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#define STR(x) STRX(x)</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">#define __func__ __FILE__ &quot;:&quot; STR(__LINE__)</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#define snprintf _snprintf</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#define vsnprintf _vsnprintf</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#define to64(x) _atoi64(x)</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#if !defined(__MINGW32__) &amp;&amp; !defined(__MINGW64__)</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#define popen(x, y) _popen((x), (y))</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#define pclose(x) _pclose(x)</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">#define fileno _fileno</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; _MSC_VER &gt;= 1400</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#define fseeko(x, y, z) _fseeki64((x), (y), (z))</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#define fseeko(x, y, z) fseek((x), (y), (z))</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; _MSC_VER &lt;= 1200</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> uintptr_t;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">long</span> <a class="code" href="mongoose_8c_aa853a3248256f9d3d1a32490964697ef.html#aa853a3248256f9d3d1a32490964697ef">intptr_t</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> socklen_t;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#if _MSC_VER &gt;= 1700</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span> int8_t;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uint8_t;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> int32_t;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uint32_t;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">short</span> int16_t;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> uint16_t;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">typedef</span> __int64 int64_t;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int64 uint64_t;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keyword">typedef</span> SOCKET sock_t;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keyword">typedef</span> uint32_t in_addr_t;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#ifndef UINT16_MAX</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#define UINT16_MAX 65535</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#ifndef UINT32_MAX</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#define UINT32_MAX 4294967295</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#ifndef pid_t</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#define pid_t HANDLE</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#define INT64_FMT &quot;I64d&quot;</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#define INT64_X_FMT &quot;I64x&quot;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;Iu&quot;</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>_stati64 cs_stat_t;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#ifndef S_ISDIR</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#define S_ISDIR(x) (((x) &amp;_S_IFMT) == _S_IFDIR)</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#ifndef S_ISREG</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#define S_ISREG(x) (((x) &amp;_S_IFMT) == _S_IFREG)</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#define DIRSEP &#39;\\&#39;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#define CS_DEFINE_DIRENT</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor">#ifndef va_copy</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#ifdef __va_copy</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#define va_copy __va_copy</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">#define va_copy(x, y) (x) = (y)</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_REQUEST_SIZE</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_REQUEST_SIZE 8192</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_SEND_MBUF</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_SEND_MBUF 4096</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_HEADERS</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_HEADERS 40</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_BROADCAST</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">#define MG_ENABLE_BROADCAST 1</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_DIRECTORY_LISTING</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#define MG_ENABLE_DIRECTORY_LISTING 1</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 1</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_CGI</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_CGI MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sleep(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> seconds);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">/* https://stackoverflow.com/questions/16647819/timegm-cross-platform */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="preprocessor">#define timegm _mkgmtime</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#define gmtime_r(a, b) \</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor">  do {                 \</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">    *(b) = *gmtime(a); \</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_WINDOWS */</span><span class="preprocessor"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_WINDOWS_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_unix.h&quot;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_UNIX_H_</span></div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="mongoose_8h_a916aa89dfd1ddf3abbf37f8bb8c0bca6.html#a916aa89dfd1ddf3abbf37f8bb8c0bca6">  348</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_UNIX_H_</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_UNIX</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#ifndef _XOPEN_SOURCE</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">#define _XOPEN_SOURCE 600</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">/* &lt;inttypes.h&gt; wants this for C++ */</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#ifndef __STDC_FORMAT_MACROS</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#define __STDC_FORMAT_MACROS</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/* C++ wants that for INT64_MAX */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#ifndef __STDC_LIMIT_MACROS</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">#define __STDC_LIMIT_MACROS</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/* Enable fseeko() and ftello() functions */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#ifndef _LARGEFILE_SOURCE</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#define _LARGEFILE_SOURCE</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">/* Enable 64-bit file offsets */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#ifndef _FILE_OFFSET_BITS</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">#define _FILE_OFFSET_BITS 64</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">#include &lt;dirent.h&gt;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#include &lt;netdb.h&gt;</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#include &lt;sys/param.h&gt;</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">#include &lt;sys/select.h&gt;</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">#ifdef __APPLE__</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">#include &lt;machine/endian.h&gt;</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">#ifndef BYTE_ORDER</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">#define LITTLE_ENDIAN __DARWIN_LITTLE_ENDIAN</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#define BIG_ENDIAN __DARWIN_BIG_ENDIAN</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="preprocessor">#define PDP_ENDIAN __DARWIN_PDP_ENDIAN</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">#define BYTE_ORDER __DARWIN_BYTE_ORDER</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"> * osx correctly avoids defining strtoll when compiling in strict ansi mode.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"> * c++ 11 standard defines strtoll as well.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"> * We require strtoll, and if your embedded pre-c99 compiler lacks one, please</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"> * implement a shim.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#if !(defined(__cplusplus) &amp;&amp; __cplusplus &gt;= 201103L) &amp;&amp; \</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">    !(defined(__DARWIN_C_LEVEL) &amp;&amp; __DARWIN_C_LEVEL &gt;= 200809L)</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">long</span> strtoll(<span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keywordtype">char</span> **, <span class="keywordtype">int</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> sock_t;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="preprocessor">#define INVALID_SOCKET (-1)</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;zu&quot;</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">#ifndef __cdecl</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#ifndef va_copy</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#ifdef __va_copy</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#define va_copy __va_copy</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">#define va_copy(x, y) (x) = (y)</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">#define closesocket(x) close(x)</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_REQUEST_SIZE</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_REQUEST_SIZE 8192</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_SEND_MBUF</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_SEND_MBUF 4096</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_HEADERS</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_HEADERS 40</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_BROADCAST</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#define MG_ENABLE_BROADCAST 1</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_DIRECTORY_LISTING</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">#define MG_ENABLE_DIRECTORY_LISTING 1</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 1</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_CGI</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_CGI MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">#ifndef MG_HOSTS_FILE_NAME</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">#define MG_HOSTS_FILE_NAME &quot;/etc/hosts&quot;</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">#ifndef MG_RESOLV_CONF_FILE_NAME</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">#define MG_RESOLV_CONF_FILE_NAME &quot;/etc/resolv.conf&quot;</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_UNIX */</span><span class="preprocessor"></span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_UNIX_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_esp32.h&quot;</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_ESP32_H_</span></div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="mongoose_8h_aaf619ede3a4f8ab6b7bb00a68c2a9e62.html#aaf619ede3a4f8ab6b7bb00a68c2a9e62">  501</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_ESP32_H_</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_ESP32</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">#include &lt;dirent.h&gt;</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#include &lt;machine/endian.h&gt;</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#define _FILE_OFFSET_BITS 32</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_ESP32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_ESP32_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_esp8266.h&quot;</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_ESP8266_H_</span></div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="mongoose_8h_a3b8fb484ead8ceefb17f76c1fa4127e8.html#a3b8fb484ead8ceefb17f76c1fa4127e8">  546</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_ESP8266_H_</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_ESP8266</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">#include &lt;machine/endian.h&gt;</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#if !defined(MGOS_VFS_DEFINE_DIRENT)</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">#define CS_DEFINE_DIRENT</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="preprocessor">#define _FILE_OFFSET_BITS 32</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">#if !defined(RTOS_SDK) &amp;&amp; !defined(__cplusplus)</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#define fileno(x) -1</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">/* struct timeval is defined in sys/time.h. */</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">#define LWIP_TIMEVAL_PRIVATE 0</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">#include &lt;lwip/opt.h&gt;</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="preprocessor">#if LWIP_SOCKET </span><span class="comment">/* RTOS SDK has LWIP sockets */</span><span class="preprocessor"></span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_ESP8266 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_ESP8266_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_cc3100.h&quot;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_CC3100_H_</span></div><div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="mongoose_8h_a628ed06e473c3a4ab3748605599ebaaf.html#a628ed06e473c3a4ab3748605599ebaaf">  605</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_CC3100_H_</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_CC3100</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="preprocessor">#define MG_SSL_IF MG_SSL_IF_SIMPLELINK</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"> * CC3100 SDK and STM32 SDK include headers w/out path, just like</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"> * #include &quot;simplelink.h&quot;. As result, we have to add all required directories</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"> * into Makefile IPATH and do the same thing (include w/out path)</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="preprocessor">#include &lt;simplelink.h&gt;</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="preprocessor">#include &lt;netapp.h&gt;</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="preprocessor">#undef timeval</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> sock_t;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">#define INVALID_SOCKET (-1)</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">#define SOMAXCONN 8</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *inet_ntop(<span class="keywordtype">int</span> af, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">char</span> *dst, socklen_t size);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="keywordtype">char</span> *inet_ntoa(<span class="keyword">struct</span> in_addr in);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="keywordtype">int</span> inet_pton(<span class="keywordtype">int</span> af, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">void</span> *dst);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_CC3100 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_CC3100_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_cc3200.h&quot;</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_CC3200_H_</span></div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="mongoose_8h_aceab0a70122d0ef0c28a815329b43a2a.html#aceab0a70122d0ef0c28a815329b43a2a">  654</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_CC3200_H_</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_CC3200</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">#ifndef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="preprocessor">#define MG_SSL_IF MG_SSL_IF_SIMPLELINK</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/* Only SPIFFS supports directories, SLFS does not. */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="preprocessor">#if defined(CC3200_FS_SPIFFS) &amp;&amp; !defined(MG_ENABLE_DIRECTORY_LISTING)</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="preprocessor">#define MG_ENABLE_DIRECTORY_LISTING 1</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/simplelink/cs_simplelink.h&quot; */</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> sock_t;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="preprocessor">#define INVALID_SOCKET (-1)</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="preprocessor">#define fileno(x) -1</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">/* Some functions we implement for Mongoose. */</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="preprocessor">#ifdef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="keyword">struct </span>SlTimeval_t;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="preprocessor">#define timeval SlTimeval_t</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="keywordtype">int</span> gettimeofday(<span class="keyword">struct</span> timeval *t, <span class="keywordtype">void</span> *tz);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="keywordtype">int</span> settimeofday(<span class="keyword">const</span> <span class="keyword">struct</span> timeval *tv, <span class="keyword">const</span> <span class="keywordtype">void</span> *tz);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="keywordtype">int</span> asprintf(<span class="keywordtype">char</span> **strp, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">/* TI&#39;s libc does not have stat &amp; friends, add them. */</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="preprocessor">#ifdef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="preprocessor">#include &lt;file.h&gt;</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode_t;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">size_t</span> _off_t;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">long</span> ssize_t;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="keyword">struct </span>stat {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordtype">int</span> st_ino;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  mode_t st_mode;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordtype">int</span> st_nlink;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  time_t st_mtime;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  off_t st_size;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;};</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="keywordtype">int</span> _stat(<span class="keyword">const</span> <span class="keywordtype">char</span> *pathname, <span class="keyword">struct</span> stat *st);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="keywordtype">int</span> stat(<span class="keyword">const</span> <span class="keywordtype">char</span> *pathname, <span class="keyword">struct</span> stat *st);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="preprocessor">#define __S_IFMT 0170000</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="preprocessor">#define __S_IFDIR 0040000</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="preprocessor">#define __S_IFCHR 0020000</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">#define __S_IFREG 0100000</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">#define __S_ISTYPE(mode, mask) (((mode) &amp;__S_IFMT) == (mask))</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="preprocessor">#define S_IFDIR __S_IFDIR</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="preprocessor">#define S_IFCHR __S_IFCHR</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="preprocessor">#define S_IFREG __S_IFREG</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">#define S_ISDIR(mode) __S_ISTYPE((mode), __S_IFDIR)</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="preprocessor">#define S_ISREG(mode) __S_ISTYPE((mode), __S_IFREG)</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">/* 5.x series compilers don&#39;t have va_copy, 16.x do. */</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="preprocessor">#if __TI_COMPILER_VERSION__ &lt; 16000000</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">#define va_copy(apc, ap) ((apc) = (ap))</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TI_COMPILER_VERSION__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="preprocessor">#ifdef CC3200_FS_SLFS</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="preprocessor">#define MG_FS_SLFS</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="preprocessor">#if (defined(CC3200_FS_SPIFFS) || defined(CC3200_FS_SLFS)) &amp;&amp; \</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="preprocessor">    !defined(MG_ENABLE_FILESYSTEM)</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 1</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="preprocessor">#define CS_DEFINE_DIRENT</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_CC3200 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_CC3200_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_msp432.h&quot;</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_MSP432_H_</span></div><div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="mongoose_8h_a121672a383c1a4778307dfdbcd5afae3.html#a121672a383c1a4778307dfdbcd5afae3">  779</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_MSP432_H_</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_MSP432</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="preprocessor">#ifndef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="preprocessor">#define MG_SSL_IF MG_SSL_IF_SIMPLELINK</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/simplelink/cs_simplelink.h&quot; */</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> sock_t;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#define INVALID_SOCKET (-1)</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="preprocessor">#define fileno(x) -1</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">/* Some functions we implement for Mongoose. */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="preprocessor">#ifdef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="keyword">struct </span>SlTimeval_t;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="preprocessor">#define timeval SlTimeval_t</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="keywordtype">int</span> gettimeofday(<span class="keyword">struct</span> timeval *t, <span class="keywordtype">void</span> *tz);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">/* TI&#39;s libc does not have stat &amp; friends, add them. */</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor">#ifdef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="preprocessor">#include &lt;file.h&gt;</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode_t;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">size_t</span> _off_t;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">long</span> ssize_t;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="keyword">struct </span>stat {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordtype">int</span> st_ino;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  mode_t st_mode;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordtype">int</span> st_nlink;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  time_t st_mtime;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  off_t st_size;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;};</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="keywordtype">int</span> _stat(<span class="keyword">const</span> <span class="keywordtype">char</span> *pathname, <span class="keyword">struct</span> stat *st);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="preprocessor">#define stat(a, b) _stat(a, b)</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="preprocessor">#define __S_IFMT 0170000</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="preprocessor">#define __S_IFDIR 0040000</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="preprocessor">#define __S_IFCHR 0020000</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="preprocessor">#define __S_IFREG 0100000</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="preprocessor">#define __S_ISTYPE(mode, mask) (((mode) &amp;__S_IFMT) == (mask))</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="preprocessor">#define S_IFDIR __S_IFDIR</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="preprocessor">#define S_IFCHR __S_IFCHR</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="preprocessor">#define S_IFREG __S_IFREG</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="preprocessor">#define S_ISDIR(mode) __S_ISTYPE((mode), __S_IFDIR)</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="preprocessor">#define S_ISREG(mode) __S_ISTYPE((mode), __S_IFREG)</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">/* As of 5.2.7, TI compiler does not support va_copy() yet. */</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="preprocessor">#define va_copy(apc, ap) ((apc) = (ap))</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TI_COMPILER_VERSION__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="preprocessor">#if (defined(CC3200_FS_SPIFFS) || defined(CC3200_FS_SLFS)) &amp;&amp; \</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="preprocessor">    !defined(MG_ENABLE_FILESYSTEM)</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 1</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_MSP432 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_MSP432_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_tm4c129.h&quot;</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_TM4C129_H_</span></div><div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="mongoose_8h_a59642ecc2f03631ebc4bd4158181cdb5.html#a59642ecc2f03631ebc4bd4158181cdb5">  887</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_TM4C129_H_</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_TM4C129</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">#ifndef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">#include &lt;lwip/opt.h&gt;</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="preprocessor">#if LWIP_SOCKET</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">#elif MG_NET_IF == MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platforms/simplelink/cs_simplelink.h&quot; */</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">#ifdef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">/* As of 5.2.8, TI compiler does not support va_copy() yet. */</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="preprocessor">#define va_copy(apc, ap) ((apc) = (ap))</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TI_COMPILER_VERSION__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_TM4C129 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_TM4C129_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_mbed.h&quot;</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_MBED_H_</span></div><div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="mongoose_8h_a21a9a368221d8e290fb687aefb828981.html#a21a9a368221d8e290fb687aefb828981">  947</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_MBED_H_</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_MBED</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment"> * mbed.h contains C++ code (e.g. templates), thus, it should be processed</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment"> * only if included directly to startup file (ex: main.cpp)</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mbed.h&quot; */</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"> * mbed can be compiled with the ARM compiler which</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"> * just doesn&#39;t come with a gettimeofday shim</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment"> * because it&#39;s a BSD API and ARM targets embedded</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment"> * non-unix platforms.</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="preprocessor">#if defined(__ARMCC_VERSION) || defined(__ICCARM__)</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="preprocessor">#define _TIMEVAL_DEFINED</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="preprocessor">#define gettimeofday _gettimeofday</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/* copied from GCC on ARM; for some reason useconds are signed */</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">long</span> suseconds_t; <span class="comment">/* microseconds (signed) */</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="keyword">struct </span>timeval {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  time_t tv_sec;       <span class="comment">/* seconds */</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  suseconds_t tv_usec; <span class="comment">/* and microseconds */</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;};</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="preprocessor">#if MG_NET_IF == MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="preprocessor">#define MG_SIMPLELINK_NO_OSI 1</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#include &lt;simplelink.h&gt;</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> sock_t;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">#define INVALID_SOCKET (-1)</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">#define INT64_X_FMT PRIx64</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="preprocessor">#define SOMAXCONN 8</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *inet_ntop(<span class="keywordtype">int</span> af, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">char</span> *dst, socklen_t size);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="keywordtype">char</span> *inet_ntoa(<span class="keyword">struct</span> in_addr in);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="keywordtype">int</span> inet_pton(<span class="keywordtype">int</span> af, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">void</span> *dst);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="keywordtype">int</span> inet_aton(<span class="keyword">const</span> <span class="keywordtype">char</span> *cp, <span class="keyword">struct</span> in_addr *inp);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;in_addr_t inet_addr(<span class="keyword">const</span> <span class="keywordtype">char</span> *cp);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_NET_IF == MG_NET_IF_SIMPLELINK */</span><span class="preprocessor"></span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_MBED */</span><span class="preprocessor"></span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_MBED_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_nrf51.h&quot;</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_NRF51_H_</span></div><div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="mongoose_8h_a43c953a424db1dfbcf1cd703d5b21131.html#a43c953a424db1dfbcf1cd703d5b21131"> 1030</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_NRF51_H_</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_NRF51</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="preprocessor">#define MG_ENABLE_IPV6 1</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment"> * For ARM C Compiler, make lwip to export `struct timeval`; for other</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"> * compilers, suppress it.</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="preprocessor">#if !defined(__ARMCC_VERSION)</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="preprocessor">#define LWIP_TIMEVAL_PRIVATE 0</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="keyword">struct </span>timeval;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="keywordtype">int</span> gettimeofday(<span class="keyword">struct</span> timeval *tp, <span class="keywordtype">void</span> *tzp);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"> * ARM C Compiler doesn&#39;t have strdup, so we provide it</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="preprocessor">#define CS_ENABLE_STRDUP defined(__ARMCC_VERSION)</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_NRF51 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_NRF51_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_nrf52.h&quot;</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_NRF52_H_</span></div><div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="mongoose_8h_ab552b84efcbc4a4396d9fc323d71aacd.html#ab552b84efcbc4a4396d9fc323d71aacd"> 1075</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_NRF52_H_</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_NRF52</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="preprocessor">#define MG_ENABLE_IPV6 1</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="preprocessor">#if !defined(ENOSPC)</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="preprocessor">#define ENOSPC 28 </span><span class="comment">/* No space left on device */</span><span class="preprocessor"></span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment"> * For ARM C Compiler, make lwip to export `struct timeval`; for other</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment"> * compilers, suppress it.</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="preprocessor">#if !defined(__ARMCC_VERSION)</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="preprocessor">#define LWIP_TIMEVAL_PRIVATE 0</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment"> * ARM C Compiler doesn&#39;t have strdup, so we provide it</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="preprocessor">#define CS_ENABLE_STRDUP defined(__ARMCC_VERSION)</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_NRF52 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_NRF52_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/simplelink/cs_simplelink.h&quot;</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_SIMPLELINK_CS_SIMPLELINK_H_</span></div><div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="mongoose_8h_a7bf10194a57b2feba1d4d71c82dbf62c.html#a7bf10194a57b2feba1d4d71c82dbf62c"> 1123</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_SIMPLELINK_CS_SIMPLELINK_H_</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="preprocessor">#if defined(MG_NET_IF) &amp;&amp; MG_NET_IF == MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">/* If simplelink.h is already included, all bets are off. */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="preprocessor">#if !defined(__SIMPLELINK_H__)</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="preprocessor">#ifndef __TI_COMPILER_VERSION__</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="preprocessor">#undef __CONCAT</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="preprocessor">#undef FD_CLR</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="preprocessor">#undef FD_ISSET</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="preprocessor">#undef FD_SET</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="preprocessor">#undef FD_SETSIZE</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="preprocessor">#undef FD_ZERO</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="preprocessor">#undef fd_set</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_CC3220</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="preprocessor">#include &lt;ti/drivers/net/wifi/porting/user.h&gt;</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="preprocessor">#include &lt;ti/drivers/net/wifi/simplelink.h&gt;</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="preprocessor">#include &lt;ti/drivers/net/wifi/sl_socket.h&gt;</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="preprocessor">#include &lt;ti/drivers/net/wifi/netapp.h&gt;</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">/* We want to disable SL_INC_STD_BSD_API_NAMING, so we include user.h ourselves</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment"> * and undef it. */</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="preprocessor">#define PROVISIONING_API_H_</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="preprocessor">#include &lt;simplelink/user.h&gt;</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="preprocessor">#undef PROVISIONING_API_H_</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="preprocessor">#undef SL_INC_STD_BSD_API_NAMING</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="preprocessor">#include &lt;simplelink/include/simplelink.h&gt;</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="preprocessor">#include &lt;simplelink/include/netapp.h&gt;</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_CC3220 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">/* Now define only the subset of the BSD API that we use.</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"> * Notably, close(), read() and write() are not defined. */</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="preprocessor">#define AF_INET SL_AF_INET</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="preprocessor">#define socklen_t SlSocklen_t</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="preprocessor">#define sockaddr SlSockAddr_t</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="preprocessor">#define sockaddr_in SlSockAddrIn_t</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">#define in_addr SlInAddr_t</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="preprocessor">#define SOCK_STREAM SL_SOCK_STREAM</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="preprocessor">#define SOCK_DGRAM SL_SOCK_DGRAM</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">#define htonl sl_Htonl</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="preprocessor">#define ntohl sl_Ntohl</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="preprocessor">#define htons sl_Htons</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="preprocessor">#define ntohs sl_Ntohs</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="preprocessor">#ifndef EACCES</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="preprocessor">#define EACCES SL_EACCES</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="preprocessor">#ifndef EAFNOSUPPORT</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="preprocessor">#define EAFNOSUPPORT SL_EAFNOSUPPORT</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor">#ifndef EAGAIN</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="preprocessor">#define EAGAIN SL_EAGAIN</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="preprocessor">#ifndef EBADF</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="preprocessor">#define EBADF SL_EBADF</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="preprocessor">#ifndef EINVAL</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="preprocessor">#define EINVAL SL_EINVAL</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="preprocessor">#ifndef ENOMEM</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="preprocessor">#define ENOMEM SL_ENOMEM</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="preprocessor">#ifndef EWOULDBLOCK</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="preprocessor">#define EWOULDBLOCK SL_EWOULDBLOCK</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="preprocessor">#define SOMAXCONN 8</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *inet_ntop(<span class="keywordtype">int</span> af, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">char</span> *dst, socklen_t size);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="keywordtype">char</span> *inet_ntoa(<span class="keyword">struct</span> in_addr in);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="keywordtype">int</span> inet_pton(<span class="keywordtype">int</span> af, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">void</span> *dst);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="keyword">typedef</span> void (*mg_init_cb)(<span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="keywordtype">bool</span> mg_start_task(<span class="keywordtype">int</span> priority, <span class="keywordtype">int</span> stack_size, mg_init_cb mg_init);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="keywordtype">void</span> mg_run_in_task(<span class="keywordtype">void</span> (*cb)(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keywordtype">void</span> *arg), <span class="keywordtype">void</span> *cb_arg);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="keywordtype">int</span> sl_fs_init(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="keywordtype">void</span> sl_restart_cb(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="keywordtype">int</span> sl_set_ssl_opts(<span class="keywordtype">int</span> sock, <span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !defined(__SIMPLELINK_H__) */</span><span class="preprocessor"></span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">/* Compatibility with older versions of SimpleLink */</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="preprocessor">#if SL_MAJOR_VERSION_NUM &lt; 2</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="preprocessor">#define SL_ERROR_BSD_EAGAIN SL_EAGAIN</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="preprocessor">#define SL_ERROR_BSD_EALREADY SL_EALREADY</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="preprocessor">#define SL_ERROR_BSD_ENOPROTOOPT SL_ENOPROTOOPT</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="preprocessor">#define SL_ERROR_BSD_ESECDATEERROR SL_ESECDATEERROR</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="preprocessor">#define SL_ERROR_BSD_ESECSNOVERIFY SL_ESECSNOVERIFY</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_FAILED_TO_ALLOCATE_MEM SL_FS_ERR_FAILED_TO_ALLOCATE_MEM</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_FILE_HAS_NOT_BEEN_CLOSE_CORRECTLY \</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="preprocessor">  SL_FS_FILE_HAS_NOT_BEEN_CLOSE_CORRECTLY</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_FILE_NAME_EXIST SL_FS_FILE_NAME_EXIST</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_FILE_NOT_EXISTS SL_FS_ERR_FILE_NOT_EXISTS</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_NO_AVAILABLE_NV_INDEX SL_FS_ERR_NO_AVAILABLE_NV_INDEX</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_NOT_ENOUGH_STORAGE_SPACE SL_FS_ERR_NO_AVAILABLE_BLOCKS</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_NOT_SUPPORTED SL_FS_ERR_NOT_SUPPORTED</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_WRONG_FILE_NAME SL_FS_WRONG_FILE_NAME</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="preprocessor">#define SL_ERROR_FS_INVALID_HANDLE SL_FS_ERR_INVALID_HANDLE</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="preprocessor">#define SL_NETCFG_MAC_ADDRESS_GET SL_MAC_ADDRESS_GET</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="preprocessor">#define SL_SOCKET_FD_ZERO SL_FD_ZERO</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="preprocessor">#define SL_SOCKET_FD_SET SL_FD_SET</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="preprocessor">#define SL_SOCKET_FD_ISSET SL_FD_ISSET</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="preprocessor">#define SL_SO_SECURE_DOMAIN_NAME_VERIFICATION SO_SECURE_DOMAIN_NAME_VERIFICATION</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="preprocessor">#define SL_FS_READ FS_MODE_OPEN_READ</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="preprocessor">#define SL_FS_WRITE FS_MODE_OPEN_WRITE</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="preprocessor">#define SL_FI_FILE_SIZE(fi) ((fi).FileLen)</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="preprocessor">#define SL_FI_FILE_MAX_SIZE(fi) ((fi).AllocatedLen)</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="preprocessor">#define SlDeviceVersion_t SlVersionFull</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="preprocessor">#define sl_DeviceGet sl_DevGet</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="preprocessor">#define SL_DEVICE_GENERAL SL_DEVICE_GENERAL_CONFIGURATION</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="preprocessor">#define SL_LEN_TYPE _u8</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="preprocessor">#define SL_OPT_TYPE _u8</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* SL_MAJOR_VERSION_NUM &gt;= 2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="preprocessor">#define FS_MODE_OPEN_CREATE(max_size, flag) \</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="preprocessor">  (SL_FS_CREATE | SL_FS_CREATE_MAX_SIZE(max_size))</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="preprocessor">#define SL_FI_FILE_SIZE(fi) ((fi).Len)</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="preprocessor">#define SL_FI_FILE_MAX_SIZE(fi) ((fi).MaxSize)</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="preprocessor">#define SL_LEN_TYPE _u16</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="preprocessor">#define SL_OPT_TYPE _u16</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* SL_MAJOR_VERSION_NUM &lt; 2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="keywordtype">int</span> slfs_open(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *fname, uint32_t flags);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_NET_IF == MG_NET_IF_SIMPLELINK */</span><span class="preprocessor"></span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_SIMPLELINK_CS_SIMPLELINK_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_wince.h&quot;</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_WINCE_H_</span></div><div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c80b4aa9571d585bef3141e5806c021.html#a4c80b4aa9571d585bef3141e5806c021"> 1285</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_WINCE_H_</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_WINCE</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment"> * MSVC++ 14.0 _MSC_VER == 1900 (Visual Studio 2015)</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment"> * MSVC++ 12.0 _MSC_VER == 1800 (Visual Studio 2013)</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment"> * MSVC++ 11.0 _MSC_VER == 1700 (Visual Studio 2012)</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment"> * MSVC++ 10.0 _MSC_VER == 1600 (Visual Studio 2010)</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment"> * MSVC++ 9.0  _MSC_VER == 1500 (Visual Studio 2008)</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment"> * MSVC++ 8.0  _MSC_VER == 1400 (Visual Studio 2005)</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment"> * MSVC++ 7.1  _MSC_VER == 1310 (Visual Studio 2003)</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment"> * MSVC++ 7.0  _MSC_VER == 1300</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment"> * MSVC++ 6.0  _MSC_VER == 1200</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment"> * MSVC++ 5.0  _MSC_VER == 1100</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="preprocessor">#pragma warning(disable : 4127) </span><span class="comment">/* FD_SET() emits warning, disable it */</span><span class="preprocessor"></span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="preprocessor">#pragma warning(disable : 4204) </span><span class="comment">/* missing c99 support */</span><span class="preprocessor"></span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="preprocessor">#ifndef _WINSOCK_DEPRECATED_NO_WARNINGS</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="preprocessor">#define _WINSOCK_DEPRECATED_NO_WARNINGS 1</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="preprocessor">#ifndef _CRT_SECURE_NO_WARNINGS</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="preprocessor">#define _CRT_SECURE_NO_WARNINGS</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;ws2.lib&quot;) </span><span class="comment">/* Linking with WinCE winsock library */</span><span class="preprocessor"></span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="preprocessor">#include &lt;winsock2.h&gt;</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="preprocessor">#include &lt;ws2tcpip.h&gt;</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="preprocessor">#define strdup _strdup</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="preprocessor">#ifndef EINPROGRESS</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="preprocessor">#define EINPROGRESS WSAEINPROGRESS</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="preprocessor">#ifndef EWOULDBLOCK</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="preprocessor">#define EWOULDBLOCK WSAEWOULDBLOCK</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="preprocessor">#ifndef EAGAIN</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="preprocessor">#define EAGAIN EWOULDBLOCK</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="preprocessor">#ifndef __func__</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="preprocessor">#define STRX(x) #x</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="preprocessor">#define STR(x) STRX(x)</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="preprocessor">#define __func__ __FILE__ &quot;:&quot; STR(__LINE__)</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="preprocessor">#define snprintf _snprintf</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="preprocessor">#define fileno _fileno</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="preprocessor">#define vsnprintf _vsnprintf</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="preprocessor">#define sleep(x) Sleep((x) *1000)</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="preprocessor">#define to64(x) _atoi64(x)</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="preprocessor">#define rmdir _rmdir</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; _MSC_VER &gt;= 1400</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="preprocessor">#define fseeko(x, y, z) _fseeki64((x), (y), (z))</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="preprocessor">#define fseeko(x, y, z) fseek((x), (y), (z))</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> socklen_t;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#if _MSC_VER &gt;= 1700</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span> int8_t;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uint8_t;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> int32_t;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uint32_t;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">short</span> int16_t;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> uint16_t;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="keyword">typedef</span> __int64 int64_t;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int64 uint64_t;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="keyword">typedef</span> SOCKET sock_t;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="keyword">typedef</span> uint32_t in_addr_t;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="preprocessor">#ifndef UINT16_MAX</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">#define UINT16_MAX 65535</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="preprocessor">#ifndef UINT32_MAX</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="preprocessor">#define UINT32_MAX 4294967295</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="preprocessor">#ifndef pid_t</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="preprocessor">#define pid_t HANDLE</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="preprocessor">#define INT64_FMT &quot;I64d&quot;</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="preprocessor">#define INT64_X_FMT &quot;I64x&quot;</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">/* TODO(alashkin): check if this is correct */</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="preprocessor">#define DIRSEP &#39;\\&#39;</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="preprocessor">#define CS_DEFINE_DIRENT</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="preprocessor">#ifndef va_copy</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="preprocessor">#ifdef __va_copy</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="preprocessor">#define va_copy __va_copy</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="preprocessor">#define va_copy(x, y) (x) = (y)</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_REQUEST_SIZE</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_REQUEST_SIZE 8192</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_SEND_MBUF</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_SEND_MBUF 4096</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_HEADERS</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_HEADERS 40</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="preprocessor">#define abort() DebugBreak();</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="preprocessor">#ifndef BUFSIZ</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="preprocessor">#define BUFSIZ 4096</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment"> * Explicitly disabling MG_ENABLE_THREADS for WinCE</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment"> * because they are enabled for _WIN32 by default</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_THREADS</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="preprocessor">#define MG_ENABLE_THREADS 0</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 1</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>_stati64 {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  uint32_t st_mtime;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  uint32_t st_size;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  uint32_t st_mode;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;} cs_stat_t;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment"> * WinCE 6.0 has a lot of useful definitions in ATL (not windows.h) headers</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment"> * use #ifdefs to avoid conflicts</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">#ifndef ENOENT</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="preprocessor">#define ENOENT ERROR_PATH_NOT_FOUND</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="preprocessor">#ifndef EACCES</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="preprocessor">#define EACCES ERROR_ACCESS_DENIED</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">#ifndef ENOMEM</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="preprocessor">#define ENOMEM ERROR_NOT_ENOUGH_MEMORY</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="preprocessor">#ifndef _UINTPTR_T_DEFINED</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *uintptr_t;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="preprocessor">#define _S_IFREG 2</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="preprocessor">#define _S_IFDIR 4</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="preprocessor">#ifndef S_ISDIR</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="preprocessor">#define S_ISDIR(x) (((x) &amp;_S_IFDIR) != 0)</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="preprocessor">#ifndef S_ISREG</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="preprocessor">#define S_ISREG(x) (((x) &amp;_S_IFREG) != 0)</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="keywordtype">int</span> open(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> oflag, <span class="keywordtype">int</span> pmode);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="keywordtype">int</span> _wstati64(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span> *path, cs_stat_t *st);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *strerror();</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_WINCE */</span><span class="preprocessor"></span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_WINCE_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_nxp_lpc.h&quot;</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_NXP_LPC_H_</span></div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="mongoose_8h_ac57b9c9473aff41dc4c02a6d6196b409.html#ac57b9c9473aff41dc4c02a6d6196b409"> 1494</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_NXP_LPC_H_</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_NXP_LPC</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="preprocessor">#define INT64_FMT &quot;lld&quot;</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="preprocessor">#define INT64_X_FMT &quot;llx&quot;</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment"> * LPCXpress comes with 3 C library implementations: Newlib, NewlibNano and</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment"> *Redlib.</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment"> * See https://community.nxp.com/message/630860 for more details.</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment"> * Redlib is the default and lacks certain things, so we provide them.</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="preprocessor">#ifdef __REDLIB_INTERFACE_VERSION__</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">/* Let LWIP define timeval for us. */</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="preprocessor">#define LWIP_TIMEVAL_PRIVATE 1</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="preprocessor">#define va_copy(d, s) __builtin_va_copy(d, s)</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="preprocessor">#define CS_ENABLE_TO64 1</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="preprocessor">#define to64(x) cs_to64(x)</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="preprocessor">#define CS_ENABLE_STRDUP 1</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="preprocessor">#define LWIP_TIMEVAL_PRIVATE 0</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_NXP_LPC */</span><span class="preprocessor"></span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_NXP_LPC_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_nxp_kinetis.h&quot;</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_NXP_KINETIS_H_</span></div><div class="line"><a name="l01550"></a><span class="lineno"><a class="line" href="mongoose_8h_afcf0077c21a045f3609d9d04757f4db9.html#afcf0077c21a045f3609d9d04757f4db9"> 1550</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_NXP_KINETIS_H_</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_NXP_KINETIS</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="preprocessor">#define INT64_FMT &quot;lld&quot;</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="preprocessor">#define INT64_X_FMT &quot;llx&quot;</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="preprocessor">#define __cdecl</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="preprocessor">#define MG_LWIP 1</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">/* struct timeval is defined in sys/time.h. */</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="preprocessor">#define LWIP_TIMEVAL_PRIVATE 0</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_NXP_KINETIS */</span><span class="preprocessor"></span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_NXP_KINETIS_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_pic32.h&quot;</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_PIC32_H_</span></div><div class="line"><a name="l01584"></a><span class="lineno"><a class="line" href="mongoose_8h_abe0c4042728227fbf85a33df88f35fc3.html#abe0c4042728227fbf85a33df88f35fc3"> 1584</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_PIC32_H_</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_PIC32</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_PIC32</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="preprocessor">#include &lt;system_config.h&gt;</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="preprocessor">#include &lt;system_definitions.h&gt;</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="keyword">typedef</span> TCP_SOCKET sock_t;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;lu&quot;</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="preprocessor">#define INT64_FMT &quot;lld&quot;</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="keywordtype">char</span> *inet_ntoa(<span class="keyword">struct</span> in_addr in);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_PIC32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_PIC32_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/platform_stm32.h&quot;</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_PLATFORM_STM32_H_</span></div><div class="line"><a name="l01624"></a><span class="lineno"><a class="line" href="mongoose_8h_aff55f7d381be61ffb5677a2da4efe7a8.html#aff55f7d381be61ffb5677a2da4efe7a8"> 1624</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_PLATFORM_STM32_H_</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_STM32</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#include &lt;memory.h&gt;</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="preprocessor">#include &lt;stm32_sdk_hal.h&gt;</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="preprocessor">#define to64(x) strtoll(x, NULL, 10)</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="preprocessor">#define INT64_FMT PRId64</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="preprocessor">#define SIZE_T_FMT &quot;u&quot;</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>stat cs_stat_t;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="preprocessor">#define DIRSEP &#39;/&#39;</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STDIO</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">#define CS_ENABLE_STDIO 1</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 1</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="preprocessor">#define CS_DEFINE_DIRENT</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_PLATFORM == CS_P_STM32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_PLATFORM_STM32_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="preprocessor">#line 1 &quot;common/platforms/lwip/mg_lwip.h&quot;</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_PLATFORMS_LWIP_MG_LWIP_H_</span></div><div class="line"><a name="l01665"></a><span class="lineno"><a class="line" href="mongoose_8h_a5739207fab2bc15ebfd6ad34ed0a863d.html#a5739207fab2bc15ebfd6ad34ed0a863d"> 1665</a></span>&#160;<span class="preprocessor">#define CS_COMMON_PLATFORMS_LWIP_MG_LWIP_H_</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="preprocessor">#ifndef MG_LWIP</span></div><div class="line"><a name="l01668"></a><span class="lineno"><a class="line" href="mongoose_8h_ac2a2febf942f2f7ac1265c04d9371788.html#ac2a2febf942f2f7ac1265c04d9371788"> 1668</a></span>&#160;<span class="preprocessor">#define MG_LWIP 0</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="preprocessor">#if MG_LWIP</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment"> * When compiling for nRF5x chips with arm-none-eabi-gcc, it has BYTE_ORDER</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment"> * already defined, so in order to avoid warnings in lwip, we have to undefine</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment"> * it.</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment"> * TODO: Check if in the future versions of nRF5 SDK that changes.</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment"> *       Current version of nRF51 SDK: 0.8.0</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment"> *                          nRF5 SDK:  0.9.0</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="preprocessor">#if CS_PLATFORM == CS_P_NRF51 || CS_PLATFORM == CS_P_NRF52</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="preprocessor">#undef BYTE_ORDER</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="preprocessor">#include &lt;lwip/opt.h&gt;</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="preprocessor">#include &lt;lwip/err.h&gt;</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="preprocessor">#include &lt;lwip/ip_addr.h&gt;</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="preprocessor">#include &lt;lwip/inet.h&gt;</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="preprocessor">#include &lt;lwip/netdb.h&gt;</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="preprocessor">#include &lt;lwip/dns.h&gt;</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="preprocessor">#ifndef LWIP_PROVIDE_ERRNO</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="preprocessor">#if LWIP_SOCKET</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="preprocessor">#include &lt;lwip/sockets.h&gt;</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">/* We really need the definitions from sockets.h. */</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="preprocessor">#undef LWIP_SOCKET</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="preprocessor">#define LWIP_SOCKET 1</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="preprocessor">#include &lt;lwip/sockets.h&gt;</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="preprocessor">#undef LWIP_SOCKET</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="preprocessor">#define LWIP_SOCKET 0</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="preprocessor">#define INVALID_SOCKET (-1)</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="preprocessor">#define SOMAXCONN 10</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> sock_t;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="preprocessor">#if MG_NET_IF == MG_NET_IF_LWIP_LOW_LEVEL</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a>;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;uint32_t mg_lwip_get_poll_delay_ms(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__connection_ac341f1f2bd18e030fe90a914e4517506.html#ac341f1f2bd18e030fe90a914e4517506">mgr</a>);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="keywordtype">void</span> mg_lwip_set_keepalive_params(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> idle,</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                                  <span class="keywordtype">int</span> interval, <span class="keywordtype">int</span> count);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">/* For older version of LWIP */</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="preprocessor">#ifndef ipX_2_ip</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="preprocessor">#define ipX_2_ip(x) (x)</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_LWIP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_PLATFORMS_LWIP_MG_LWIP_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="preprocessor">#line 1 &quot;common/cs_md5.h&quot;</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_MD5_H_</span></div><div class="line"><a name="l01737"></a><span class="lineno"><a class="line" href="mongoose_8h_aa949d6c5f40fc4a80eb97ab6558f9bff.html#aa949d6c5f40fc4a80eb97ab6558f9bff"> 1737</a></span>&#160;<span class="preprocessor">#define CS_COMMON_MD5_H_</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="preprocessor">#ifndef CS_DISABLE_MD5</span></div><div class="line"><a name="l01742"></a><span class="lineno"><a class="line" href="mongoose_8h_adde5b3eab9cb7768e17e53bb4910cec0.html#adde5b3eab9cb7768e17e53bb4910cec0"> 1742</a></span>&#160;<span class="preprocessor">#define CS_DISABLE_MD5 0</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"><a class="line" href="structcs__md5__ctx.html"> 1749</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01750"></a><span class="lineno"><a class="line" href="structcs__md5__ctx_abb0fb32f33a62efcd9dc65e3f76cf790.html#abb0fb32f33a62efcd9dc65e3f76cf790"> 1750</a></span>&#160;  uint32_t buf[4];</div><div class="line"><a name="l01751"></a><span class="lineno"><a class="line" href="structcs__md5__ctx_a598348fc328298a1d8d0ac673d69f749.html#a598348fc328298a1d8d0ac673d69f749"> 1751</a></span>&#160;  uint32_t bits[2];</div><div class="line"><a name="l01752"></a><span class="lineno"><a class="line" href="structcs__md5__ctx_a950ebb13dee2724d8d60d9d558d1757d.html#a950ebb13dee2724d8d60d9d558d1757d"> 1752</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> in[64];</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;} <a class="code" href="structcs__md5__ctx.html">cs_md5_ctx</a>;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_afd1f26bca4497394c4256aa32a2b1292.html#afd1f26bca4497394c4256aa32a2b1292">cs_md5_init</a>(<a class="code" href="structcs__md5__ctx.html">cs_md5_ctx</a> *c);</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a3f0263095b4f7ba23586f8660bdface2.html#a3f0263095b4f7ba23586f8660bdface2">cs_md5_update</a>(<a class="code" href="structcs__md5__ctx.html">cs_md5_ctx</a> *c, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_acc7181dfd683586091c42f6fcdbf886e.html#acc7181dfd683586091c42f6fcdbf886e">cs_md5_final</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *md, <a class="code" href="structcs__md5__ctx.html">cs_md5_ctx</a> *c);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;}</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_MD5_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="preprocessor">#line 1 &quot;common/cs_sha1.h&quot;</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_SHA1_H_</span></div><div class="line"><a name="l01773"></a><span class="lineno"><a class="line" href="mongoose_8h_aa4b5abea7f8c1cdfc23999e50fac771e.html#aa4b5abea7f8c1cdfc23999e50fac771e"> 1773</a></span>&#160;<span class="preprocessor">#define CS_COMMON_SHA1_H_</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="preprocessor">#ifndef CS_DISABLE_SHA1</span></div><div class="line"><a name="l01776"></a><span class="lineno"><a class="line" href="mongoose_8h_af06af714ae40b52822a3edf4435a6f4d.html#af06af714ae40b52822a3edf4435a6f4d"> 1776</a></span>&#160;<span class="preprocessor">#define CS_DISABLE_SHA1 0</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="preprocessor">#if !CS_DISABLE_SHA1</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"><a class="line" href="structcs__sha1__ctx.html"> 1787</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01788"></a><span class="lineno"><a class="line" href="structcs__sha1__ctx_aaec67b16b157c16a771df82ec41220b0.html#aaec67b16b157c16a771df82ec41220b0"> 1788</a></span>&#160;  uint32_t state[5];</div><div class="line"><a name="l01789"></a><span class="lineno"><a class="line" href="structcs__sha1__ctx_af6258c6cb812c334f1a287e2d6b9ea09.html#af6258c6cb812c334f1a287e2d6b9ea09"> 1789</a></span>&#160;  uint32_t count[2];</div><div class="line"><a name="l01790"></a><span class="lineno"><a class="line" href="structcs__sha1__ctx_ac7c9295501f0e13de5b0db4305a2719b.html#ac7c9295501f0e13de5b0db4305a2719b"> 1790</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buffer[64];</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;} <a class="code" href="structcs__sha1__ctx.html">cs_sha1_ctx</a>;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_aea2ef4926eb7f9f89f8d1435d6a9e8a0.html#aea2ef4926eb7f9f89f8d1435d6a9e8a0">cs_sha1_init</a>(<a class="code" href="structcs__sha1__ctx.html">cs_sha1_ctx</a> *);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_add06e43dec71654cf9872f353af49b72.html#add06e43dec71654cf9872f353af49b72">cs_sha1_update</a>(<a class="code" href="structcs__sha1__ctx.html">cs_sha1_ctx</a> *, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, uint32_t len);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_acf2f96f6386c4b52dff08be514b72ff6.html#acf2f96f6386c4b52dff08be514b72ff6">cs_sha1_final</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> digest[20], <a class="code" href="structcs__sha1__ctx.html">cs_sha1_ctx</a> *);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a9da21b9e0796262d42fb69a200b97071.html#a9da21b9e0796262d42fb69a200b97071">cs_hmac_sha1</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">size_t</span> key_len,</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *text, <span class="keywordtype">size_t</span> text_len,</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[20]);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_DISABLE_SHA1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_SHA1_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="preprocessor">#line 1 &quot;common/cs_time.h&quot;</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_CS_TIME_H_</span></div><div class="line"><a name="l01815"></a><span class="lineno"><a class="line" href="mongoose_8h_a2525e0b73c550c32ac3be361a19baf41.html#a2525e0b73c550c32ac3be361a19baf41"> 1815</a></span>&#160;<span class="preprocessor">#define CS_COMMON_CS_TIME_H_</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">/* Sub-second granularity time(). */</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="keywordtype">double</span> <a class="code" href="mongoose_8h_ab18d4c40465496efc32955c98c8e97f0.html#ab18d4c40465496efc32955c98c8e97f0">cs_time</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment"> * Similar to (non-standard) timegm, converts broken-down time into the number</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment"> * of seconds since Unix Epoch.</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="keywordtype">double</span> <a class="code" href="mongoose_8h_a215a10a6285d7ad208c15c1f9539a5ed.html#a215a10a6285d7ad208c15c1f9539a5ed">cs_timegm</a>(<span class="keyword">const</span> <span class="keyword">struct</span> tm *tm);</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;}</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_CS_TIME_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="preprocessor">#line 1 &quot;common/mg_str.h&quot;</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_MG_STR_H_</span></div><div class="line"><a name="l01848"></a><span class="lineno"><a class="line" href="mongoose_8h_a50709672a10c9ce676c92298f1921eef.html#a50709672a10c9ce676c92298f1921eef"> 1848</a></span>&#160;<span class="preprocessor">#define CS_COMMON_MG_STR_H_</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">/* Describes chunk of memory */</span></div><div class="line"><a name="l01859"></a><span class="lineno"><a class="line" href="structmg__str.html"> 1859</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> {</div><div class="line"><a name="l01860"></a><span class="lineno"><a class="line" href="structmg__str_a1e743a766f92c904d25fe4d058017486.html#a1e743a766f92c904d25fe4d058017486"> 1860</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__str_a1e743a766f92c904d25fe4d058017486.html#a1e743a766f92c904d25fe4d058017486">p</a>; <span class="comment">/* Memory chunk pointer */</span></div><div class="line"><a name="l01861"></a><span class="lineno"><a class="line" href="structmg__str_a53945bdd422bf389d74b863f23cd4463.html#a53945bdd422bf389d74b863f23cd4463"> 1861</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structmg__str_a53945bdd422bf389d74b863f23cd4463.html#a53945bdd422bf389d74b863f23cd4463">len</a>;    <span class="comment">/* Memory chunk length */</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;};</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="comment"> * Helper functions for creating mg_str struct from plain C string.</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment"> * `NULL` is allowed and becomes `{NULL, 0}`.</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> <a class="code" href="mongoose_8h_ad370e6a9b01504eb5f1b7217bfeeb07f.html#ad370e6a9b01504eb5f1b7217bfeeb07f">mg_mk_str</a>(const char *s);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> <a class="code" href="mongoose_8h_a9a51702b7cb2ed34dbe63af83e6d108a.html#a9a51702b7cb2ed34dbe63af83e6d108a">mg_mk_str_n</a>(const char *s, <span class="keywordtype">size_t</span> <a class="code" href="structmg__str_a53945bdd422bf389d74b863f23cd4463.html#a53945bdd422bf389d74b863f23cd4463">len</a>);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment">/* Macro for initializing mg_str. */</span></div><div class="line"><a name="l01872"></a><span class="lineno"><a class="line" href="mongoose_8h_a07e7b0614dae709d2780bb2b8532d987.html#a07e7b0614dae709d2780bb2b8532d987"> 1872</a></span>&#160;<span class="preprocessor">#define MG_MK_STR(str_literal) \</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="preprocessor">  { str_literal, sizeof(str_literal) - 1 }</span></div><div class="line"><a name="l01874"></a><span class="lineno"><a class="line" href="mongoose_8h_a124790fc0aacb2e9484fbcae11ab8c76.html#a124790fc0aacb2e9484fbcae11ab8c76"> 1874</a></span>&#160;<span class="preprocessor">#define MG_NULL_STR \</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="preprocessor">  { NULL, 0 }</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment"> * Cross-platform version of `strcmp()` where where first string is</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment"> * specified by `struct mg_str`.</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ae0607c1237c089d738025538b95c3318.html#ae0607c1237c089d738025538b95c3318">mg_vcmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *str2, <span class="keyword">const</span> <span class="keywordtype">char</span> *str1);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment"> * Cross-platform version of `strncasecmp()` where first string is</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment"> * specified by `struct mg_str`.</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aa37314b5c33ab053f70f7dda2fb37742.html#aa37314b5c33ab053f70f7dda2fb37742">mg_vcasecmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *str2, <span class="keyword">const</span> <span class="keywordtype">char</span> *str1);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">/* Creates a copy of s (heap-allocated). */</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> <a class="code" href="mongoose_8h_a53af9cc9bde042bcdb792fa1c6a67129.html#a53af9cc9bde042bcdb792fa1c6a67129">mg_strdup</a>(const struct <a class="code" href="structmg__str.html">mg_str</a> s);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment"> * Creates a copy of s (heap-allocated).</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment"> * Resulting string is NUL-terminated (but NUL is not included in len).</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> <a class="code" href="mongoose_8h_a4db56a474f8bf90550f0917ae54dc963.html#a4db56a474f8bf90550f0917ae54dc963">mg_strdup_nul</a>(const struct <a class="code" href="structmg__str.html">mg_str</a> s);</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment"> * Locates character in a string.</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mongoose_8h_a97fd4ac5ef21a5492ee309a61f9916e1.html#a97fd4ac5ef21a5492ee309a61f9916e1">mg_strchr</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> s, <span class="keywordtype">int</span> c);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a851d7cda36c3661c7db8cffbabf3fb3e.html#a851d7cda36c3661c7db8cffbabf3fb3e">mg_strcmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> str1, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> str2);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ab25c4918da918cea5ac2b996effe665e.html#ab25c4918da918cea5ac2b996effe665e">mg_strncmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> str1, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> str2, <span class="keywordtype">size_t</span> n);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mongoose_8h_a4c90e8c040a8ef583112add7c64323b6.html#a4c90e8c040a8ef583112add7c64323b6">mg_strstr</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> haystack, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> needle);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;}</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_MG_STR_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="preprocessor">#line 1 &quot;common/mbuf.h&quot;</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment"> * Copyright (c) 2015 Cesanta Software Limited</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment"> * === Memory Buffers</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment"> * Mbufs are mutable/growing memory buffers, like C++ strings.</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment"> * Mbuf can append data to the end of a buffer or insert data into arbitrary</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment"> * position in the middle of a buffer. The buffer grows automatically when</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment"> * needed.</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_MBUF_H_</span></div><div class="line"><a name="l01931"></a><span class="lineno"><a class="line" href="mongoose_8h_a1594a4e0076f3ebde4b9d1f6cb2bae97.html#a1594a4e0076f3ebde4b9d1f6cb2bae97"> 1931</a></span>&#160;<span class="preprocessor">#define CS_COMMON_MBUF_H_</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="preprocessor">#if defined(__cplusplus)</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="preprocessor">#ifndef MBUF_SIZE_MULTIPLIER</span></div><div class="line"><a name="l01941"></a><span class="lineno"><a class="line" href="mongoose_8h_a8ee76dff85c8a5279504cc87b23bbd04.html#a8ee76dff85c8a5279504cc87b23bbd04"> 1941</a></span>&#160;<span class="preprocessor">#define MBUF_SIZE_MULTIPLIER 1.5</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">/* Memory buffer descriptor */</span></div><div class="line"><a name="l01945"></a><span class="lineno"><a class="line" href="structmbuf.html"> 1945</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmbuf.html">mbuf</a> {</div><div class="line"><a name="l01946"></a><span class="lineno"><a class="line" href="structmbuf_ae2a6e23a4997e9aea0908628db2b23d0.html#ae2a6e23a4997e9aea0908628db2b23d0"> 1946</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="structmbuf_ae2a6e23a4997e9aea0908628db2b23d0.html#ae2a6e23a4997e9aea0908628db2b23d0">buf</a>;   <span class="comment">/* Buffer pointer */</span></div><div class="line"><a name="l01947"></a><span class="lineno"><a class="line" href="structmbuf_a4da00860609dd46fe8b679d5e1deeac3.html#a4da00860609dd46fe8b679d5e1deeac3"> 1947</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structmbuf_a4da00860609dd46fe8b679d5e1deeac3.html#a4da00860609dd46fe8b679d5e1deeac3">len</a>;  <span class="comment">/* Data length. Data is located between offset 0 and len. */</span></div><div class="line"><a name="l01948"></a><span class="lineno"><a class="line" href="structmbuf_ae245d03a50c2891c1fb228093d842270.html#ae245d03a50c2891c1fb228093d842270"> 1948</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structmbuf_ae245d03a50c2891c1fb228093d842270.html#ae245d03a50c2891c1fb228093d842270">size</a>; <span class="comment">/* Buffer size allocated by realloc(1). Must be &gt;= len */</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;};</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment"> * Initialises an Mbuf.</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment"> * `initial_capacity` specifies the initial capacity of the mbuf.</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ac13b929593fe45bd22487365951b28d0.html#ac13b929593fe45bd22487365951b28d0">mbuf_init</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *, <span class="keywordtype">size_t</span> initial_capacity);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">/* Frees the space allocated for the mbuffer and resets the mbuf structure. */</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a3c92c6beae4ba6f769d3525c687e13c9.html#a3c92c6beae4ba6f769d3525c687e13c9">mbuf_free</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment"> * Appends data to the Mbuf.</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment"> * Returns the number of bytes appended or 0 if out of memory.</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mongoose_8h_ac41fbcc1cce8ce4b7c470e7a4464b9b9.html#ac41fbcc1cce8ce4b7c470e7a4464b9b9">mbuf_append</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> data_size);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment"> * Inserts data at a specified offset in the Mbuf.</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="comment"> * Existing data will be shifted forwards and the buffer will</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment"> * be grown if necessary.</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment"> * Returns the number of bytes inserted.</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mongoose_8h_a2820cf0d2389fb3597e918a53f3f8cfb.html#a2820cf0d2389fb3597e918a53f3f8cfb">mbuf_insert</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *, <span class="keywordtype">size_t</span>, <span class="keyword">const</span> <span class="keywordtype">void</span> *, <span class="keywordtype">size_t</span>);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">/* Removes `data_size` bytes from the beginning of the buffer. */</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2afa30f0d231b29bb1fbc53e27ce8a56.html#a2afa30f0d231b29bb1fbc53e27ce8a56">mbuf_remove</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *, <span class="keywordtype">size_t</span> data_size);</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment"> * Resizes an Mbuf.</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="comment"> * If `new_size` is smaller than buffer&#39;s `len`, the</span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment"> * resize is not performed.</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a53797056e739907aa124fa932c1d7708.html#a53797056e739907aa124fa932c1d7708">mbuf_resize</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *, <span class="keywordtype">size_t</span> new_size);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment">/* Shrinks an Mbuf by resizing its `size` to `len`. */</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_adb813dc930103a8ee7208fe700e1af59.html#adb813dc930103a8ee7208fe700e1af59">mbuf_trim</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="preprocessor">#if defined(__cplusplus)</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;}</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_MBUF_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="preprocessor">#line 1 &quot;common/base64.h&quot;</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_BASE64_H_</span></div><div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c4240f5fd965549c75a1e46d52988c4.html#a4c4240f5fd965549c75a1e46d52988c4"> 2004</a></span>&#160;<span class="preprocessor">#define CS_COMMON_BASE64_H_</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="preprocessor">#ifndef DISABLE_BASE64</span></div><div class="line"><a name="l02007"></a><span class="lineno"><a class="line" href="mongoose_8h_ae917e520860fd4129234618a5f56a55f.html#ae917e520860fd4129234618a5f56a55f"> 2007</a></span>&#160;<span class="preprocessor">#define DISABLE_BASE64 0</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="preprocessor">#if !DISABLE_BASE64</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div><div class="line"><a name="l02018"></a><span class="lineno"><a class="line" href="mongoose_8h_ab2260ef7657f28e31f29dcc1313f1e8d.html#ab2260ef7657f28e31f29dcc1313f1e8d"> 2018</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="mongoose_8h_ab2260ef7657f28e31f29dcc1313f1e8d.html#ab2260ef7657f28e31f29dcc1313f1e8d">cs_base64_putc_t</a>)(char, <span class="keywordtype">void</span> *);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"><a class="line" href="structcs__base64__ctx.html"> 2020</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcs__base64__ctx.html">cs_base64_ctx</a> {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="comment">/* cannot call it putc because it&#39;s a macro on some environments */</span></div><div class="line"><a name="l02022"></a><span class="lineno"><a class="line" href="structcs__base64__ctx_a59b8384fbdd1681555a9dd18ed6585ae.html#a59b8384fbdd1681555a9dd18ed6585ae"> 2022</a></span>&#160;  <a class="code" href="mongoose_8h_ab2260ef7657f28e31f29dcc1313f1e8d.html#ab2260ef7657f28e31f29dcc1313f1e8d">cs_base64_putc_t</a> <a class="code" href="structcs__base64__ctx_a59b8384fbdd1681555a9dd18ed6585ae.html#a59b8384fbdd1681555a9dd18ed6585ae">b64_putc</a>;</div><div class="line"><a name="l02023"></a><span class="lineno"><a class="line" href="structcs__base64__ctx_a209b5eff716d6a1850cca128ed5b070e.html#a209b5eff716d6a1850cca128ed5b070e"> 2023</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> chunk[3];</div><div class="line"><a name="l02024"></a><span class="lineno"><a class="line" href="structcs__base64__ctx_a5753baf57fe83161369e2270d57e4a9e.html#a5753baf57fe83161369e2270d57e4a9e"> 2024</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structcs__base64__ctx_a5753baf57fe83161369e2270d57e4a9e.html#a5753baf57fe83161369e2270d57e4a9e">chunk_size</a>;</div><div class="line"><a name="l02025"></a><span class="lineno"><a class="line" href="structcs__base64__ctx_ac6023cc2887001835a99b6a71db9f43b.html#ac6023cc2887001835a99b6a71db9f43b"> 2025</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structcs__base64__ctx_ac6023cc2887001835a99b6a71db9f43b.html#ac6023cc2887001835a99b6a71db9f43b">user_data</a>;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;};</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_abd3e9df33c85726efbd1291d81a7f067.html#abd3e9df33c85726efbd1291d81a7f067">cs_base64_init</a>(<span class="keyword">struct</span> <a class="code" href="structcs__base64__ctx.html">cs_base64_ctx</a> *ctx, <a class="code" href="mongoose_8h_ab2260ef7657f28e31f29dcc1313f1e8d.html#ab2260ef7657f28e31f29dcc1313f1e8d">cs_base64_putc_t</a> putc,</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                    <span class="keywordtype">void</span> *user_data);</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a01dbdfd769a4bc517c4f2b2f380bda2d.html#a01dbdfd769a4bc517c4f2b2f380bda2d">cs_base64_update</a>(<span class="keyword">struct</span> <a class="code" href="structcs__base64__ctx.html">cs_base64_ctx</a> *ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a80648e9df5c0ddf56b33f0d397e0ad50.html#a80648e9df5c0ddf56b33f0d397e0ad50">cs_base64_finish</a>(<span class="keyword">struct</span> <a class="code" href="structcs__base64__ctx.html">cs_base64_ctx</a> *ctx);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ad45093745332fcb36539dcd8442c1239.html#ad45093745332fcb36539dcd8442c1239">cs_base64_encode</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">int</span> src_len, <span class="keywordtype">char</span> *dst);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_aa0ce1f2850118c808d1b92cb96a6a90d.html#aa0ce1f2850118c808d1b92cb96a6a90d">cs_fprint_base64</a>(FILE *f, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">int</span> src_len);</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a91283e6737dc5e1d55eff3385e396c81.html#a91283e6737dc5e1d55eff3385e396c81">cs_base64_decode</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> len, <span class="keywordtype">char</span> *dst, <span class="keywordtype">int</span> *dec_len);</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;}</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DISABLE_BASE64 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_BASE64_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="preprocessor">#line 1 &quot;common/str_util.h&quot;</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment"> * Copyright (c) 2015 Cesanta Software Limited</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="preprocessor">#ifndef CS_COMMON_STR_UTIL_H_</span></div><div class="line"><a name="l02053"></a><span class="lineno"><a class="line" href="mongoose_8h_acef8d86803f97a602efb36fbd238fd42.html#acef8d86803f97a602efb36fbd238fd42"> 2053</a></span>&#160;<span class="preprocessor">#define CS_COMMON_STR_UTIL_H_</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/mg_str.h&quot; */</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_STRDUP</span></div><div class="line"><a name="l02062"></a><span class="lineno"><a class="line" href="mongoose_8h_ad309e5c8f19fabbc583b338be7ea4e7a.html#ad309e5c8f19fabbc583b338be7ea4e7a"> 2062</a></span>&#160;<span class="preprocessor">#define CS_ENABLE_STRDUP 0</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="preprocessor">#ifndef CS_ENABLE_TO64</span></div><div class="line"><a name="l02066"></a><span class="lineno"><a class="line" href="mongoose_8h_ad912cc9e368721054e82f199dfd6dc34.html#ad912cc9e368721054e82f199dfd6dc34"> 2066</a></span>&#160;<span class="preprocessor">#define CS_ENABLE_TO64 0</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment"> * Expands to a string representation of its argument: e.g.</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment"> * `CS_STRINGIFY_LIT(5) expands to &quot;5&quot;`</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02073"></a><span class="lineno"><a class="line" href="mongoose_8h_a9f1b7cec3c58da3dab7729f879e11f1b.html#a9f1b7cec3c58da3dab7729f879e11f1b"> 2073</a></span>&#160;<span class="preprocessor">#define CS_STRINGIFY_LIT(x) #x</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment"> * Expands to a string representation of its argument, which is allowed</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment"> * to be a macro: e.g.</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment"> * #define FOO 123</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment"> * CS_STRINGIFY_MACRO(FOO)</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment"> * expands to 123.</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02084"></a><span class="lineno"><a class="line" href="mongoose_8h_a6599031c12f1c291da1172e1c780cfc8.html#a6599031c12f1c291da1172e1c780cfc8"> 2084</a></span>&#160;<span class="preprocessor">#define CS_STRINGIFY_MACRO(x) CS_STRINGIFY_LIT(x)</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mongoose_8h_a9aed3a9d7ac01bc6919db0c672a21e99.html#a9aed3a9d7ac01bc6919db0c672a21e99">c_strnlen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> maxlen);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_abaea0687eb05744ac151ae014cb20046.html#abaea0687eb05744ac151ae014cb20046">c_snprintf</a>(<span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> buf_size, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a14d0e6865386f4d95bd56c03892e0cc8.html#a14d0e6865386f4d95bd56c03892e0cc8">c_vsnprintf</a>(<span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> buf_size, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, va_list ap);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment"> * Find the first occurrence of find in s, where the search is limited to the</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment"> * first slen characters of s.</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mongoose_8h_a7271747e2e6b7754ade288a7457c340a.html#a7271747e2e6b7754ade288a7457c340a">c_strnstr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *find, <span class="keywordtype">size_t</span> slen);</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment"> * Stringify binary data. Output buffer size must be 2 * size_of_input + 1</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment"> * because each byte of input takes 2 bytes in string representation</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment"> * plus 1 byte for the terminating \0 character.</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a0452c958c9129815f65c057fb54229fb.html#a0452c958c9129815f65c057fb54229fb">cs_to_hex</a>(<span class="keywordtype">char</span> *to, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment"> * Convert stringified binary data back to binary.</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment"> * Does the reverse of `cs_to_hex()`.</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ae39d09d53167a1469ed969475ca415de.html#ae39d09d53167a1469ed969475ca415de">cs_from_hex</a>(<span class="keywordtype">char</span> *to, <span class="keyword">const</span> <span class="keywordtype">char</span> *p, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="preprocessor">#if CS_ENABLE_STRDUP</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="keywordtype">char</span> *strdup(<span class="keyword">const</span> <span class="keywordtype">char</span> *src);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="preprocessor">#if CS_ENABLE_TO64</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment"> * Simple string -&gt; int64 conversion routine.</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;int64_t cs_to64(<span class="keyword">const</span> <span class="keywordtype">char</span> *s);</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment"> * Cross-platform version of `strncasecmp()`.</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aeb5153bb18d4395fbb9c91181eda5420.html#aeb5153bb18d4395fbb9c91181eda5420">mg_ncasecmp</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s1, <span class="keyword">const</span> <span class="keywordtype">char</span> *s2, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="comment"> * Cross-platform version of `strcasecmp()`.</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a629bf8d53c4ed29e29574933681a2bd4.html#a629bf8d53c4ed29e29574933681a2bd4">mg_casecmp</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s1, <span class="keyword">const</span> <span class="keywordtype">char</span> *s2);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment"> * Prints message to the buffer. If the buffer is large enough to hold the</span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment"> * message, it returns buffer. If buffer is to small, it allocates a large</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment"> * enough buffer on heap and returns allocated buffer.</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment"> * This is a supposed use case:</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment"> *    char buf[5], *p = buf;</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="comment"> *    mg_avprintf(&amp;p, sizeof(buf), &quot;%s&quot;, &quot;hi there&quot;);</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="comment"> *    use_p_somehow(p);</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment"> *    if (p != buf) {</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment"> *      free(p);</span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment"> *    }</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment"> * The purpose of this is to avoid malloc-ing if generated strings are small.</span></div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a02baa6e213509fe13515d82681d6f2d9.html#a02baa6e213509fe13515d82681d6f2d9">mg_asprintf</a>(<span class="keywordtype">char</span> **buf, <span class="keywordtype">size_t</span> size, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment">/* Same as mg_asprintf, but takes varargs list. */</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a11bf96f2bbb1d24a3a5837d4a9743362.html#a11bf96f2bbb1d24a3a5837d4a9743362">mg_avprintf</a>(<span class="keywordtype">char</span> **buf, <span class="keywordtype">size_t</span> size, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, va_list ap);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment"> * A helper function for traversing a comma separated list of values.</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment"> * It returns a list pointer shifted to the next value or NULL if the end</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment"> * of the list found.</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment"> * The value is stored in a val vector. If the value has a form &quot;x=y&quot;, then</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment"> * eq_val vector is initialised to point to the &quot;y&quot; part, and val vector length</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment"> * is adjusted to point only to &quot;x&quot;.</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment"> * If the list is just a comma separated list of entries, like &quot;aa,bb,cc&quot; then</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment"> * `eq_val` will contain zero-length string.</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment"> * The purpose of this function is to parse comma separated string without</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment"> * any copying/memory allocation.</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mongoose_8h_a8b314b9753d45adb4dd62438576e6a1c.html#a8b314b9753d45adb4dd62438576e6a1c">mg_next_comma_list_entry</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *list, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *val,</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                                     <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *eq_val);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> mg_next_comma_list_entry_n(struct mg_str list, struct mg_str *val,</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                                         <span class="keyword">struct </span>mg_str *eq_val);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="comment"> * Matches 0-terminated string (mg_match_prefix) or string with given length</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment"> * mg_match_prefix_n against a glob pattern.</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment"> * Match is case-insensitive. Returns number of bytes matched, or -1 if no</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment"> * match.</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a86b3b18850b4a122e8cd173941b43ab6.html#a86b3b18850b4a122e8cd173941b43ab6">mg_match_prefix</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pattern, <span class="keywordtype">int</span> pattern_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *str);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aa392353a491081f279ee8dc588f3b675.html#aa392353a491081f279ee8dc588f3b675">mg_match_prefix_n</a>(<span class="keyword">const</span> <span class="keyword">struct</span> mg_str pattern, <span class="keyword">const</span> <span class="keyword">struct</span> mg_str str);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;}</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_COMMON_STR_UTIL_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="preprocessor">#line 1 &quot;common/queue.h&quot;</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">/* clang-format off */</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">/*-</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment"> * Copyright (c) 1991, 1993</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment"> *  The Regents of the University of California.  All rights reserved.</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment"> * are met:</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="comment"> *    documentation and/or other materials provided with the distribution.</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment"> * 4. Neither the name of the University nor the names of its contributors</span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment"> *    may be used to endorse or promote products derived from this software</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment"> *    without specific prior written permission.</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS&#39;&#39; AND</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment"> * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment"> * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment"> * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment"> * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment"> * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment"> * SUCH DAMAGE.</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment"> *  @(#)queue.h 8.5 (Berkeley) 8/20/94</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment"> * $FreeBSD$</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="preprocessor">#ifndef _SYS_QUEUE_H_</span></div><div class="line"><a name="l02224"></a><span class="lineno"><a class="line" href="mongoose_8h_a5b8f401cee529284731382c3911afcd0.html#a5b8f401cee529284731382c3911afcd0"> 2224</a></span>&#160;<span class="preprocessor">#define _SYS_QUEUE_H_</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment"> * This file defines four types of data structures: singly-linked lists,</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment"> * singly-linked tail queues, lists and tail queues.</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment"> * A singly-linked list is headed by a single forward pointer. The elements</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment"> * are singly linked for minimum space and pointer manipulation overhead at</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment"> * the expense of O(n) removal for arbitrary elements. New elements can be</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment"> * added to the list after an existing element or at the head of the list.</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment"> * Elements being removed from the head of the list should use the explicit</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment"> * macro for this purpose for optimum efficiency. A singly-linked list may</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment"> * only be traversed in the forward direction.  Singly-linked lists are ideal</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment"> * for applications with large datasets and few or no removals or for</span></div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment"> * implementing a LIFO queue.</span></div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="comment"> * A singly-linked tail queue is headed by a pair of pointers, one to the</span></div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="comment"> * head of the list and the other to the tail of the list. The elements are</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment"> * singly linked for minimum space and pointer manipulation overhead at the</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment"> * expense of O(n) removal for arbitrary elements. New elements can be added</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment"> * to the list after an existing element, at the head of the list, or at the</span></div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment"> * end of the list. Elements being removed from the head of the tail queue</span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment"> * should use the explicit macro for this purpose for optimum efficiency.</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment"> * A singly-linked tail queue may only be traversed in the forward direction.</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment"> * Singly-linked tail queues are ideal for applications with large datasets</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment"> * and few or no removals or for implementing a FIFO queue.</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment"> * A list is headed by a single forward pointer (or an array of forward</span></div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment"> * pointers for a hash table header). The elements are doubly linked</span></div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment"> * so that an arbitrary element can be removed without a need to</span></div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="comment"> * traverse the list. New elements can be added to the list before</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment"> * or after an existing element or at the head of the list. A list</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment"> * may be traversed in either direction.</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="comment"> * A tail queue is headed by a pair of pointers, one to the head of the</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="comment"> * list and the other to the tail of the list. The elements are doubly</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="comment"> * linked so that an arbitrary element can be removed without a need to</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="comment"> * traverse the list. New elements can be added to the list before or</span></div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment"> * after an existing element, at the head of the list, or at the end of</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment"> * the list. A tail queue may be traversed in either direction.</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment"> * For details on the use of these macros, see the queue(3) manual page.</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment"> *              SLIST   LIST    STAILQ  TAILQ</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment"> * _HEAD            +   +   +   +</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="comment"> * _CLASS_HEAD          +   +   +   +</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment"> * _HEAD_INITIALIZER        +   +   +   +</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="comment"> * _ENTRY           +   +   +   +</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="comment"> * _CLASS_ENTRY         +   +   +   +</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment"> * _INIT            +   +   +   +</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment"> * _EMPTY           +   +   +   +</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment"> * _FIRST           +   +   +   +</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment"> * _NEXT            +   +   +   +</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment"> * _PREV            -   +   -   +</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="comment"> * _LAST            -   -   +   +</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment"> * _FOREACH         +   +   +   +</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment"> * _FOREACH_FROM        +   +   +   +</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment"> * _FOREACH_SAFE        +   +   +   +</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment"> * _FOREACH_FROM_SAFE       +   +   +   +</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment"> * _FOREACH_REVERSE     -   -   -   +</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="comment"> * _FOREACH_REVERSE_FROM    -   -   -   +</span></div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="comment"> * _FOREACH_REVERSE_SAFE    -   -   -   +</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<span class="comment"> * _FOREACH_REVERSE_FROM_SAFE   -   -   -   +</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="comment"> * _INSERT_HEAD         +   +   +   +</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="comment"> * _INSERT_BEFORE       -   +   -   +</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="comment"> * _INSERT_AFTER        +   +   +   +</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment"> * _INSERT_TAIL         -   -   +   +</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment"> * _CONCAT          -   -   +   +</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment"> * _REMOVE_AFTER        +   -   +   -</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment"> * _REMOVE_HEAD         +   -   +   -</span></div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment"> * _REMOVE          +   +   +   +</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="comment"> * _SWAP            +   +   +   +</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="preprocessor">#ifdef QUEUE_MACRO_DEBUG</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">/* Store the last 2 places the queue element or head was altered */</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="keyword">struct </span>qm_trace {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>    lastline;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>    prevline;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>  *lastfile;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>  *prevfile;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;};</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="preprocessor">#define TRACEBUF    struct qm_trace trace;</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="preprocessor">#define TRACEBUF_INITIALIZER    { __LINE__, 0, __FILE__, NULL } ,</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="preprocessor">#define TRASHIT(x)  do {(x) = (void *)-1;} while (0)</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="preprocessor">#define QMD_SAVELINK(name, link)    void **name = (void *)&amp;(link)</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="preprocessor">#define QMD_TRACE_HEAD(head) do {                   \</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="preprocessor">    (head)-&gt;trace.prevline = (head)-&gt;trace.lastline;        \</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="preprocessor">    (head)-&gt;trace.prevfile = (head)-&gt;trace.lastfile;        \</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="preprocessor">    (head)-&gt;trace.lastline = __LINE__;              \</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="preprocessor">    (head)-&gt;trace.lastfile = __FILE__;              \</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="preprocessor">#define QMD_TRACE_ELEM(elem) do {                   \</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="preprocessor">    (elem)-&gt;trace.prevline = (elem)-&gt;trace.lastline;        \</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="preprocessor">    (elem)-&gt;trace.prevfile = (elem)-&gt;trace.lastfile;        \</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="preprocessor">    (elem)-&gt;trace.lastline = __LINE__;              \</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="preprocessor">    (elem)-&gt;trace.lastfile = __FILE__;              \</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02328"></a><span class="lineno"><a class="line" href="mongoose_8h_a990f2617ebc37cd79c332e24ce7e4a88.html#a990f2617ebc37cd79c332e24ce7e4a88"> 2328</a></span>&#160;<span class="preprocessor">#define QMD_TRACE_ELEM(elem)</span></div><div class="line"><a name="l02329"></a><span class="lineno"><a class="line" href="mongoose_8h_af8813e6512e6ac86e6b598241b1bf020.html#af8813e6512e6ac86e6b598241b1bf020"> 2329</a></span>&#160;<span class="preprocessor">#define QMD_TRACE_HEAD(head)</span></div><div class="line"><a name="l02330"></a><span class="lineno"><a class="line" href="mongoose_8h_a96671a8f87ff87543b3b0b671a274a1c.html#a96671a8f87ff87543b3b0b671a274a1c"> 2330</a></span>&#160;<span class="preprocessor">#define QMD_SAVELINK(name, link)</span></div><div class="line"><a name="l02331"></a><span class="lineno"><a class="line" href="mongoose_8h_a743488648fbd29bf4cf1addf004f43ef.html#a743488648fbd29bf4cf1addf004f43ef"> 2331</a></span>&#160;<span class="preprocessor">#define TRACEBUF</span></div><div class="line"><a name="l02332"></a><span class="lineno"><a class="line" href="mongoose_8h_a0397af84b4a238c2b678721a88b6eccc.html#a0397af84b4a238c2b678721a88b6eccc"> 2332</a></span>&#160;<span class="preprocessor">#define TRACEBUF_INITIALIZER</span></div><div class="line"><a name="l02333"></a><span class="lineno"><a class="line" href="mongoose_8h_adee7bf054da0ade68bb853732c665a2b.html#adee7bf054da0ade68bb853732c665a2b"> 2333</a></span>&#160;<span class="preprocessor">#define TRASHIT(x)</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* QUEUE_MACRO_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment"> * In C++ there can be structure lists and class lists:</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="preprocessor">#define QUEUE_TYPEOF(type) type</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02342"></a><span class="lineno"><a class="line" href="mongoose_8h_a329a99f8542bf673a0620cc188644558.html#a329a99f8542bf673a0620cc188644558"> 2342</a></span>&#160;<span class="preprocessor">#define QUEUE_TYPEOF(type) struct type</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="comment"> * Singly-linked List declarations.</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02348"></a><span class="lineno"><a class="line" href="mongoose_8h_a8224e40ea764bc857bab6f6d9c357dd9.html#a8224e40ea764bc857bab6f6d9c357dd9"> 2348</a></span>&#160;<span class="preprocessor">#define SLIST_HEAD(name, type)                      \</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="preprocessor">    struct type *slh_first; </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"><a class="line" href="mongoose_8h_aaf61bc2f16e0dbd3664318920a7af577.html#aaf61bc2f16e0dbd3664318920a7af577"> 2353</a></span>&#160;<span class="preprocessor">#define SLIST_CLASS_HEAD(name, type)                    \</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="preprocessor">    class type *slh_first;  </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"><a class="line" href="mongoose_8h_a9ae2aca3d46e62be4cb1408bd946ef15.html#a9ae2aca3d46e62be4cb1408bd946ef15"> 2358</a></span>&#160;<span class="preprocessor">#define SLIST_HEAD_INITIALIZER(head)                    \</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="preprocessor">    { NULL }</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"><a class="line" href="mongoose_8h_a5dd8bb1cef024ac008680e7e3b660332.html#a5dd8bb1cef024ac008680e7e3b660332"> 2361</a></span>&#160;<span class="preprocessor">#define SLIST_ENTRY(type)                       \</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="preprocessor">    struct type *sle_next;  </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"><a class="line" href="mongoose_8h_ad426b7874955958c48cc04fa3bc9bfce.html#ad426b7874955958c48cc04fa3bc9bfce"> 2366</a></span>&#160;<span class="preprocessor">#define SLIST_CLASS_ENTRY(type)                     \</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="preprocessor">    class type *sle_next;       </span><span class="comment">/* next element */</span><span class="preprocessor">      \</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="comment"> * Singly-linked List functions.</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02374"></a><span class="lineno"><a class="line" href="mongoose_8h_a59bcc4e6f4bf63b897bdc0644566c583.html#a59bcc4e6f4bf63b897bdc0644566c583"> 2374</a></span>&#160;<span class="preprocessor">#define SLIST_EMPTY(head)   ((head)-&gt;slh_first == NULL)</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"><a class="line" href="mongoose_8h_a91bac7d0d32e3ec56bc579ace45ed8cd.html#a91bac7d0d32e3ec56bc579ace45ed8cd"> 2376</a></span>&#160;<span class="preprocessor">#define SLIST_FIRST(head)   ((head)-&gt;slh_first)</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"><a class="line" href="mongoose_8h_a05db87878125c27e3060dd641aa3b0f4.html#a05db87878125c27e3060dd641aa3b0f4"> 2378</a></span>&#160;<span class="preprocessor">#define SLIST_FOREACH(var, head, field)                 \</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="preprocessor">    for ((var) = SLIST_FIRST((head));               \</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="preprocessor">        (var) = SLIST_NEXT((var), field))</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;</div><div class="line"><a name="l02383"></a><span class="lineno"><a class="line" href="mongoose_8h_a24405a36fc765b619964d525714c7827.html#a24405a36fc765b619964d525714c7827"> 2383</a></span>&#160;<span class="preprocessor">#define SLIST_FOREACH_FROM(var, head, field)                \</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : SLIST_FIRST((head)));     \</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="preprocessor">        (var) = SLIST_NEXT((var), field))</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div><div class="line"><a name="l02388"></a><span class="lineno"><a class="line" href="mongoose_8h_afeca7f301bcbd06a17821aa00e9d14d5.html#afeca7f301bcbd06a17821aa00e9d14d5"> 2388</a></span>&#160;<span class="preprocessor">#define SLIST_FOREACH_SAFE(var, head, field, tvar)          \</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="preprocessor">    for ((var) = SLIST_FIRST((head));               \</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = SLIST_NEXT((var), field), 1);        \</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div><div class="line"><a name="l02393"></a><span class="lineno"><a class="line" href="mongoose_8h_a6eaa913f1fb42af030c7933b5257643f.html#a6eaa913f1fb42af030c7933b5257643f"> 2393</a></span>&#160;<span class="preprocessor">#define SLIST_FOREACH_FROM_SAFE(var, head, field, tvar)         \</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : SLIST_FIRST((head)));     \</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = SLIST_NEXT((var), field), 1);        \</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"><a class="line" href="mongoose_8h_a7017f84f3ba90cd69441f09b2825f7b9.html#a7017f84f3ba90cd69441f09b2825f7b9"> 2398</a></span>&#160;<span class="preprocessor">#define SLIST_FOREACH_PREVPTR(var, varp, head, field)           \</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="preprocessor">    for ((varp) = &amp;SLIST_FIRST((head));             \</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="preprocessor">        ((var) = *(varp)) != NULL;                  \</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="preprocessor">        (varp) = &amp;SLIST_NEXT((var), field))</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div><div class="line"><a name="l02403"></a><span class="lineno"><a class="line" href="mongoose_8h_a361ac8e88cf066cc4d46d28b54fd3031.html#a361ac8e88cf066cc4d46d28b54fd3031"> 2403</a></span>&#160;<span class="preprocessor">#define SLIST_INIT(head) do {                       \</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="preprocessor">    SLIST_FIRST((head)) = NULL;                 \</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;</div><div class="line"><a name="l02407"></a><span class="lineno"><a class="line" href="mongoose_8h_af1d994d9652ccbc41a60b747dfc15ea5.html#af1d994d9652ccbc41a60b747dfc15ea5"> 2407</a></span>&#160;<span class="preprocessor">#define SLIST_INSERT_AFTER(slistelm, elm, field) do {           \</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="preprocessor">    SLIST_NEXT((elm), field) = SLIST_NEXT((slistelm), field);   \</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="preprocessor">    SLIST_NEXT((slistelm), field) = (elm);              \</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;</div><div class="line"><a name="l02412"></a><span class="lineno"><a class="line" href="mongoose_8h_a48df7439e09a419afabdd1f2f8551e73.html#a48df7439e09a419afabdd1f2f8551e73"> 2412</a></span>&#160;<span class="preprocessor">#define SLIST_INSERT_HEAD(head, elm, field) do {            \</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="preprocessor">    SLIST_NEXT((elm), field) = SLIST_FIRST((head));         \</span></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="preprocessor">    SLIST_FIRST((head)) = (elm);                    \</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"><a class="line" href="mongoose_8h_a7cd1d5ae37224ecee1f0b831eb73e7f4.html#a7cd1d5ae37224ecee1f0b831eb73e7f4"> 2417</a></span>&#160;<span class="preprocessor">#define SLIST_NEXT(elm, field)  ((elm)-&gt;field.sle_next)</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"><a class="line" href="mongoose_8h_a9c7950d61593ab9198524fca81b17ab0.html#a9c7950d61593ab9198524fca81b17ab0"> 2419</a></span>&#160;<span class="preprocessor">#define SLIST_REMOVE(head, elm, type, field) do {           \</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="preprocessor">    QMD_SAVELINK(oldnext, (elm)-&gt;field.sle_next);           \</span></div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="preprocessor">    if (SLIST_FIRST((head)) == (elm)) {             \</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;<span class="preprocessor">        SLIST_REMOVE_HEAD((head), field);           \</span></div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="preprocessor">    else {                              \</span></div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="preprocessor">        QUEUE_TYPEOF(type) *curelm = SLIST_FIRST(head);     \</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="preprocessor">        while (SLIST_NEXT(curelm, field) != (elm))      \</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="preprocessor">            curelm = SLIST_NEXT(curelm, field);     \</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="preprocessor">        SLIST_REMOVE_AFTER(curelm, field);          \</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="preprocessor">    TRASHIT(*oldnext);                      \</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div><div class="line"><a name="l02433"></a><span class="lineno"><a class="line" href="mongoose_8h_a16cbbc38c258a695356d8c3377a5604d.html#a16cbbc38c258a695356d8c3377a5604d"> 2433</a></span>&#160;<span class="preprocessor">#define SLIST_REMOVE_AFTER(elm, field) do {             \</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="preprocessor">    SLIST_NEXT(elm, field) =                    \</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="preprocessor">        SLIST_NEXT(SLIST_NEXT(elm, field), field);          \</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"><a class="line" href="mongoose_8h_aeb10c664372b3b680455274170f4c897.html#aeb10c664372b3b680455274170f4c897"> 2438</a></span>&#160;<span class="preprocessor">#define SLIST_REMOVE_HEAD(head, field) do {             \</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="preprocessor">    SLIST_FIRST((head)) = SLIST_NEXT(SLIST_FIRST((head)), field);   \</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div><div class="line"><a name="l02442"></a><span class="lineno"><a class="line" href="mongoose_8h_a43b7433e67885b7f342abe61a7e29745.html#a43b7433e67885b7f342abe61a7e29745"> 2442</a></span>&#160;<span class="preprocessor">#define SLIST_SWAP(head1, head2, type) do {             \</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="preprocessor">    QUEUE_TYPEOF(type) *swap_first = SLIST_FIRST(head1);        \</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;<span class="preprocessor">    SLIST_FIRST(head1) = SLIST_FIRST(head2);            \</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="preprocessor">    SLIST_FIRST(head2) = swap_first;                \</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="comment"> * Singly-linked Tail queue declarations.</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02451"></a><span class="lineno"><a class="line" href="mongoose_8h_a7b54f0de61925e7cf33184c2ec24da14.html#a7b54f0de61925e7cf33184c2ec24da14"> 2451</a></span>&#160;<span class="preprocessor">#define STAILQ_HEAD(name, type)                     \</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="preprocessor">    struct type *stqh_first;</span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="preprocessor">    struct type **stqh_last;</span><span class="comment">/* addr of last next element */</span><span class="preprocessor">     \</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"><a class="line" href="mongoose_8h_ac4524277ff86048278cb5d6979e72217.html#ac4524277ff86048278cb5d6979e72217"> 2457</a></span>&#160;<span class="preprocessor">#define STAILQ_CLASS_HEAD(name, type)                   \</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="preprocessor">    class type *stqh_first; </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="preprocessor">    class type **stqh_last; </span><span class="comment">/* addr of last next element */</span><span class="preprocessor">     \</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div><div class="line"><a name="l02463"></a><span class="lineno"><a class="line" href="mongoose_8h_a3d41ce2c3f1dd21c0d4051d13204c321.html#a3d41ce2c3f1dd21c0d4051d13204c321"> 2463</a></span>&#160;<span class="preprocessor">#define STAILQ_HEAD_INITIALIZER(head)                   \</span></div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;<span class="preprocessor">    { NULL, &amp;(head).stqh_first }</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div><div class="line"><a name="l02466"></a><span class="lineno"><a class="line" href="mongoose_8h_a765904f4fab4e7de1e2cd8ff351bc353.html#a765904f4fab4e7de1e2cd8ff351bc353"> 2466</a></span>&#160;<span class="preprocessor">#define STAILQ_ENTRY(type)                      \</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="preprocessor">    struct type *stqe_next; </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div><div class="line"><a name="l02471"></a><span class="lineno"><a class="line" href="mongoose_8h_a2204feffa591578c6d672f870a7cdb96.html#a2204feffa591578c6d672f870a7cdb96"> 2471</a></span>&#160;<span class="preprocessor">#define STAILQ_CLASS_ENTRY(type)                    \</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="preprocessor">    class type *stqe_next;  </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="comment"> * Singly-linked Tail queue functions.</span></div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02479"></a><span class="lineno"><a class="line" href="mongoose_8h_aadfbe79db37e93cf528ae79a9aafb755.html#aadfbe79db37e93cf528ae79a9aafb755"> 2479</a></span>&#160;<span class="preprocessor">#define STAILQ_CONCAT(head1, head2) do {                \</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="preprocessor">    if (!STAILQ_EMPTY((head2))) {                   \</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="preprocessor">        *(head1)-&gt;stqh_last = (head2)-&gt;stqh_first;      \</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="preprocessor">        (head1)-&gt;stqh_last = (head2)-&gt;stqh_last;        \</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="preprocessor">        STAILQ_INIT((head2));                   \</span></div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div><div class="line"><a name="l02487"></a><span class="lineno"><a class="line" href="mongoose_8h_a8427c8f43d09d73062cf6b37f303aff5.html#a8427c8f43d09d73062cf6b37f303aff5"> 2487</a></span>&#160;<span class="preprocessor">#define STAILQ_EMPTY(head)  ((head)-&gt;stqh_first == NULL)</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div><div class="line"><a name="l02489"></a><span class="lineno"><a class="line" href="mongoose_8h_a3e2eb7535019a2829399b24744dd1a66.html#a3e2eb7535019a2829399b24744dd1a66"> 2489</a></span>&#160;<span class="preprocessor">#define STAILQ_FIRST(head)  ((head)-&gt;stqh_first)</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;</div><div class="line"><a name="l02491"></a><span class="lineno"><a class="line" href="mongoose_8h_a77999ebdf5aaf7af8b8ea22bf208c432.html#a77999ebdf5aaf7af8b8ea22bf208c432"> 2491</a></span>&#160;<span class="preprocessor">#define STAILQ_FOREACH(var, head, field)                \</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="preprocessor">    for((var) = STAILQ_FIRST((head));               \</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="preprocessor">       (var);                           \</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="preprocessor">       (var) = STAILQ_NEXT((var), field))</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;</div><div class="line"><a name="l02496"></a><span class="lineno"><a class="line" href="mongoose_8h_afc90cddaa7d2b43eb0ca0588b09e493a.html#afc90cddaa7d2b43eb0ca0588b09e493a"> 2496</a></span>&#160;<span class="preprocessor">#define STAILQ_FOREACH_FROM(var, head, field)               \</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : STAILQ_FIRST((head)));        \</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="preprocessor">       (var);                           \</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="preprocessor">       (var) = STAILQ_NEXT((var), field))</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"><a class="line" href="mongoose_8h_ac3203dcce73148c142df4586eb55ce55.html#ac3203dcce73148c142df4586eb55ce55"> 2501</a></span>&#160;<span class="preprocessor">#define STAILQ_FOREACH_SAFE(var, head, field, tvar)         \</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="preprocessor">    for ((var) = STAILQ_FIRST((head));              \</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = STAILQ_NEXT((var), field), 1);       \</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div><div class="line"><a name="l02506"></a><span class="lineno"><a class="line" href="mongoose_8h_a7c6e582a011a3935507475e8a952b4bd.html#a7c6e582a011a3935507475e8a952b4bd"> 2506</a></span>&#160;<span class="preprocessor">#define STAILQ_FOREACH_FROM_SAFE(var, head, field, tvar)        \</span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : STAILQ_FIRST((head)));        \</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = STAILQ_NEXT((var), field), 1);       \</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;</div><div class="line"><a name="l02511"></a><span class="lineno"><a class="line" href="mongoose_8h_a3b508a1c06ded6b4ce4b1feea7643c28.html#a3b508a1c06ded6b4ce4b1feea7643c28"> 2511</a></span>&#160;<span class="preprocessor">#define STAILQ_INIT(head) do {                      \</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="preprocessor">    STAILQ_FIRST((head)) = NULL;                    \</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="preprocessor">    (head)-&gt;stqh_last = &amp;STAILQ_FIRST((head));          \</span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div><div class="line"><a name="l02516"></a><span class="lineno"><a class="line" href="mongoose_8h_af6ebdaf4ccbde5e464273b8079e832b3.html#af6ebdaf4ccbde5e464273b8079e832b3"> 2516</a></span>&#160;<span class="preprocessor">#define STAILQ_INSERT_AFTER(head, tqelm, elm, field) do {       \</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="preprocessor">    if ((STAILQ_NEXT((elm), field) = STAILQ_NEXT((tqelm), field)) == NULL)\</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="preprocessor">        (head)-&gt;stqh_last = &amp;STAILQ_NEXT((elm), field);     \</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="preprocessor">    STAILQ_NEXT((tqelm), field) = (elm);                \</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;</div><div class="line"><a name="l02522"></a><span class="lineno"><a class="line" href="mongoose_8h_aad3b1fb87b675bae75334acd958b57dc.html#aad3b1fb87b675bae75334acd958b57dc"> 2522</a></span>&#160;<span class="preprocessor">#define STAILQ_INSERT_HEAD(head, elm, field) do {           \</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;<span class="preprocessor">    if ((STAILQ_NEXT((elm), field) = STAILQ_FIRST((head))) == NULL) \</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="preprocessor">        (head)-&gt;stqh_last = &amp;STAILQ_NEXT((elm), field);     \</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="preprocessor">    STAILQ_FIRST((head)) = (elm);                   \</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div><div class="line"><a name="l02528"></a><span class="lineno"><a class="line" href="mongoose_8h_a7bc9a31418b55c5698be3e54e10bb484.html#a7bc9a31418b55c5698be3e54e10bb484"> 2528</a></span>&#160;<span class="preprocessor">#define STAILQ_INSERT_TAIL(head, elm, field) do {           \</span></div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;<span class="preprocessor">    STAILQ_NEXT((elm), field) = NULL;               \</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="preprocessor">    *(head)-&gt;stqh_last = (elm);                 \</span></div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="preprocessor">    (head)-&gt;stqh_last = &amp;STAILQ_NEXT((elm), field);         \</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"><a class="line" href="mongoose_8h_ae18d422917aa0b8efb0f58d92a19ae41.html#ae18d422917aa0b8efb0f58d92a19ae41"> 2534</a></span>&#160;<span class="preprocessor">#define STAILQ_LAST(head, type, field)              \</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="preprocessor">    (STAILQ_EMPTY((head)) ? NULL :              \</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="preprocessor">        __containerof((head)-&gt;stqh_last,            \</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="preprocessor">        QUEUE_TYPEOF(type), field.stqe_next))</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div><div class="line"><a name="l02539"></a><span class="lineno"><a class="line" href="mongoose_8h_ad89ac472696d006112dface9c2d75e47.html#ad89ac472696d006112dface9c2d75e47"> 2539</a></span>&#160;<span class="preprocessor">#define STAILQ_NEXT(elm, field) ((elm)-&gt;field.stqe_next)</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"><a class="line" href="mongoose_8h_a2a0d6665f277f80bf301a16e6ab2403c.html#a2a0d6665f277f80bf301a16e6ab2403c"> 2541</a></span>&#160;<span class="preprocessor">#define STAILQ_REMOVE(head, elm, type, field) do {          \</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="preprocessor">    QMD_SAVELINK(oldnext, (elm)-&gt;field.stqe_next);          \</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="preprocessor">    if (STAILQ_FIRST((head)) == (elm)) {                \</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="preprocessor">        STAILQ_REMOVE_HEAD((head), field);          \</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="preprocessor">    else {                              \</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="preprocessor">        QUEUE_TYPEOF(type) *curelm = STAILQ_FIRST(head);    \</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="preprocessor">        while (STAILQ_NEXT(curelm, field) != (elm))     \</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;<span class="preprocessor">            curelm = STAILQ_NEXT(curelm, field);        \</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;<span class="preprocessor">        STAILQ_REMOVE_AFTER(head, curelm, field);       \</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="preprocessor">    TRASHIT(*oldnext);                      \</span></div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;</div><div class="line"><a name="l02555"></a><span class="lineno"><a class="line" href="mongoose_8h_a657c50417f3caeab52e34fcd454cec71.html#a657c50417f3caeab52e34fcd454cec71"> 2555</a></span>&#160;<span class="preprocessor">#define STAILQ_REMOVE_AFTER(head, elm, field) do {          \</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="preprocessor">    if ((STAILQ_NEXT(elm, field) =                  \</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="preprocessor">         STAILQ_NEXT(STAILQ_NEXT(elm, field), field)) == NULL)  \</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="preprocessor">        (head)-&gt;stqh_last = &amp;STAILQ_NEXT((elm), field);     \</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div><div class="line"><a name="l02561"></a><span class="lineno"><a class="line" href="mongoose_8h_a24c16c7c5c9908022bad7a98ddac9740.html#a24c16c7c5c9908022bad7a98ddac9740"> 2561</a></span>&#160;<span class="preprocessor">#define STAILQ_REMOVE_HEAD(head, field) do {                \</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;<span class="preprocessor">    if ((STAILQ_FIRST((head)) =                 \</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;<span class="preprocessor">         STAILQ_NEXT(STAILQ_FIRST((head)), field)) == NULL)     \</span></div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;<span class="preprocessor">        (head)-&gt;stqh_last = &amp;STAILQ_FIRST((head));      \</span></div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div><div class="line"><a name="l02567"></a><span class="lineno"><a class="line" href="mongoose_8h_af30e7c9283aea226ad5a73575fc1601a.html#af30e7c9283aea226ad5a73575fc1601a"> 2567</a></span>&#160;<span class="preprocessor">#define STAILQ_SWAP(head1, head2, type) do {                \</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="preprocessor">    QUEUE_TYPEOF(type) *swap_first = STAILQ_FIRST(head1);       \</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="preprocessor">    QUEUE_TYPEOF(type) **swap_last = (head1)-&gt;stqh_last;        \</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="preprocessor">    STAILQ_FIRST(head1) = STAILQ_FIRST(head2);          \</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="preprocessor">    (head1)-&gt;stqh_last = (head2)-&gt;stqh_last;            \</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="preprocessor">    STAILQ_FIRST(head2) = swap_first;               \</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="preprocessor">    (head2)-&gt;stqh_last = swap_last;                 \</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="preprocessor">    if (STAILQ_EMPTY(head1))                    \</span></div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="preprocessor">        (head1)-&gt;stqh_last = &amp;STAILQ_FIRST(head1);      \</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="preprocessor">    if (STAILQ_EMPTY(head2))                    \</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="preprocessor">        (head2)-&gt;stqh_last = &amp;STAILQ_FIRST(head2);      \</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="comment"> * List declarations.</span></div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02584"></a><span class="lineno"><a class="line" href="mongoose_8h_ae72219f63b2fe9bce774a64e11404179.html#ae72219f63b2fe9bce774a64e11404179"> 2584</a></span>&#160;<span class="preprocessor">#define LIST_HEAD(name, type)                       \</span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="preprocessor">    struct type *lh_first;  </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div><div class="line"><a name="l02589"></a><span class="lineno"><a class="line" href="mongoose_8h_a6b134bbd708a547e1539db14ea4e4c9c.html#a6b134bbd708a547e1539db14ea4e4c9c"> 2589</a></span>&#160;<span class="preprocessor">#define LIST_CLASS_HEAD(name, type)                 \</span></div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="preprocessor">    class type *lh_first;   </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"><a class="line" href="mongoose_8h_a5d7b8e9f9968d3152a8519cd9a45312e.html#a5d7b8e9f9968d3152a8519cd9a45312e"> 2594</a></span>&#160;<span class="preprocessor">#define LIST_HEAD_INITIALIZER(head)                 \</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="preprocessor">    { NULL }</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"><a class="line" href="mongoose_8h_aec2ccd0e8c215504508af23f04480be6.html#aec2ccd0e8c215504508af23f04480be6"> 2597</a></span>&#160;<span class="preprocessor">#define LIST_ENTRY(type)                        \</span></div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="preprocessor">    struct type *le_next;   </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="preprocessor">    struct type **le_prev;  </span><span class="comment">/* address of previous next element */</span><span class="preprocessor">  \</span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div><div class="line"><a name="l02603"></a><span class="lineno"><a class="line" href="mongoose_8h_a329cf1e6182d97db4443f57b9ffad13f.html#a329cf1e6182d97db4443f57b9ffad13f"> 2603</a></span>&#160;<span class="preprocessor">#define LIST_CLASS_ENTRY(type)                      \</span></div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="preprocessor">    class type *le_next;    </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="preprocessor">    class type **le_prev;   </span><span class="comment">/* address of previous next element */</span><span class="preprocessor">  \</span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment"> * List functions.</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="preprocessor">#if (defined(_KERNEL) &amp;&amp; defined(INVARIANTS))</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="preprocessor">#define QMD_LIST_CHECK_HEAD(head, field) do {               \</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="preprocessor">    if (LIST_FIRST((head)) != NULL &amp;&amp;               \</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="preprocessor">        LIST_FIRST((head))-&gt;field.le_prev !=            \</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="preprocessor">         &amp;LIST_FIRST((head)))                   \</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="preprocessor">        panic(&quot;Bad list head %p first-&gt;prev != head&quot;, (head));  \</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="preprocessor">#define QMD_LIST_CHECK_NEXT(elm, field) do {                \</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="preprocessor">    if (LIST_NEXT((elm), field) != NULL &amp;&amp;              \</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="preprocessor">        LIST_NEXT((elm), field)-&gt;field.le_prev !=           \</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="preprocessor">         &amp;((elm)-&gt;field.le_next))                   \</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="preprocessor">            panic(&quot;Bad link elm %p next-&gt;prev != elm&quot;, (elm));  \</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="preprocessor">#define QMD_LIST_CHECK_PREV(elm, field) do {                \</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="preprocessor">    if (*(elm)-&gt;field.le_prev != (elm))             \</span></div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="preprocessor">        panic(&quot;Bad link elm %p prev-&gt;next != elm&quot;, (elm));  \</span></div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02633"></a><span class="lineno"><a class="line" href="mongoose_8h_a56b1069d0673242f84246986614b15cc.html#a56b1069d0673242f84246986614b15cc"> 2633</a></span>&#160;<span class="preprocessor">#define QMD_LIST_CHECK_HEAD(head, field)</span></div><div class="line"><a name="l02634"></a><span class="lineno"><a class="line" href="mongoose_8h_a98d7f73cec635caf9515945f0d5413f6.html#a98d7f73cec635caf9515945f0d5413f6"> 2634</a></span>&#160;<span class="preprocessor">#define QMD_LIST_CHECK_NEXT(elm, field)</span></div><div class="line"><a name="l02635"></a><span class="lineno"><a class="line" href="mongoose_8h_aa03b790c1e9ea4475fff822f2f924770.html#aa03b790c1e9ea4475fff822f2f924770"> 2635</a></span>&#160;<span class="preprocessor">#define QMD_LIST_CHECK_PREV(elm, field)</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* (_KERNEL &amp;&amp; INVARIANTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div><div class="line"><a name="l02638"></a><span class="lineno"><a class="line" href="mongoose_8h_af59ab30a8f9a88af86422600c38125cf.html#af59ab30a8f9a88af86422600c38125cf"> 2638</a></span>&#160;<span class="preprocessor">#define LIST_EMPTY(head)    ((head)-&gt;lh_first == NULL)</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;</div><div class="line"><a name="l02640"></a><span class="lineno"><a class="line" href="mongoose_8h_a8f223070a7fe7c5f24033e9d8fbeb610.html#a8f223070a7fe7c5f24033e9d8fbeb610"> 2640</a></span>&#160;<span class="preprocessor">#define LIST_FIRST(head)    ((head)-&gt;lh_first)</span></div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"><a class="line" href="mongoose_8h_ac1543beeb6d9224b60feb7a2703b2a87.html#ac1543beeb6d9224b60feb7a2703b2a87"> 2642</a></span>&#160;<span class="preprocessor">#define LIST_FOREACH(var, head, field)                  \</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;<span class="preprocessor">    for ((var) = LIST_FIRST((head));                \</span></div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="preprocessor">        (var) = LIST_NEXT((var), field))</span></div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"><a class="line" href="mongoose_8h_abb233e757b72211906fce14e8dbfcada.html#abb233e757b72211906fce14e8dbfcada"> 2647</a></span>&#160;<span class="preprocessor">#define LIST_FOREACH_FROM(var, head, field)             \</span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : LIST_FIRST((head)));      \</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="preprocessor">        (var) = LIST_NEXT((var), field))</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;</div><div class="line"><a name="l02652"></a><span class="lineno"><a class="line" href="mongoose_8h_a2dd4b5313ff322ed89827dede22589e8.html#a2dd4b5313ff322ed89827dede22589e8"> 2652</a></span>&#160;<span class="preprocessor">#define LIST_FOREACH_SAFE(var, head, field, tvar)           \</span></div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="preprocessor">    for ((var) = LIST_FIRST((head));                \</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = LIST_NEXT((var), field), 1);     \</span></div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;</div><div class="line"><a name="l02657"></a><span class="lineno"><a class="line" href="mongoose_8h_acc9a82d352391194a56688d2d0f992c0.html#acc9a82d352391194a56688d2d0f992c0"> 2657</a></span>&#160;<span class="preprocessor">#define LIST_FOREACH_FROM_SAFE(var, head, field, tvar)          \</span></div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : LIST_FIRST((head)));      \</span></div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = LIST_NEXT((var), field), 1);     \</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div><div class="line"><a name="l02662"></a><span class="lineno"><a class="line" href="mongoose_8h_a304b5b7f7bdcba2793eaba9c890991c3.html#a304b5b7f7bdcba2793eaba9c890991c3"> 2662</a></span>&#160;<span class="preprocessor">#define LIST_INIT(head) do {                        \</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="preprocessor">    LIST_FIRST((head)) = NULL;                  \</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div><div class="line"><a name="l02666"></a><span class="lineno"><a class="line" href="mongoose_8h_aab62f53d4c94ab67bf7c4dc5c7670f64.html#aab62f53d4c94ab67bf7c4dc5c7670f64"> 2666</a></span>&#160;<span class="preprocessor">#define LIST_INSERT_AFTER(listelm, elm, field) do {         \</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="preprocessor">    QMD_LIST_CHECK_NEXT(listelm, field);                \</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="preprocessor">    if ((LIST_NEXT((elm), field) = LIST_NEXT((listelm), field)) != NULL)\</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="preprocessor">        LIST_NEXT((listelm), field)-&gt;field.le_prev =        \</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="preprocessor">            &amp;LIST_NEXT((elm), field);               \</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="preprocessor">    LIST_NEXT((listelm), field) = (elm);                \</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="preprocessor">    (elm)-&gt;field.le_prev = &amp;LIST_NEXT((listelm), field);        \</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"><a class="line" href="mongoose_8h_a73d12127b84f84215eb03a4fb20feebb.html#a73d12127b84f84215eb03a4fb20feebb"> 2675</a></span>&#160;<span class="preprocessor">#define LIST_INSERT_BEFORE(listelm, elm, field) do {            \</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="preprocessor">    QMD_LIST_CHECK_PREV(listelm, field);                \</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="preprocessor">    (elm)-&gt;field.le_prev = (listelm)-&gt;field.le_prev;        \</span></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="preprocessor">    LIST_NEXT((elm), field) = (listelm);                \</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="preprocessor">    *(listelm)-&gt;field.le_prev = (elm);              \</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="preprocessor">    (listelm)-&gt;field.le_prev = &amp;LIST_NEXT((elm), field);        \</span></div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div><div class="line"><a name="l02683"></a><span class="lineno"><a class="line" href="mongoose_8h_ad80d8d658fdb46a9f7cc81cb2ae54885.html#ad80d8d658fdb46a9f7cc81cb2ae54885"> 2683</a></span>&#160;<span class="preprocessor">#define LIST_INSERT_HEAD(head, elm, field) do {             \</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="preprocessor">    QMD_LIST_CHECK_HEAD((head), field);             \</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="preprocessor">    if ((LIST_NEXT((elm), field) = LIST_FIRST((head))) != NULL) \</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="preprocessor">        LIST_FIRST((head))-&gt;field.le_prev = &amp;LIST_NEXT((elm), field);\</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="preprocessor">    LIST_FIRST((head)) = (elm);                 \</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="preprocessor">    (elm)-&gt;field.le_prev = &amp;LIST_FIRST((head));         \</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;</div><div class="line"><a name="l02691"></a><span class="lineno"><a class="line" href="mongoose_8h_ad150fcc4dc3e0a56600101f1f1065ed5.html#ad150fcc4dc3e0a56600101f1f1065ed5"> 2691</a></span>&#160;<span class="preprocessor">#define LIST_NEXT(elm, field)   ((elm)-&gt;field.le_next)</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;</div><div class="line"><a name="l02693"></a><span class="lineno"><a class="line" href="mongoose_8h_a7458f2852ae931b2ed5426311b53d029.html#a7458f2852ae931b2ed5426311b53d029"> 2693</a></span>&#160;<span class="preprocessor">#define LIST_PREV(elm, head, type, field)           \</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;<span class="preprocessor">    ((elm)-&gt;field.le_prev == &amp;LIST_FIRST((head)) ? NULL :   \</span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;<span class="preprocessor">        __containerof((elm)-&gt;field.le_prev,         \</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="preprocessor">        QUEUE_TYPEOF(type), field.le_next))</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div><div class="line"><a name="l02698"></a><span class="lineno"><a class="line" href="mongoose_8h_a4f60a3fedbebc5ef6edded99062dd98d.html#a4f60a3fedbebc5ef6edded99062dd98d"> 2698</a></span>&#160;<span class="preprocessor">#define LIST_REMOVE(elm, field) do {                    \</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;<span class="preprocessor">    QMD_SAVELINK(oldnext, (elm)-&gt;field.le_next);            \</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="preprocessor">    QMD_SAVELINK(oldprev, (elm)-&gt;field.le_prev);            \</span></div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;<span class="preprocessor">    QMD_LIST_CHECK_NEXT(elm, field);                \</span></div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="preprocessor">    QMD_LIST_CHECK_PREV(elm, field);                \</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="preprocessor">    if (LIST_NEXT((elm), field) != NULL)                \</span></div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="preprocessor">        LIST_NEXT((elm), field)-&gt;field.le_prev =        \</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="preprocessor">            (elm)-&gt;field.le_prev;               \</span></div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="preprocessor">    *(elm)-&gt;field.le_prev = LIST_NEXT((elm), field);        \</span></div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="preprocessor">    TRASHIT(*oldnext);                      \</span></div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="preprocessor">    TRASHIT(*oldprev);                      \</span></div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"><a class="line" href="mongoose_8h_a71800bd6ea3903a1068f87e4f07cc851.html#a71800bd6ea3903a1068f87e4f07cc851"> 2711</a></span>&#160;<span class="preprocessor">#define LIST_SWAP(head1, head2, type, field) do {           \</span></div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="preprocessor">    QUEUE_TYPEOF(type) *swap_tmp = LIST_FIRST(head1);       \</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;<span class="preprocessor">    LIST_FIRST((head1)) = LIST_FIRST((head2));          \</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="preprocessor">    LIST_FIRST((head2)) = swap_tmp;                 \</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="preprocessor">    if ((swap_tmp = LIST_FIRST((head1))) != NULL)           \</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;<span class="preprocessor">        swap_tmp-&gt;field.le_prev = &amp;LIST_FIRST((head1));     \</span></div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="preprocessor">    if ((swap_tmp = LIST_FIRST((head2))) != NULL)           \</span></div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="preprocessor">        swap_tmp-&gt;field.le_prev = &amp;LIST_FIRST((head2));     \</span></div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="comment"> * Tail queue declarations.</span></div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02724"></a><span class="lineno"><a class="line" href="mongoose_8h_a4abce769a262e090c1f601605b9d6c76.html#a4abce769a262e090c1f601605b9d6c76"> 2724</a></span>&#160;<span class="preprocessor">#define TAILQ_HEAD(name, type)                      \</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="preprocessor">    struct type *tqh_first; </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;<span class="preprocessor">    struct type **tqh_last; </span><span class="comment">/* addr of last next element */</span><span class="preprocessor">     \</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="preprocessor">    TRACEBUF                            \</span></div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div><div class="line"><a name="l02731"></a><span class="lineno"><a class="line" href="mongoose_8h_a612a17e93b64f98290e4e7ea56a9a519.html#a612a17e93b64f98290e4e7ea56a9a519"> 2731</a></span>&#160;<span class="preprocessor">#define TAILQ_CLASS_HEAD(name, type)                    \</span></div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="preprocessor">struct name {                               \</span></div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="preprocessor">    class type *tqh_first;  </span><span class="comment">/* first element */</span><span class="preprocessor">         \</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="preprocessor">    class type **tqh_last;  </span><span class="comment">/* addr of last next element */</span><span class="preprocessor">     \</span></div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="preprocessor">    TRACEBUF                            \</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="mongoose_8h_ac269df7d4126ed9885156cbad2cbf8af.html#ac269df7d4126ed9885156cbad2cbf8af"> 2738</a></span>&#160;<span class="preprocessor">#define TAILQ_HEAD_INITIALIZER(head)                    \</span></div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="preprocessor">    { NULL, &amp;(head).tqh_first, TRACEBUF_INITIALIZER }</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"><a class="line" href="mongoose_8h_af71bfd90dc9d00fb03545fe66c67d673.html#af71bfd90dc9d00fb03545fe66c67d673"> 2741</a></span>&#160;<span class="preprocessor">#define TAILQ_ENTRY(type)                       \</span></div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="preprocessor">    struct type *tqe_next;  </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="preprocessor">    struct type **tqe_prev; </span><span class="comment">/* address of previous next element */</span><span class="preprocessor">  \</span></div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="preprocessor">    TRACEBUF                            \</span></div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;</div><div class="line"><a name="l02748"></a><span class="lineno"><a class="line" href="mongoose_8h_a9cde1a83b5fce8c3c583d19446b6710a.html#a9cde1a83b5fce8c3c583d19446b6710a"> 2748</a></span>&#160;<span class="preprocessor">#define TAILQ_CLASS_ENTRY(type)                     \</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="preprocessor">struct {                                \</span></div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="preprocessor">    class type *tqe_next;   </span><span class="comment">/* next element */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="preprocessor">    class type **tqe_prev;  </span><span class="comment">/* address of previous next element */</span><span class="preprocessor">  \</span></div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="preprocessor">    TRACEBUF                            \</span></div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment"> * Tail queue functions.</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="preprocessor">#if (defined(_KERNEL) &amp;&amp; defined(INVARIANTS))</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_HEAD(head, field) do {              \</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="preprocessor">    if (!TAILQ_EMPTY(head) &amp;&amp;                   \</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="preprocessor">        TAILQ_FIRST((head))-&gt;field.tqe_prev !=          \</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="preprocessor">         &amp;TAILQ_FIRST((head)))                  \</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="preprocessor">        panic(&quot;Bad tailq head %p first-&gt;prev != head&quot;, (head)); \</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_TAIL(head, field) do {              \</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="preprocessor">    if (*(head)-&gt;tqh_last != NULL)                  \</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="preprocessor">            panic(&quot;Bad tailq NEXT(%p-&gt;tqh_last) != NULL&quot;, (head));  \</span></div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_NEXT(elm, field) do {               \</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="preprocessor">    if (TAILQ_NEXT((elm), field) != NULL &amp;&amp;             \</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="preprocessor">        TAILQ_NEXT((elm), field)-&gt;field.tqe_prev !=         \</span></div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="preprocessor">         &amp;((elm)-&gt;field.tqe_next))                  \</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="preprocessor">        panic(&quot;Bad link elm %p next-&gt;prev != elm&quot;, (elm));  \</span></div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_PREV(elm, field) do {               \</span></div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="preprocessor">    if (*(elm)-&gt;field.tqe_prev != (elm))                \</span></div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="preprocessor">        panic(&quot;Bad link elm %p prev-&gt;next != elm&quot;, (elm));  \</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02783"></a><span class="lineno"><a class="line" href="mongoose_8h_a2fadd77a30e452cb44e961a3349e965c.html#a2fadd77a30e452cb44e961a3349e965c"> 2783</a></span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_HEAD(head, field)</span></div><div class="line"><a name="l02784"></a><span class="lineno"><a class="line" href="mongoose_8h_a388344b503d238583a1e7d710aa403ef.html#a388344b503d238583a1e7d710aa403ef"> 2784</a></span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_TAIL(head, headname)</span></div><div class="line"><a name="l02785"></a><span class="lineno"><a class="line" href="mongoose_8h_ac8ae401a8fb8a0c6259003d81717c137.html#ac8ae401a8fb8a0c6259003d81717c137"> 2785</a></span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_NEXT(elm, field)</span></div><div class="line"><a name="l02786"></a><span class="lineno"><a class="line" href="mongoose_8h_a00699c4f3c7eb447c5ea7efc17999d09.html#a00699c4f3c7eb447c5ea7efc17999d09"> 2786</a></span>&#160;<span class="preprocessor">#define QMD_TAILQ_CHECK_PREV(elm, field)</span></div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* (_KERNEL &amp;&amp; INVARIANTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div><div class="line"><a name="l02789"></a><span class="lineno"><a class="line" href="mongoose_8h_afe4852d23c85543fafc53ad409461750.html#afe4852d23c85543fafc53ad409461750"> 2789</a></span>&#160;<span class="preprocessor">#define TAILQ_CONCAT(head1, head2, field) do {              \</span></div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="preprocessor">    if (!TAILQ_EMPTY(head2)) {                  \</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="preprocessor">        *(head1)-&gt;tqh_last = (head2)-&gt;tqh_first;        \</span></div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="preprocessor">        (head2)-&gt;tqh_first-&gt;field.tqe_prev = (head1)-&gt;tqh_last; \</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="preprocessor">        (head1)-&gt;tqh_last = (head2)-&gt;tqh_last;          \</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="preprocessor">        TAILQ_INIT((head2));                    \</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="preprocessor">        QMD_TRACE_HEAD(head1);                  \</span></div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="preprocessor">        QMD_TRACE_HEAD(head2);                  \</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="mongoose_8h_ac3c9da7ac712eacbbad5cc54d7a3477e.html#ac3c9da7ac712eacbbad5cc54d7a3477e"> 2800</a></span>&#160;<span class="preprocessor">#define TAILQ_EMPTY(head)   ((head)-&gt;tqh_first == NULL)</span></div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;</div><div class="line"><a name="l02802"></a><span class="lineno"><a class="line" href="mongoose_8h_a7d6894360bd1c41e0e6f6d84998c1362.html#a7d6894360bd1c41e0e6f6d84998c1362"> 2802</a></span>&#160;<span class="preprocessor">#define TAILQ_FIRST(head)   ((head)-&gt;tqh_first)</span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;</div><div class="line"><a name="l02804"></a><span class="lineno"><a class="line" href="mongoose_8h_a16e5fc168e7f3494d4b1df54447d871e.html#a16e5fc168e7f3494d4b1df54447d871e"> 2804</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH(var, head, field)                 \</span></div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="preprocessor">    for ((var) = TAILQ_FIRST((head));               \</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="preprocessor">        (var) = TAILQ_NEXT((var), field))</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div><div class="line"><a name="l02809"></a><span class="lineno"><a class="line" href="mongoose_8h_a749ad60232f2de8931c9c0871987f84f.html#a749ad60232f2de8931c9c0871987f84f"> 2809</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_FROM(var, head, field)                \</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : TAILQ_FIRST((head)));     \</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="preprocessor">        (var) = TAILQ_NEXT((var), field))</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"><a class="line" href="mongoose_8h_a2a85f19896399eecd0ebf91cb8176166.html#a2a85f19896399eecd0ebf91cb8176166"> 2814</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_SAFE(var, head, field, tvar)          \</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="preprocessor">    for ((var) = TAILQ_FIRST((head));               \</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = TAILQ_NEXT((var), field), 1);        \</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div><div class="line"><a name="l02819"></a><span class="lineno"><a class="line" href="mongoose_8h_aa9cc420c740f2f56c6efdacea6cc4d94.html#aa9cc420c740f2f56c6efdacea6cc4d94"> 2819</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_FROM_SAFE(var, head, field, tvar)         \</span></div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : TAILQ_FIRST((head)));     \</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = TAILQ_NEXT((var), field), 1);        \</span></div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div><div class="line"><a name="l02824"></a><span class="lineno"><a class="line" href="mongoose_8h_aa7f65c910cd4616fcfa9723c5763b1a5.html#aa7f65c910cd4616fcfa9723c5763b1a5"> 2824</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_REVERSE(var, head, headname, field)       \</span></div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;<span class="preprocessor">    for ((var) = TAILQ_LAST((head), headname);          \</span></div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;<span class="preprocessor">        (var) = TAILQ_PREV((var), headname, field))</span></div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div><div class="line"><a name="l02829"></a><span class="lineno"><a class="line" href="mongoose_8h_a6cb12f27e7182bcb25c7dfdc9a8e83bf.html#a6cb12f27e7182bcb25c7dfdc9a8e83bf"> 2829</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_REVERSE_FROM(var, head, headname, field)      \</span></div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : TAILQ_LAST((head), headname));    \</span></div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="preprocessor">        (var);                          \</span></div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="preprocessor">        (var) = TAILQ_PREV((var), headname, field))</span></div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"><a class="line" href="mongoose_8h_aa7841e4f848e470b9f2bc676473d7a5b.html#aa7841e4f848e470b9f2bc676473d7a5b"> 2834</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_REVERSE_SAFE(var, head, headname, field, tvar)    \</span></div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="preprocessor">    for ((var) = TAILQ_LAST((head), headname);          \</span></div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = TAILQ_PREV((var), headname, field), 1);  \</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;</div><div class="line"><a name="l02839"></a><span class="lineno"><a class="line" href="mongoose_8h_a5a73496c2e5232e55ad90245bf301de8.html#a5a73496c2e5232e55ad90245bf301de8"> 2839</a></span>&#160;<span class="preprocessor">#define TAILQ_FOREACH_REVERSE_FROM_SAFE(var, head, headname, field, tvar) \</span></div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;<span class="preprocessor">    for ((var) = ((var) ? (var) : TAILQ_LAST((head), headname));    \</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="preprocessor">        (var) &amp;&amp; ((tvar) = TAILQ_PREV((var), headname, field), 1);  \</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="preprocessor">        (var) = (tvar))</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"><a class="line" href="mongoose_8h_a449d224023780e46253b83b61e0a50a9.html#a449d224023780e46253b83b61e0a50a9"> 2844</a></span>&#160;<span class="preprocessor">#define TAILQ_INIT(head) do {                       \</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="preprocessor">    TAILQ_FIRST((head)) = NULL;                 \</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;<span class="preprocessor">    (head)-&gt;tqh_last = &amp;TAILQ_FIRST((head));            \</span></div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;<span class="preprocessor">    QMD_TRACE_HEAD(head);                       \</span></div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;</div><div class="line"><a name="l02850"></a><span class="lineno"><a class="line" href="mongoose_8h_af972e33f5eacef659ee0bf0a13ca518c.html#af972e33f5eacef659ee0bf0a13ca518c"> 2850</a></span>&#160;<span class="preprocessor">#define TAILQ_INSERT_AFTER(head, listelm, elm, field) do {      \</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="preprocessor">    QMD_TAILQ_CHECK_NEXT(listelm, field);               \</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="preprocessor">    if ((TAILQ_NEXT((elm), field) = TAILQ_NEXT((listelm), field)) != NULL)\</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="preprocessor">        TAILQ_NEXT((elm), field)-&gt;field.tqe_prev =      \</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="preprocessor">            &amp;TAILQ_NEXT((elm), field);              \</span></div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;<span class="preprocessor">    else {                              \</span></div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="preprocessor">        (head)-&gt;tqh_last = &amp;TAILQ_NEXT((elm), field);       \</span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="preprocessor">        QMD_TRACE_HEAD(head);                   \</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="preprocessor">    TAILQ_NEXT((listelm), field) = (elm);               \</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="preprocessor">    (elm)-&gt;field.tqe_prev = &amp;TAILQ_NEXT((listelm), field);      \</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(elm)-&gt;field);                  \</span></div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(listelm)-&gt;field);              \</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;</div><div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="mongoose_8h_ac6a41e17dbc7d8df1f8b353a036754ff.html#ac6a41e17dbc7d8df1f8b353a036754ff"> 2865</a></span>&#160;<span class="preprocessor">#define TAILQ_INSERT_BEFORE(listelm, elm, field) do {           \</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="preprocessor">    QMD_TAILQ_CHECK_PREV(listelm, field);               \</span></div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="preprocessor">    (elm)-&gt;field.tqe_prev = (listelm)-&gt;field.tqe_prev;      \</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="preprocessor">    TAILQ_NEXT((elm), field) = (listelm);               \</span></div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="preprocessor">    *(listelm)-&gt;field.tqe_prev = (elm);             \</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;<span class="preprocessor">    (listelm)-&gt;field.tqe_prev = &amp;TAILQ_NEXT((elm), field);      \</span></div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(elm)-&gt;field);                  \</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(listelm)-&gt;field);              \</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div><div class="line"><a name="l02875"></a><span class="lineno"><a class="line" href="mongoose_8h_af0f99e8f322ea4eef2d9deaa505239a6.html#af0f99e8f322ea4eef2d9deaa505239a6"> 2875</a></span>&#160;<span class="preprocessor">#define TAILQ_INSERT_HEAD(head, elm, field) do {            \</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;<span class="preprocessor">    QMD_TAILQ_CHECK_HEAD(head, field);              \</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="preprocessor">    if ((TAILQ_NEXT((elm), field) = TAILQ_FIRST((head))) != NULL)   \</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;<span class="preprocessor">        TAILQ_FIRST((head))-&gt;field.tqe_prev =           \</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="preprocessor">            &amp;TAILQ_NEXT((elm), field);              \</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="preprocessor">    else                                \</span></div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="preprocessor">        (head)-&gt;tqh_last = &amp;TAILQ_NEXT((elm), field);       \</span></div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="preprocessor">    TAILQ_FIRST((head)) = (elm);                    \</span></div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="preprocessor">    (elm)-&gt;field.tqe_prev = &amp;TAILQ_FIRST((head));           \</span></div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="preprocessor">    QMD_TRACE_HEAD(head);                       \</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(elm)-&gt;field);                  \</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;</div><div class="line"><a name="l02888"></a><span class="lineno"><a class="line" href="mongoose_8h_a512bee16b46f601078c96c776d2648c3.html#a512bee16b46f601078c96c776d2648c3"> 2888</a></span>&#160;<span class="preprocessor">#define TAILQ_INSERT_TAIL(head, elm, field) do {            \</span></div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;<span class="preprocessor">    QMD_TAILQ_CHECK_TAIL(head, field);              \</span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="preprocessor">    TAILQ_NEXT((elm), field) = NULL;                \</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="preprocessor">    (elm)-&gt;field.tqe_prev = (head)-&gt;tqh_last;           \</span></div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="preprocessor">    *(head)-&gt;tqh_last = (elm);                  \</span></div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="preprocessor">    (head)-&gt;tqh_last = &amp;TAILQ_NEXT((elm), field);           \</span></div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="preprocessor">    QMD_TRACE_HEAD(head);                       \</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(elm)-&gt;field);                  \</span></div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;</div><div class="line"><a name="l02898"></a><span class="lineno"><a class="line" href="mongoose_8h_ac9154a9aebb3c15a3f2356349a1cc14f.html#ac9154a9aebb3c15a3f2356349a1cc14f"> 2898</a></span>&#160;<span class="preprocessor">#define TAILQ_LAST(head, headname)                  \</span></div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="preprocessor">    (*(((struct headname *)((head)-&gt;tqh_last))-&gt;tqh_last))</span></div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;</div><div class="line"><a name="l02901"></a><span class="lineno"><a class="line" href="mongoose_8h_abd57fe9bdea6007a602f8c7d61bd5265.html#abd57fe9bdea6007a602f8c7d61bd5265"> 2901</a></span>&#160;<span class="preprocessor">#define TAILQ_NEXT(elm, field) ((elm)-&gt;field.tqe_next)</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"><a class="line" href="mongoose_8h_a524f93a0c21c390683fab4c27e840a10.html#a524f93a0c21c390683fab4c27e840a10"> 2903</a></span>&#160;<span class="preprocessor">#define TAILQ_PREV(elm, headname, field)                \</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="preprocessor">    (*(((struct headname *)((elm)-&gt;field.tqe_prev))-&gt;tqh_last))</span></div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;</div><div class="line"><a name="l02906"></a><span class="lineno"><a class="line" href="mongoose_8h_aaae87ca18c28066e1a96221e762d1209.html#aaae87ca18c28066e1a96221e762d1209"> 2906</a></span>&#160;<span class="preprocessor">#define TAILQ_REMOVE(head, elm, field) do {             \</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="preprocessor">    QMD_SAVELINK(oldnext, (elm)-&gt;field.tqe_next);           \</span></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="preprocessor">    QMD_SAVELINK(oldprev, (elm)-&gt;field.tqe_prev);           \</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="preprocessor">    QMD_TAILQ_CHECK_NEXT(elm, field);               \</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="preprocessor">    QMD_TAILQ_CHECK_PREV(elm, field);               \</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="preprocessor">    if ((TAILQ_NEXT((elm), field)) != NULL)             \</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;<span class="preprocessor">        TAILQ_NEXT((elm), field)-&gt;field.tqe_prev =      \</span></div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="preprocessor">            (elm)-&gt;field.tqe_prev;              \</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="preprocessor">    else {                              \</span></div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="preprocessor">        (head)-&gt;tqh_last = (elm)-&gt;field.tqe_prev;       \</span></div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="preprocessor">        QMD_TRACE_HEAD(head);                   \</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;<span class="preprocessor">    }                               \</span></div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;<span class="preprocessor">    *(elm)-&gt;field.tqe_prev = TAILQ_NEXT((elm), field);      \</span></div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;<span class="preprocessor">    TRASHIT(*oldnext);                      \</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="preprocessor">    TRASHIT(*oldprev);                      \</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="preprocessor">    QMD_TRACE_ELEM(&amp;(elm)-&gt;field);                  \</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;</div><div class="line"><a name="l02924"></a><span class="lineno"><a class="line" href="mongoose_8h_aa4cf483c7dcddd1d89a00886b5466bac.html#aa4cf483c7dcddd1d89a00886b5466bac"> 2924</a></span>&#160;<span class="preprocessor">#define TAILQ_SWAP(head1, head2, type, field) do {          \</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="preprocessor">    QUEUE_TYPEOF(type) *swap_first = (head1)-&gt;tqh_first;        \</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;<span class="preprocessor">    QUEUE_TYPEOF(type) **swap_last = (head1)-&gt;tqh_last;     \</span></div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="preprocessor">    (head1)-&gt;tqh_first = (head2)-&gt;tqh_first;            \</span></div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;<span class="preprocessor">    (head1)-&gt;tqh_last = (head2)-&gt;tqh_last;              \</span></div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;<span class="preprocessor">    (head2)-&gt;tqh_first = swap_first;                \</span></div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;<span class="preprocessor">    (head2)-&gt;tqh_last = swap_last;                  \</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;<span class="preprocessor">    if ((swap_first = (head1)-&gt;tqh_first) != NULL)          \</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;<span class="preprocessor">        swap_first-&gt;field.tqe_prev = &amp;(head1)-&gt;tqh_first;   \</span></div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;<span class="preprocessor">    else                                \</span></div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;<span class="preprocessor">        (head1)-&gt;tqh_last = &amp;(head1)-&gt;tqh_first;        \</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;<span class="preprocessor">    if ((swap_first = (head2)-&gt;tqh_first) != NULL)          \</span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;<span class="preprocessor">        swap_first-&gt;field.tqe_prev = &amp;(head2)-&gt;tqh_first;   \</span></div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;<span class="preprocessor">    else                                \</span></div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;<span class="preprocessor">        (head2)-&gt;tqh_last = &amp;(head2)-&gt;tqh_first;        \</span></div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !_SYS_QUEUE_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/features.h&quot;</span></div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_FEATURES_H_</span></div><div class="line"><a name="l02951"></a><span class="lineno"><a class="line" href="mongoose_8h_aed35413da62beb37abdb11c306277539.html#aed35413da62beb37abdb11c306277539"> 2951</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_FEATURES_H_</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="preprocessor">#ifndef MG_DISABLE_HTTP_DIGEST_AUTH</span></div><div class="line"><a name="l02954"></a><span class="lineno"><a class="line" href="mongoose_8h_a9859ad49bb6d66afc5d06fdfd9d83604.html#a9859ad49bb6d66afc5d06fdfd9d83604"> 2954</a></span>&#160;<span class="preprocessor">#define MG_DISABLE_HTTP_DIGEST_AUTH 0</span></div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="preprocessor">#ifndef MG_DISABLE_HTTP_KEEP_ALIVE</span></div><div class="line"><a name="l02958"></a><span class="lineno"><a class="line" href="mongoose_8h_a71c5bdfc31eec97791d8fe752635ecec.html#a71c5bdfc31eec97791d8fe752635ecec"> 2958</a></span>&#160;<span class="preprocessor">#define MG_DISABLE_HTTP_KEEP_ALIVE 0</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="preprocessor">#ifndef MG_DISABLE_PFS</span></div><div class="line"><a name="l02962"></a><span class="lineno"><a class="line" href="mongoose_8h_a32df395eadb6f432cb02f1956bdfd832.html#a32df395eadb6f432cb02f1956bdfd832"> 2962</a></span>&#160;<span class="preprocessor">#define MG_DISABLE_PFS 0</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;<span class="preprocessor">#ifndef MG_DISABLE_WS_RANDOM_MASK</span></div><div class="line"><a name="l02966"></a><span class="lineno"><a class="line" href="mongoose_8h_ac4a56664748733df0bde953fe02f9e7c.html#ac4a56664748733df0bde953fe02f9e7c"> 2966</a></span>&#160;<span class="preprocessor">#define MG_DISABLE_WS_RANDOM_MASK 0</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_ASYNC_RESOLVER</span></div><div class="line"><a name="l02970"></a><span class="lineno"><a class="line" href="mongoose_8h_aad41f4e4f5717ac5f3ff12de5b93b794.html#aad41f4e4f5717ac5f3ff12de5b93b794"> 2970</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_ASYNC_RESOLVER 1</span></div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_BROADCAST</span></div><div class="line"><a name="l02974"></a><span class="lineno"><a class="line" href="mongoose_8h_a39baa791538d0683369b4e98edb603d1.html#a39baa791538d0683369b4e98edb603d1"> 2974</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_BROADCAST 0</span></div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_COAP</span></div><div class="line"><a name="l02978"></a><span class="lineno"><a class="line" href="mongoose_8h_a91429f486e861eb3899e17766489c775.html#a91429f486e861eb3899e17766489c775"> 2978</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_COAP 0</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_DEBUG</span></div><div class="line"><a name="l02982"></a><span class="lineno"><a class="line" href="mongoose_8h_a320ef71a704613c32b26aa97cd80f938.html#a320ef71a704613c32b26aa97cd80f938"> 2982</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_DEBUG 0</span></div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_DIRECTORY_LISTING</span></div><div class="line"><a name="l02986"></a><span class="lineno"><a class="line" href="mongoose_8h_add236f30e11e350d5edd122665eef5a4.html#add236f30e11e350d5edd122665eef5a4"> 2986</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_DIRECTORY_LISTING 0</span></div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_DNS</span></div><div class="line"><a name="l02990"></a><span class="lineno"><a class="line" href="mongoose_8h_a05ab0037b34004fe632dc50fc20c6076.html#a05ab0037b34004fe632dc50fc20c6076"> 2990</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_DNS 1</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_DNS_SERVER</span></div><div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="mongoose_8h_ab73e9aa44ae3197f3f5da0b784292757.html#ab73e9aa44ae3197f3f5da0b784292757"> 2994</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_DNS_SERVER 0</span></div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_FAKE_DAVLOCK</span></div><div class="line"><a name="l02998"></a><span class="lineno"><a class="line" href="mongoose_8h_a8fe764570f2064f551b881c37c70d4d2.html#a8fe764570f2064f551b881c37c70d4d2"> 2998</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_FAKE_DAVLOCK 0</span></div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l03002"></a><span class="lineno"><a class="line" href="mongoose_8h_ac27248a9d8ba6188223ef17c38eac971.html#ac27248a9d8ba6188223ef17c38eac971"> 3002</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_FILESYSTEM 0</span></div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_GETADDRINFO</span></div><div class="line"><a name="l03006"></a><span class="lineno"><a class="line" href="mongoose_8h_aafdbcb2e34b628889c59ebd28290e809.html#aafdbcb2e34b628889c59ebd28290e809"> 3006</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_GETADDRINFO 0</span></div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HEXDUMP</span></div><div class="line"><a name="l03010"></a><span class="lineno"><a class="line" href="mongoose_8h_a834cd0a24a67504c8ca646e8fdc7e99e.html#a834cd0a24a67504c8ca646e8fdc7e99e"> 3010</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HEXDUMP CS_ENABLE_STDIO</span></div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP</span></div><div class="line"><a name="l03014"></a><span class="lineno"><a class="line" href="mongoose_8h_acca89ff577ff6fbd3c40518af61f9ee4.html#acca89ff577ff6fbd3c40518af61f9ee4"> 3014</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP 1</span></div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_CGI</span></div><div class="line"><a name="l03018"></a><span class="lineno"><a class="line" href="mongoose_8h_a73eb4ff448b0461fc6a3d27f4848a727.html#a73eb4ff448b0461fc6a3d27f4848a727"> 3018</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_CGI 0</span></div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_SSI</span></div><div class="line"><a name="l03022"></a><span class="lineno"><a class="line" href="mongoose_8h_ab44124b98732eca9dc048b0583b446bf.html#ab44124b98732eca9dc048b0583b446bf"> 3022</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_SSI MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_SSI_EXEC</span></div><div class="line"><a name="l03026"></a><span class="lineno"><a class="line" href="mongoose_8h_ab77c0031177cdf4af10a81725a6d6110.html#ab77c0031177cdf4af10a81725a6d6110"> 3026</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_SSI_EXEC 0</span></div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_STREAMING_MULTIPART</span></div><div class="line"><a name="l03030"></a><span class="lineno"><a class="line" href="mongoose_8h_acd863a0f608d4303699e0c7a744c2f9d.html#acd863a0f608d4303699e0c7a744c2f9d"> 3030</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_STREAMING_MULTIPART 0</span></div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_WEBDAV</span></div><div class="line"><a name="l03034"></a><span class="lineno"><a class="line" href="mongoose_8h_a4865b834736d4c5e10b22921fefc2a2e.html#a4865b834736d4c5e10b22921fefc2a2e"> 3034</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_WEBDAV 0</span></div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_WEBSOCKET</span></div><div class="line"><a name="l03038"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c74d15cce1e2a956428fa55d9faa1d5.html#a4c74d15cce1e2a956428fa55d9faa1d5"> 3038</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_WEBSOCKET MG_ENABLE_HTTP</span></div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_IPV6</span></div><div class="line"><a name="l03042"></a><span class="lineno"><a class="line" href="mongoose_8h_a987c287250f12550e24615e8831e7a66.html#a987c287250f12550e24615e8831e7a66"> 3042</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_IPV6 0</span></div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_MQTT</span></div><div class="line"><a name="l03046"></a><span class="lineno"><a class="line" href="mongoose_8h_ac23fbea2f4c102ac205f08a51fd32e71.html#ac23fbea2f4c102ac205f08a51fd32e71"> 3046</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_MQTT 1</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_SOCKS</span></div><div class="line"><a name="l03050"></a><span class="lineno"><a class="line" href="mongoose_8h_a51382174ccecb6083ef74c94d7ef9002.html#a51382174ccecb6083ef74c94d7ef9002"> 3050</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_SOCKS 0</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_MQTT_BROKER</span></div><div class="line"><a name="l03054"></a><span class="lineno"><a class="line" href="mongoose_8h_a6ae37b10e518c4f82e718b538407d986.html#a6ae37b10e518c4f82e718b538407d986"> 3054</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_MQTT_BROKER 0</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_SSL</span></div><div class="line"><a name="l03058"></a><span class="lineno"><a class="line" href="mongoose_8h_acac5281a869039944d89a045f02e0b8d.html#acac5281a869039944d89a045f02e0b8d"> 3058</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_SSL 0</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_SYNC_RESOLVER</span></div><div class="line"><a name="l03062"></a><span class="lineno"><a class="line" href="mongoose_8h_a1b2cff14f41c76e5c6c1cdb15333e012.html#a1b2cff14f41c76e5c6c1cdb15333e012"> 3062</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_SYNC_RESOLVER 0</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_STDIO</span></div><div class="line"><a name="l03066"></a><span class="lineno"><a class="line" href="mongoose_8h_aff5d0fd86c03e2cd4e82f89a229843df.html#aff5d0fd86c03e2cd4e82f89a229843df"> 3066</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_STDIO CS_ENABLE_STDIO</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="preprocessor">#ifndef MG_NET_IF</span></div><div class="line"><a name="l03070"></a><span class="lineno"><a class="line" href="mongoose_8h_a9a1e15828367977c35b98ab9c63e50b3.html#a9a1e15828367977c35b98ab9c63e50b3"> 3070</a></span>&#160;<span class="preprocessor">#define MG_NET_IF MG_NET_IF_SOCKET</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="preprocessor">#ifndef MG_SSL_IF</span></div><div class="line"><a name="l03074"></a><span class="lineno"><a class="line" href="mongoose_8h_a1782e0a9e068a3a137941dd2acd0ed14.html#a1782e0a9e068a3a137941dd2acd0ed14"> 3074</a></span>&#160;<span class="preprocessor">#define MG_SSL_IF MG_SSL_IF_OPENSSL</span></div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_THREADS </span><span class="comment">/* ifdef-ok */</span><span class="preprocessor"></span></div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;<span class="preprocessor">#define MG_ENABLE_THREADS 1</span></div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03081"></a><span class="lineno"><a class="line" href="mongoose_8h_a47cf101255ff9b7c3e18a22b20bb4f7c.html#a47cf101255ff9b7c3e18a22b20bb4f7c"> 3081</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_THREADS 0</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;<span class="preprocessor">#if MG_ENABLE_DEBUG &amp;&amp; !defined(CS_ENABLE_DEBUG)</span></div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;<span class="preprocessor">#define CS_ENABLE_DEBUG 1</span></div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="comment">/* MQTT broker requires MQTT */</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="preprocessor">#if MG_ENABLE_MQTT_BROKER &amp;&amp; !MG_ENABLE_MQTT</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="preprocessor">#undef MG_ENABLE_MQTT</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;<span class="preprocessor">#define MG_ENABLE_MQTT 1</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_HTTP_URL_REWRITES</span></div><div class="line"><a name="l03096"></a><span class="lineno"><a class="line" href="mongoose_8h_a8ace60c0417fc7ae6320f6916bc6ba45.html#a8ace60c0417fc7ae6320f6916bc6ba45"> 3096</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_HTTP_URL_REWRITES \</span></div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="preprocessor">  (CS_PLATFORM == CS_P_WINDOWS || CS_PLATFORM == CS_P_UNIX)</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_TUN</span></div><div class="line"><a name="l03101"></a><span class="lineno"><a class="line" href="mongoose_8h_a2062a195ec1d9f7bc75bcee797b9dfce.html#a2062a195ec1d9f7bc75bcee797b9dfce"> 3101</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_TUN MG_ENABLE_HTTP_WEBSOCKET</span></div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_SNTP</span></div><div class="line"><a name="l03105"></a><span class="lineno"><a class="line" href="mongoose_8h_a65b904b7dafcbd5af0b273cb22d696b4.html#a65b904b7dafcbd5af0b273cb22d696b4"> 3105</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_SNTP 0</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_EXTRA_ERRORS_DESC</span></div><div class="line"><a name="l03109"></a><span class="lineno"><a class="line" href="mongoose_8h_a8a0ec3aae22dd1fc28f13f6fba14b1a3.html#a8a0ec3aae22dd1fc28f13f6fba14b1a3"> 3109</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_EXTRA_ERRORS_DESC 0</span></div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="preprocessor">#ifndef MG_ENABLE_CALLBACK_USERDATA</span></div><div class="line"><a name="l03113"></a><span class="lineno"><a class="line" href="mongoose_8h_a8ce996682ce622fef56bc9e23b06eb06.html#a8ce996682ce622fef56bc9e23b06eb06"> 3113</a></span>&#160;<span class="preprocessor">#define MG_ENABLE_CALLBACK_USERDATA 0</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="preprocessor">#if MG_ENABLE_CALLBACK_USERDATA</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;<span class="preprocessor">#define MG_UD_ARG(ud) , ud</span></div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="preprocessor">#define MG_CB(cb, ud) cb, ud</span></div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03120"></a><span class="lineno"><a class="line" href="mongoose_8h_a38d833c3c352508abac7aa3ae0def23f.html#a38d833c3c352508abac7aa3ae0def23f"> 3120</a></span>&#160;<span class="preprocessor">#define MG_UD_ARG(ud)</span></div><div class="line"><a name="l03121"></a><span class="lineno"><a class="line" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09"> 3121</a></span>&#160;<span class="preprocessor">#define MG_CB(cb, ud) cb</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_FEATURES_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/net_if.h&quot;</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_NET_IF_H_</span></div><div class="line"><a name="l03134"></a><span class="lineno"><a class="line" href="mongoose_8h_a80f466cc8fe51acca5a4eefbaca0bbd0.html#a80f466cc8fe51acca5a4eefbaca0bbd0"> 3134</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_NET_IF_H_</span></div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/platform.h&quot; */</span></div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="comment"> * Internal async networking core interface.</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;<span class="comment"> * Consists of calls made by the core, which should not block,</span></div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="comment"> * and callbacks back into the core (&quot;..._cb&quot;).</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;<span class="comment"> * Callbacks may (will) cause methods to be invoked from within,</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;<span class="comment"> * but methods are not allowed to invoke callbacks inline.</span></div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="comment"> * Implementation must ensure that only one callback is invoked at any time.</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div><div class="line"><a name="l03152"></a><span class="lineno"><a class="line" href="mongoose_8h_aa4531e44236262ed42fd33d36528b9ed.html#aa4531e44236262ed42fd33d36528b9ed"> 3152</a></span>&#160;<span class="preprocessor">#define MG_MAIN_IFACE 0</span></div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a>;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a>;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;<span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a>;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a>;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;</div><div class="line"><a name="l03160"></a><span class="lineno"><a class="line" href="structmg__iface.html"> 3160</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> {</div><div class="line"><a name="l03161"></a><span class="lineno"><a class="line" href="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2.html#ad25f7c336d2f8f9ae7505412e9c17fc2"> 3161</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2.html#ad25f7c336d2f8f9ae7505412e9c17fc2">mgr</a>;</div><div class="line"><a name="l03162"></a><span class="lineno"><a class="line" href="structmg__iface_a43da8e59cadad694395f2a55df5c32a8.html#a43da8e59cadad694395f2a55df5c32a8"> 3162</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__iface_a43da8e59cadad694395f2a55df5c32a8.html#a43da8e59cadad694395f2a55df5c32a8">data</a>; <span class="comment">/* Implementation-specific data */</span></div><div class="line"><a name="l03163"></a><span class="lineno"><a class="line" href="structmg__iface_ae02adab992b9704f4e61e937c505f336.html#ae02adab992b9704f4e61e937c505f336"> 3163</a></span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> *<a class="code" href="structmg__iface_ae02adab992b9704f4e61e937c505f336.html#ae02adab992b9704f4e61e937c505f336">vtable</a>;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;};</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div><div class="line"><a name="l03166"></a><span class="lineno"><a class="line" href="structmg__iface__vtable.html"> 3166</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> {</div><div class="line"><a name="l03167"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a66915ed7fbcef057c33bb6dfa3d8a8ee.html#a66915ed7fbcef057c33bb6dfa3d8a8ee"> 3167</a></span>&#160;  void (*init)(<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *iface);</div><div class="line"><a name="l03168"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a267ee7de0f5c3f0eedee5ee5d093a810.html#a267ee7de0f5c3f0eedee5ee5d093a810"> 3168</a></span>&#160;  void (*free)(<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *iface);</div><div class="line"><a name="l03169"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a1b09df656c627c217c4f8efebef85a1e.html#a1b09df656c627c217c4f8efebef85a1e"> 3169</a></span>&#160;  void (*add_conn)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03170"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a3b76727f620579f2e5b2b18c346e71b4.html#a3b76727f620579f2e5b2b18c346e71b4"> 3170</a></span>&#160;  void (*remove_conn)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03171"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a11baf939815da0f0fc71f27692f907a5.html#a11baf939815da0f0fc71f27692f907a5"> 3171</a></span>&#160;  time_t (*poll)(<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *iface, <span class="keywordtype">int</span> timeout_ms);</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  <span class="comment">/* Set up a listening TCP socket on a given address. rv = 0 -&gt; ok. */</span></div><div class="line"><a name="l03174"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a8b75b7e0f1ebd12f00580756ffdbda28.html#a8b75b7e0f1ebd12f00580756ffdbda28"> 3174</a></span>&#160;  int (*listen_tcp)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891">sa</a>);</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;  <span class="comment">/* Request that a &quot;listening&quot; UDP socket be created. */</span></div><div class="line"><a name="l03176"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a940fbc2eecb7353136647724d6f4cb39.html#a940fbc2eecb7353136647724d6f4cb39"> 3176</a></span>&#160;  int (*listen_udp)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891">sa</a>);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  <span class="comment">/* Request that a TCP connection is made to the specified address. */</span></div><div class="line"><a name="l03179"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a9dfae9823c533b3a3cf22501f7794f0a.html#a9dfae9823c533b3a3cf22501f7794f0a"> 3179</a></span>&#160;  void (*connect_tcp)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891">sa</a>);</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <span class="comment">/* Open a UDP socket. Doesn&#39;t actually connect anything. */</span></div><div class="line"><a name="l03181"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a254b3a4b9c6d71ad2e28b634938ff039.html#a254b3a4b9c6d71ad2e28b634938ff039"> 3181</a></span>&#160;  void (*connect_udp)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  <span class="comment">/* Send functions for TCP and UDP. Sent data is copied before return. */</span></div><div class="line"><a name="l03184"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a73eaa7dd92a2be5503f947972deb3e2c.html#a73eaa7dd92a2be5503f947972deb3e2c"> 3184</a></span>&#160;  void (*tcp_send)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l03185"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a0b9b282504e25ca9d64fcd2425a5fe41.html#a0b9b282504e25ca9d64fcd2425a5fe41"> 3185</a></span>&#160;  void (*udp_send)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;</div><div class="line"><a name="l03187"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_af8c7c999331da0f1d0ac1fda3846b61d.html#af8c7c999331da0f1d0ac1fda3846b61d"> 3187</a></span>&#160;  void (*recved)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;  <span class="comment">/* Perform interface-related connection initialization. Return 1 on ok. */</span></div><div class="line"><a name="l03190"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a06792b088f508f37cca62ffa1a6ca133.html#a06792b088f508f37cca62ffa1a6ca133"> 3190</a></span>&#160;  int (*create_conn)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  <span class="comment">/* Perform interface-related cleanup on connection before destruction. */</span></div><div class="line"><a name="l03192"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a807f493abe8b61ee2188b36a16a5ecd0.html#a807f493abe8b61ee2188b36a16a5ecd0"> 3192</a></span>&#160;  void (*destroy_conn)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <span class="comment">/* Associate a socket to a connection. */</span></div><div class="line"><a name="l03195"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a1cca4d335d41b5f40573a657fa022575.html#a1cca4d335d41b5f40573a657fa022575"> 3195</a></span>&#160;  void (*sock_set)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, sock_t <a class="code" href="structmg__connection_a608f2461b3dd53e503d6ed3c84ec55b0.html#a608f2461b3dd53e503d6ed3c84ec55b0">sock</a>);</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  <span class="comment">/* Put connection&#39;s address into *sa, local (remote = 0) or remote. */</span></div><div class="line"><a name="l03198"></a><span class="lineno"><a class="line" href="structmg__iface__vtable_a7b83f83b265b8d10bb85fafd726aab9d.html#a7b83f83b265b8d10bb85fafd726aab9d"> 3198</a></span>&#160;  void (*get_conn_addr)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> remote,</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                        <span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891">sa</a>);</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;};</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> *<a class="code" href="mongoose_8h_a20b4eafe4de8c81ef396cfeb8c2a4b38.html#a20b4eafe4de8c81ef396cfeb8c2a4b38">mg_ifaces</a>[];</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a4af484415c34d126628f7b3981a984d5.html#a4af484415c34d126628f7b3981a984d5">mg_num_ifaces</a>;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;<span class="comment">/* Creates a new interface instance. */</span></div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *<a class="code" href="mongoose_8h_a6f89d6763b9a9b6f7e41a19bbc51c832.html#a6f89d6763b9a9b6f7e41a19bbc51c832">mg_if_create_iface</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> *<a class="code" href="structmg__iface_ae02adab992b9704f4e61e937c505f336.html#ae02adab992b9704f4e61e937c505f336">vtable</a>,</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                                    <span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2.html#ad25f7c336d2f8f9ae7505412e9c17fc2">mgr</a>);</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;<span class="comment"> * Find an interface with a given implementation. The search is started from</span></div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;<span class="comment"> * interface `from`, exclusive. Returns NULL if none is found.</span></div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *<a class="code" href="mongoose_8h_a6dc91813be124910bd42a1c6233e1b82.html#a6dc91813be124910bd42a1c6233e1b82">mg_find_iface</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2.html#ad25f7c336d2f8f9ae7505412e9c17fc2">mgr</a>,</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                               <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> *<a class="code" href="structmg__iface_ae02adab992b9704f4e61e937c505f336.html#ae02adab992b9704f4e61e937c505f336">vtable</a>,</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                               <span class="keyword">struct</span> <a class="code" href="structmg__iface.html">mg_iface</a> *from);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment"> * Deliver a new TCP connection. Returns NULL in case on error (unable to</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;<span class="comment"> * create connection, in which case interface state should be discarded.</span></div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;<span class="comment"> * This is phase 1 of the two-phase process - MG_EV_ACCEPT will be delivered</span></div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;<span class="comment"> * when mg_if_accept_tcp_cb is invoked.</span></div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_a5a65e3a3235b6ab764af7f5090233c52.html#a5a65e3a3235b6ab764af7f5090233c52">mg_if_accept_new_conn</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *lc);</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a34951229fad1d145805f5bb7a29ace67.html#a34951229fad1d145805f5bb7a29ace67">mg_if_accept_tcp_cb</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">union</span> <a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="structmg__connection_a3dfa1816f5a4b0725d9d04be75bbb3f8.html#a3dfa1816f5a4b0725d9d04be75bbb3f8">sa</a>,</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                         <span class="keywordtype">size_t</span> sa_len);</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="comment">/* Callback invoked by connect methods. err = 0 -&gt; ok, != 0 -&gt; error. */</span></div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a73a3e947b6d29f71542c280fdbe4fce0.html#a73a3e947b6d29f71542c280fdbe4fce0">mg_if_connect_cb</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> <a class="code" href="structmg__connection_aa13a0bd4a2ce3d6384866acb7e00344a.html#aa13a0bd4a2ce3d6384866acb7e00344a">err</a>);</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="comment">/* Callback that reports that data has been put on the wire. */</span></div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a5ac0c1c762a5839f16c7e68dfb571cf5.html#a5ac0c1c762a5839f16c7e68dfb571cf5">mg_if_sent_cb</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> num_sent);</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;<span class="comment"> * Receive callback.</span></div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="comment"> * if `own` is true, buf must be heap-allocated and ownership is transferred</span></div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="comment"> * to the core.</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="comment"> * Core will acknowledge consumption by calling iface::recved.</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ab32cc3b42fd1e60f754e8475b7d7fe18.html#ab32cc3b42fd1e60f754e8475b7d7fe18">mg_if_recv_tcp_cb</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">void</span> *buf, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> own);</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="comment"> * Receive callback.</span></div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;<span class="comment"> * buf must be heap-allocated and ownership is transferred to the core.</span></div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="comment"> * Core will acknowledge consumption by calling iface::recved.</span></div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a3b7cf668d0412cd37c5bba8ba5938ee0.html#a3b7cf668d0412cd37c5bba8ba5938ee0">mg_if_recv_udp_cb</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">void</span> *buf, <span class="keywordtype">int</span> len,</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;                       <span class="keyword">union</span> <a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="structmg__connection_a3dfa1816f5a4b0725d9d04be75bbb3f8.html#a3dfa1816f5a4b0725d9d04be75bbb3f8">sa</a>, <span class="keywordtype">size_t</span> sa_len);</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;<span class="comment">/* void mg_if_close_conn(struct mg_connection *nc); */</span></div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;<span class="comment">/* Deliver a POLL event to the connection. */</span></div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a434fcd77e575224c47a797ab0a7aeaa0.html#a434fcd77e575224c47a797ab0a7aeaa0">mg_if_poll</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, time_t now);</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<span class="comment">/* Deliver a TIMER event to the connection. */</span></div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ae662a8a7afb4425fabf95e0b12aabc0a.html#ae662a8a7afb4425fabf95e0b12aabc0a">mg_if_timer</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *c, <span class="keywordtype">double</span> now);</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;}</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_NET_IF_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/ssl_if.h&quot;</span></div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;<span class="comment"> * Copyright (c) 2014-2016 Cesanta Software Limited</span></div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_SSL_IF_H_</span></div><div class="line"><a name="l03267"></a><span class="lineno"><a class="line" href="mongoose_8h_a60be403baff4aa0dfe0341c6a9f55e68.html#a60be403baff4aa0dfe0341c6a9f55e68"> 3267</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_SSL_IF_H_</span></div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;<span class="preprocessor">#if MG_ENABLE_SSL</span></div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;<span class="keyword">struct </span>mg_ssl_if_ctx;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a>;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="keywordtype">void</span> mg_ssl_if_init();</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="keyword">enum</span> mg_ssl_if_result {</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  MG_SSL_OK = 0,</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;  MG_SSL_WANT_READ = -1,</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  MG_SSL_WANT_WRITE = -2,</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;  MG_SSL_ERROR = -3,</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;};</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="keyword">struct </span>mg_ssl_if_conn_params {</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *cert;</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ca_cert;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *server_name;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *cipher_suites;</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *psk_identity;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *psk_key;</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;};</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="keyword">enum</span> mg_ssl_if_result mg_ssl_if_conn_init(</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keyword">struct</span> mg_ssl_if_conn_params *params,</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> **err_msg);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="keyword">enum</span> mg_ssl_if_result mg_ssl_if_conn_accept(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;                                            <span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *lc);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="keywordtype">void</span> mg_ssl_if_conn_close_notify(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;<span class="keywordtype">void</span> mg_ssl_if_conn_free(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;<span class="keyword">enum</span> mg_ssl_if_result mg_ssl_if_handshake(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;<span class="keywordtype">int</span> mg_ssl_if_read(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> buf_size);</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;<span class="keywordtype">int</span> mg_ssl_if_write(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;}</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_SSL */</span><span class="preprocessor"></span></div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_SSL_IF_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/net.h&quot;</span></div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="comment"> * This software is dual-licensed: you can redistribute it and/or modify</span></div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License version 2 as</span></div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="comment"> * published by the Free Software Foundation. For the terms of this</span></div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;<span class="comment"> * license, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;<span class="comment"> * You are free to use this software under the terms of the GNU General</span></div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;<span class="comment"> * Public License, but WITHOUT ANY WARRANTY; without even the implied</span></div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;<span class="comment"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;<span class="comment"> * See the GNU General Public License for more details.</span></div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;<span class="comment"> * Alternatively, you can license this software under a commercial</span></div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="comment"> * license, as set out in &lt;https://www.cesanta.com/license&gt;.</span></div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="comment"> * === Core API: TCP/UDP/SSL</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment"> * NOTE: Mongoose manager is single threaded. It does not protect</span></div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;<span class="comment"> * its data structures by mutexes, therefore all functions that are dealing</span></div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;<span class="comment"> * with a particular event manager should be called from the same thread,</span></div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;<span class="comment"> * with exception of the `mg_broadcast()` function. It is fine to have different</span></div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;<span class="comment"> * event managers handled by different threads.</span></div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_NET_H_</span></div><div class="line"><a name="l03347"></a><span class="lineno"><a class="line" href="mongoose_8h_a1f33b673c3dcf90bf053ff2343e36292.html#a1f33b673c3dcf90bf053ff2343e36292"> 3347</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_NET_H_</span></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/common.h&quot; */</span></div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/net_if.h&quot; */</span></div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/mbuf.h&quot; */</span></div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;<span class="preprocessor">#ifndef MG_VPRINTF_BUFFER_SIZE</span></div><div class="line"><a name="l03354"></a><span class="lineno"><a class="line" href="mongoose_8h_a396d3d30536e22ef9bb8d7886aac0f77.html#a396d3d30536e22ef9bb8d7886aac0f77"> 3354</a></span>&#160;<span class="preprocessor">#define MG_VPRINTF_BUFFER_SIZE 100</span></div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;<span class="preprocessor">#ifdef MG_USE_READ_WRITE</span></div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;<span class="preprocessor">#define MG_RECV_FUNC(s, b, l, f) read(s, b, l)</span></div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;<span class="preprocessor">#define MG_SEND_FUNC(s, b, l, f) write(s, b, l)</span></div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03361"></a><span class="lineno"><a class="line" href="mongoose_8h_acc98d9d24efdf4dda6a076c3623f640d.html#acc98d9d24efdf4dda6a076c3623f640d"> 3361</a></span>&#160;<span class="preprocessor">#define MG_RECV_FUNC(s, b, l, f) recv(s, b, l, f)</span></div><div class="line"><a name="l03362"></a><span class="lineno"><a class="line" href="mongoose_8h_a4d865e116dcf3991df610aa94d6cdbf8.html#a4d865e116dcf3991df610aa94d6cdbf8"> 3362</a></span>&#160;<span class="preprocessor">#define MG_SEND_FUNC(s, b, l, f) send(s, b, l, f)</span></div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;</div><div class="line"><a name="l03369"></a><span class="lineno"><a class="line" href="unionsocket__address.html"> 3369</a></span>&#160;<span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a> {</div><div class="line"><a name="l03370"></a><span class="lineno"><a class="line" href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891"> 3370</a></span>&#160;  <span class="keyword">struct </span>sockaddr sa;</div><div class="line"><a name="l03371"></a><span class="lineno"><a class="line" href="unionsocket__address_af540a7224ea459c48bc6ec1ca592e55d.html#af540a7224ea459c48bc6ec1ca592e55d"> 3371</a></span>&#160;  <span class="keyword">struct </span>sockaddr_in sin;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;<span class="preprocessor">#if MG_ENABLE_IPV6</span></div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;  <span class="keyword">struct </span>sockaddr_in6 sin6;</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03375"></a><span class="lineno"><a class="line" href="unionsocket__address_a923a2caba3cad046553b3632f7c2c571.html#a923a2caba3cad046553b3632f7c2c571"> 3375</a></span>&#160;  <span class="keyword">struct </span>sockaddr sin6;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;};</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a>;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;<span class="comment"> * Callback function (event handler) prototype. Must be defined by the user.</span></div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="comment"> * Mongoose calls the event handler, passing the events defined below.</span></div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03385"></a><span class="lineno"><a class="line" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda"> 3385</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a>)(<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> ev,</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;                                   <span class="keywordtype">void</span> *ev_data <a class="code" href="mongoose_8h_a38d833c3c352508abac7aa3ae0def23f.html#a38d833c3c352508abac7aa3ae0def23f">MG_UD_ARG</a>(<span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>));</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;<span class="comment">/* Events. Meaning of event parameter (evp) is given in the comment. */</span></div><div class="line"><a name="l03389"></a><span class="lineno"><a class="line" href="mongoose_8h_a76dbdd6a622e37181fff44666c2eb0c8.html#a76dbdd6a622e37181fff44666c2eb0c8"> 3389</a></span>&#160;<span class="preprocessor">#define MG_EV_POLL 0    </span><span class="comment">/* Sent to each connection on each mg_mgr_poll() call */</span><span class="preprocessor"></span></div><div class="line"><a name="l03390"></a><span class="lineno"><a class="line" href="mongoose_8h_aec752c2c9e63f2893358a34f33d1482b.html#aec752c2c9e63f2893358a34f33d1482b"> 3390</a></span>&#160;<span class="preprocessor">#define MG_EV_ACCEPT 1  </span><span class="comment">/* New connection accepted. union socket_address * */</span><span class="preprocessor"></span></div><div class="line"><a name="l03391"></a><span class="lineno"><a class="line" href="mongoose_8h_a47a771255e072a41726da6fba8a44452.html#a47a771255e072a41726da6fba8a44452"> 3391</a></span>&#160;<span class="preprocessor">#define MG_EV_CONNECT 2 </span><span class="comment">/* connect() succeeded or failed. int *  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03392"></a><span class="lineno"><a class="line" href="mongoose_8h_a33107a32df0f3f0ee8c90a7c7f0d1d9a.html#a33107a32df0f3f0ee8c90a7c7f0d1d9a"> 3392</a></span>&#160;<span class="preprocessor">#define MG_EV_RECV 3    </span><span class="comment">/* Data has been received. int *num_bytes */</span><span class="preprocessor"></span></div><div class="line"><a name="l03393"></a><span class="lineno"><a class="line" href="mongoose_8h_aa3f80b5dc6a8f98f902eefd4f44922a5.html#aa3f80b5dc6a8f98f902eefd4f44922a5"> 3393</a></span>&#160;<span class="preprocessor">#define MG_EV_SEND 4    </span><span class="comment">/* Data has been written to a socket. int *num_bytes */</span><span class="preprocessor"></span></div><div class="line"><a name="l03394"></a><span class="lineno"><a class="line" href="mongoose_8h_ad804d96734d3aca9faeaf551d0124995.html#ad804d96734d3aca9faeaf551d0124995"> 3394</a></span>&#160;<span class="preprocessor">#define MG_EV_CLOSE 5   </span><span class="comment">/* Connection is closed. NULL */</span><span class="preprocessor"></span></div><div class="line"><a name="l03395"></a><span class="lineno"><a class="line" href="mongoose_8h_a9d6f26511fb1ec69e06e214108bab5cf.html#a9d6f26511fb1ec69e06e214108bab5cf"> 3395</a></span>&#160;<span class="preprocessor">#define MG_EV_TIMER 6   </span><span class="comment">/* now &gt;= conn-&gt;ev_timer_time. double * */</span><span class="preprocessor"></span></div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;<span class="comment"> * Mongoose event manager.</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03400"></a><span class="lineno"><a class="line" href="structmg__mgr.html"> 3400</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a> {</div><div class="line"><a name="l03401"></a><span class="lineno"><a class="line" href="structmg__mgr_abb2e9f2e7a4851f22e84da9f87d9cca2.html#abb2e9f2e7a4851f22e84da9f87d9cca2"> 3401</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="structmg__mgr_abb2e9f2e7a4851f22e84da9f87d9cca2.html#abb2e9f2e7a4851f22e84da9f87d9cca2">active_connections</a>;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="preprocessor">#if MG_ENABLE_HEXDUMP</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *hexdump_file; <span class="comment">/* Debug hexdump file path */</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;<span class="preprocessor">#if MG_ENABLE_BROADCAST</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  sock_t ctl[2]; <span class="comment">/* Socketpair for mg_broadcast() */</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03408"></a><span class="lineno"><a class="line" href="structmg__mgr_ac2e8ed98ad341f9f58bfd3add2c6bdc6.html#ac2e8ed98ad341f9f58bfd3add2c6bdc6"> 3408</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__mgr_ac2e8ed98ad341f9f58bfd3add2c6bdc6.html#ac2e8ed98ad341f9f58bfd3add2c6bdc6">user_data</a>; <span class="comment">/* User data */</span></div><div class="line"><a name="l03409"></a><span class="lineno"><a class="line" href="structmg__mgr_a5354db212e2db2b8e115017ecf1060df.html#a5354db212e2db2b8e115017ecf1060df"> 3409</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__mgr_a5354db212e2db2b8e115017ecf1060df.html#a5354db212e2db2b8e115017ecf1060df">num_ifaces</a>;</div><div class="line"><a name="l03410"></a><span class="lineno"><a class="line" href="structmg__mgr_afd2b46e44b87ffc58a8e286ed784ee31.html#afd2b46e44b87ffc58a8e286ed784ee31"> 3410</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> **<a class="code" href="structmg__mgr_afd2b46e44b87ffc58a8e286ed784ee31.html#afd2b46e44b87ffc58a8e286ed784ee31">ifaces</a>; <span class="comment">/* network interfaces */</span></div><div class="line"><a name="l03411"></a><span class="lineno"><a class="line" href="structmg__mgr_a6177e6c1145fe43e36d7cc926a7f0d8c.html#a6177e6c1145fe43e36d7cc926a7f0d8c"> 3411</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__mgr_a6177e6c1145fe43e36d7cc926a7f0d8c.html#a6177e6c1145fe43e36d7cc926a7f0d8c">nameserver</a>;   <span class="comment">/* DNS server to use */</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;};</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;<span class="comment"> * Mongoose connection.</span></div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03417"></a><span class="lineno"><a class="line" href="structmg__connection.html"> 3417</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> {</div><div class="line"><a name="l03418"></a><span class="lineno"><a class="line" href="structmg__connection_aa93fd5ca83f11230bc971a68a7fa8d5e.html#aa93fd5ca83f11230bc971a68a7fa8d5e"> 3418</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="structmg__connection_afcfd89f119a87cba6f6dfec2d2eda5d9.html#afcfd89f119a87cba6f6dfec2d2eda5d9">next</a>, *<a class="code" href="structmg__connection_aa93fd5ca83f11230bc971a68a7fa8d5e.html#aa93fd5ca83f11230bc971a68a7fa8d5e">prev</a>; <span class="comment">/* mg_mgr::active_connections linkage */</span></div><div class="line"><a name="l03419"></a><span class="lineno"><a class="line" href="structmg__connection_a9392bec67d0dc8df58e6c171214ddf8d.html#a9392bec67d0dc8df58e6c171214ddf8d"> 3419</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="structmg__connection_a9392bec67d0dc8df58e6c171214ddf8d.html#a9392bec67d0dc8df58e6c171214ddf8d">listener</a>;    <span class="comment">/* Set only for accept()-ed connections */</span></div><div class="line"><a name="l03420"></a><span class="lineno"><a class="line" href="structmg__connection_ac341f1f2bd18e030fe90a914e4517506.html#ac341f1f2bd18e030fe90a914e4517506"> 3420</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__connection_ac341f1f2bd18e030fe90a914e4517506.html#ac341f1f2bd18e030fe90a914e4517506">mgr</a>;                <span class="comment">/* Pointer to containing manager */</span></div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;</div><div class="line"><a name="l03422"></a><span class="lineno"><a class="line" href="structmg__connection_a608f2461b3dd53e503d6ed3c84ec55b0.html#a608f2461b3dd53e503d6ed3c84ec55b0"> 3422</a></span>&#160;  sock_t <a class="code" href="structmg__connection_a608f2461b3dd53e503d6ed3c84ec55b0.html#a608f2461b3dd53e503d6ed3c84ec55b0">sock</a>; <span class="comment">/* Socket to the remote peer */</span></div><div class="line"><a name="l03423"></a><span class="lineno"><a class="line" href="structmg__connection_aa13a0bd4a2ce3d6384866acb7e00344a.html#aa13a0bd4a2ce3d6384866acb7e00344a"> 3423</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__connection_aa13a0bd4a2ce3d6384866acb7e00344a.html#aa13a0bd4a2ce3d6384866acb7e00344a">err</a>;</div><div class="line"><a name="l03424"></a><span class="lineno"><a class="line" href="structmg__connection_a3dfa1816f5a4b0725d9d04be75bbb3f8.html#a3dfa1816f5a4b0725d9d04be75bbb3f8"> 3424</a></span>&#160;  <span class="keyword">union </span><a class="code" href="unionsocket__address.html">socket_address</a> <a class="code" href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891">sa</a>; <span class="comment">/* Remote peer address */</span></div><div class="line"><a name="l03425"></a><span class="lineno"><a class="line" href="structmg__connection_ab15e90e7fb7b8719cc7dcc67f45856e1.html#ab15e90e7fb7b8719cc7dcc67f45856e1"> 3425</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structmg__connection_ab15e90e7fb7b8719cc7dcc67f45856e1.html#ab15e90e7fb7b8719cc7dcc67f45856e1">recv_mbuf_limit</a>;  <span class="comment">/* Max size of recv buffer */</span></div><div class="line"><a name="l03426"></a><span class="lineno"><a class="line" href="structmg__connection_a72adb9aba4bbe59a9bd591de496713b3.html#a72adb9aba4bbe59a9bd591de496713b3"> 3426</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmbuf.html">mbuf</a> recv_mbuf;   <span class="comment">/* Received data */</span></div><div class="line"><a name="l03427"></a><span class="lineno"><a class="line" href="structmg__connection_a70076f5da9c9d01e77acb3547941671c.html#a70076f5da9c9d01e77acb3547941671c"> 3427</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmbuf.html">mbuf</a> send_mbuf;   <span class="comment">/* Data scheduled for sending */</span></div><div class="line"><a name="l03428"></a><span class="lineno"><a class="line" href="structmg__connection_aaf0f39b26deef84e6c204a176ea1e50a.html#aaf0f39b26deef84e6c204a176ea1e50a"> 3428</a></span>&#160;  time_t <a class="code" href="structmg__connection_aaf0f39b26deef84e6c204a176ea1e50a.html#aaf0f39b26deef84e6c204a176ea1e50a">last_io_time</a>;     <span class="comment">/* Timestamp of the last socket IO */</span></div><div class="line"><a name="l03429"></a><span class="lineno"><a class="line" href="structmg__connection_a84d1a7e42f1326c70f61f71e65082dc0.html#a84d1a7e42f1326c70f61f71e65082dc0"> 3429</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structmg__connection_a84d1a7e42f1326c70f61f71e65082dc0.html#a84d1a7e42f1326c70f61f71e65082dc0">ev_timer_time</a>;    <span class="comment">/* Timestamp of the future MG_EV_TIMER */</span></div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;<span class="preprocessor">#if MG_ENABLE_SSL</span></div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;  <span class="keywordtype">void</span> *ssl_if_data; <span class="comment">/* SSL library data. */</span></div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03433"></a><span class="lineno"><a class="line" href="structmg__connection_ae6b1f0d002253c0f80371fc5a7bbfc70.html#ae6b1f0d002253c0f80371fc5a7bbfc70"> 3433</a></span>&#160;  <a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_ae6b1f0d002253c0f80371fc5a7bbfc70.html#ae6b1f0d002253c0f80371fc5a7bbfc70">proto_handler</a>; <span class="comment">/* Protocol-specific event handler */</span></div><div class="line"><a name="l03434"></a><span class="lineno"><a class="line" href="structmg__connection_a7508851a3c070a1357c226781fa92bb7.html#a7508851a3c070a1357c226781fa92bb7"> 3434</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_a7508851a3c070a1357c226781fa92bb7.html#a7508851a3c070a1357c226781fa92bb7">proto_data</a>;                 <span class="comment">/* Protocol-specific data */</span></div><div class="line"><a name="l03435"></a><span class="lineno"><a class="line" href="structmg__connection_a834e7757b28379b2ca0b8b6c51d7ba95.html#a834e7757b28379b2ca0b8b6c51d7ba95"> 3435</a></span>&#160;  void (*proto_data_destructor)(<span class="keywordtype">void</span> *proto_data);</div><div class="line"><a name="l03436"></a><span class="lineno"><a class="line" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb"> 3436</a></span>&#160;  <a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>; <span class="comment">/* Event handler function */</span></div><div class="line"><a name="l03437"></a><span class="lineno"><a class="line" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d"> 3437</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>;            <span class="comment">/* User-specific data */</span></div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l03439"></a><span class="lineno"><a class="line" href="structmg__connection_a1c70d397e2abcd97dfdee3311357f9cd.html#a1c70d397e2abcd97dfdee3311357f9cd"> 3439</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_a1c70d397e2abcd97dfdee3311357f9cd.html#a1c70d397e2abcd97dfdee3311357f9cd">v</a>;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;<span class="comment">     * the C standard is fussy about fitting function pointers into</span></div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;<span class="comment">     * void pointers, since some archs might have fat pointers for functions.</span></div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l03444"></a><span class="lineno"><a class="line" href="structmg__connection_a9bff1f6466b9a610dad5591bdbe79daa.html#a9bff1f6466b9a610dad5591bdbe79daa"> 3444</a></span>&#160;    <a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a9bff1f6466b9a610dad5591bdbe79daa.html#a9bff1f6466b9a610dad5591bdbe79daa">f</a>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;  } priv_1;</div><div class="line"><a name="l03446"></a><span class="lineno"><a class="line" href="structmg__connection_aeb5efea496ac74ed2e0b8864f4fd6f65.html#aeb5efea496ac74ed2e0b8864f4fd6f65"> 3446</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_aeb5efea496ac74ed2e0b8864f4fd6f65.html#aeb5efea496ac74ed2e0b8864f4fd6f65">priv_2</a>;</div><div class="line"><a name="l03447"></a><span class="lineno"><a class="line" href="structmg__connection_a19cb5ee4c2402582dcf4cb6a4f899136.html#a19cb5ee4c2402582dcf4cb6a4f899136"> 3447</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_a19cb5ee4c2402582dcf4cb6a4f899136.html#a19cb5ee4c2402582dcf4cb6a4f899136">mgr_data</a>; <span class="comment">/* Implementation-specific event manager&#39;s data. */</span></div><div class="line"><a name="l03448"></a><span class="lineno"><a class="line" href="structmg__connection_a6f337461553de516901473bd8bb11a0a.html#a6f337461553de516901473bd8bb11a0a"> 3448</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *<a class="code" href="structmg__connection_a6f337461553de516901473bd8bb11a0a.html#a6f337461553de516901473bd8bb11a0a">iface</a>;</div><div class="line"><a name="l03449"></a><span class="lineno"><a class="line" href="structmg__connection_aa47edda11152dd7769a76d806a87e1aa.html#aa47edda11152dd7769a76d806a87e1aa"> 3449</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structmg__connection_aa47edda11152dd7769a76d806a87e1aa.html#aa47edda11152dd7769a76d806a87e1aa">flags</a>;</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;<span class="comment">/* Flags set by Mongoose */</span></div><div class="line"><a name="l03451"></a><span class="lineno"><a class="line" href="mongoose_8h_a5781cd411e55afc3bad44e100c0afd1e.html#a5781cd411e55afc3bad44e100c0afd1e"> 3451</a></span>&#160;<span class="preprocessor">#define MG_F_LISTENING (1 &lt;&lt; 0)          </span><span class="comment">/* This connection is listening */</span><span class="preprocessor"></span></div><div class="line"><a name="l03452"></a><span class="lineno"><a class="line" href="mongoose_8h_a7b42d2871badcf99950268c51872a009.html#a7b42d2871badcf99950268c51872a009"> 3452</a></span>&#160;<span class="preprocessor">#define MG_F_UDP (1 &lt;&lt; 1)                </span><span class="comment">/* This connection is UDP */</span><span class="preprocessor"></span></div><div class="line"><a name="l03453"></a><span class="lineno"><a class="line" href="mongoose_8h_ac0f67050fc9df4a042c03ba3841f758f.html#ac0f67050fc9df4a042c03ba3841f758f"> 3453</a></span>&#160;<span class="preprocessor">#define MG_F_RESOLVING (1 &lt;&lt; 2)          </span><span class="comment">/* Waiting for async resolver */</span><span class="preprocessor"></span></div><div class="line"><a name="l03454"></a><span class="lineno"><a class="line" href="mongoose_8h_ae4a182a3259debfb161c8c602d4dd0f0.html#ae4a182a3259debfb161c8c602d4dd0f0"> 3454</a></span>&#160;<span class="preprocessor">#define MG_F_CONNECTING (1 &lt;&lt; 3)         </span><span class="comment">/* connect() call in progress */</span><span class="preprocessor"></span></div><div class="line"><a name="l03455"></a><span class="lineno"><a class="line" href="mongoose_8h_a8125f7916ee1f5cb8eb56f068e042714.html#a8125f7916ee1f5cb8eb56f068e042714"> 3455</a></span>&#160;<span class="preprocessor">#define MG_F_SSL (1 &lt;&lt; 4)                </span><span class="comment">/* SSL is enabled on the connection */</span><span class="preprocessor"></span></div><div class="line"><a name="l03456"></a><span class="lineno"><a class="line" href="mongoose_8h_ac86973c65d1b01b281766bcaca19104a.html#ac86973c65d1b01b281766bcaca19104a"> 3456</a></span>&#160;<span class="preprocessor">#define MG_F_SSL_HANDSHAKE_DONE (1 &lt;&lt; 5) </span><span class="comment">/* SSL hanshake has completed */</span><span class="preprocessor"></span></div><div class="line"><a name="l03457"></a><span class="lineno"><a class="line" href="mongoose_8h_a3f9f8ea30e85d364f82796bb8bcaa403.html#a3f9f8ea30e85d364f82796bb8bcaa403"> 3457</a></span>&#160;<span class="preprocessor">#define MG_F_WANT_READ (1 &lt;&lt; 6)          </span><span class="comment">/* SSL specific */</span><span class="preprocessor"></span></div><div class="line"><a name="l03458"></a><span class="lineno"><a class="line" href="mongoose_8h_ae221eaa654cac363957594efc548a54d.html#ae221eaa654cac363957594efc548a54d"> 3458</a></span>&#160;<span class="preprocessor">#define MG_F_WANT_WRITE (1 &lt;&lt; 7)         </span><span class="comment">/* SSL specific */</span><span class="preprocessor"></span></div><div class="line"><a name="l03459"></a><span class="lineno"><a class="line" href="mongoose_8h_acbcc432806c3ba93f584b6bc2fea46ac.html#acbcc432806c3ba93f584b6bc2fea46ac"> 3459</a></span>&#160;<span class="preprocessor">#define MG_F_IS_WEBSOCKET (1 &lt;&lt; 8)       </span><span class="comment">/* Websocket specific */</span><span class="preprocessor"></span></div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;<span class="comment">/* Flags that are settable by user */</span></div><div class="line"><a name="l03462"></a><span class="lineno"><a class="line" href="mongoose_8h_afad0fe77b335e5f11fb12725238841dc.html#afad0fe77b335e5f11fb12725238841dc"> 3462</a></span>&#160;<span class="preprocessor">#define MG_F_SEND_AND_CLOSE (1 &lt;&lt; 10)       </span><span class="comment">/* Push remaining data and close  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03463"></a><span class="lineno"><a class="line" href="mongoose_8h_a281ad5151f7e2670743177d37ebad939.html#a281ad5151f7e2670743177d37ebad939"> 3463</a></span>&#160;<span class="preprocessor">#define MG_F_CLOSE_IMMEDIATELY (1 &lt;&lt; 11)    </span><span class="comment">/* Disconnect */</span><span class="preprocessor"></span></div><div class="line"><a name="l03464"></a><span class="lineno"><a class="line" href="mongoose_8h_a70334d479a3f558aa312f41ba3c130c0.html#a70334d479a3f558aa312f41ba3c130c0"> 3464</a></span>&#160;<span class="preprocessor">#define MG_F_WEBSOCKET_NO_DEFRAG (1 &lt;&lt; 12)  </span><span class="comment">/* Websocket specific */</span><span class="preprocessor"></span></div><div class="line"><a name="l03465"></a><span class="lineno"><a class="line" href="mongoose_8h_ab29f5bfb88e878b133916af7c6366220.html#ab29f5bfb88e878b133916af7c6366220"> 3465</a></span>&#160;<span class="preprocessor">#define MG_F_DELETE_CHUNK (1 &lt;&lt; 13)         </span><span class="comment">/* HTTP specific */</span><span class="preprocessor"></span></div><div class="line"><a name="l03466"></a><span class="lineno"><a class="line" href="mongoose_8h_adad884a6e4e4830dc0ff9927ed609517.html#adad884a6e4e4830dc0ff9927ed609517"> 3466</a></span>&#160;<span class="preprocessor">#define MG_F_ENABLE_BROADCAST (1 &lt;&lt; 14)     </span><span class="comment">/* Allow broadcast address usage */</span><span class="preprocessor"></span></div><div class="line"><a name="l03467"></a><span class="lineno"><a class="line" href="mongoose_8h_aa499ab4a33f14abfe0e55d8cf1961cd8.html#aa499ab4a33f14abfe0e55d8cf1961cd8"> 3467</a></span>&#160;<span class="preprocessor">#define MG_F_TUN_DO_NOT_RECONNECT (1 &lt;&lt; 15) </span><span class="comment">/* Don&#39;t reconnect tunnel */</span><span class="preprocessor"></span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;</div><div class="line"><a name="l03469"></a><span class="lineno"><a class="line" href="mongoose_8h_a81c0f742fcefdc5eb674d224daf6a344.html#a81c0f742fcefdc5eb674d224daf6a344"> 3469</a></span>&#160;<span class="preprocessor">#define MG_F_USER_1 (1 &lt;&lt; 20) </span><span class="comment">/* Flags left for application */</span><span class="preprocessor"></span></div><div class="line"><a name="l03470"></a><span class="lineno"><a class="line" href="mongoose_8h_a23d3a79b5c69646b98b7f945fc2da097.html#a23d3a79b5c69646b98b7f945fc2da097"> 3470</a></span>&#160;<span class="preprocessor">#define MG_F_USER_2 (1 &lt;&lt; 21)</span></div><div class="line"><a name="l03471"></a><span class="lineno"><a class="line" href="mongoose_8h_ad13f2068f9dc7a13cf6a3fdf354c2693.html#ad13f2068f9dc7a13cf6a3fdf354c2693"> 3471</a></span>&#160;<span class="preprocessor">#define MG_F_USER_3 (1 &lt;&lt; 22)</span></div><div class="line"><a name="l03472"></a><span class="lineno"><a class="line" href="mongoose_8h_a2c7f13096182ee55a930120228d271fd.html#a2c7f13096182ee55a930120228d271fd"> 3472</a></span>&#160;<span class="preprocessor">#define MG_F_USER_4 (1 &lt;&lt; 23)</span></div><div class="line"><a name="l03473"></a><span class="lineno"><a class="line" href="mongoose_8h_a8af1813bcddcbac7fabbfe4caef5411a.html#a8af1813bcddcbac7fabbfe4caef5411a"> 3473</a></span>&#160;<span class="preprocessor">#define MG_F_USER_5 (1 &lt;&lt; 24)</span></div><div class="line"><a name="l03474"></a><span class="lineno"><a class="line" href="mongoose_8h_a0ac6fada4d7f8afe428e202285c63fb2.html#a0ac6fada4d7f8afe428e202285c63fb2"> 3474</a></span>&#160;<span class="preprocessor">#define MG_F_USER_6 (1 &lt;&lt; 25)</span></div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;};</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;<span class="comment"> * Initialise Mongoose manager. Side effect: ignores SIGPIPE signal.</span></div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;<span class="comment"> * `mgr-&gt;user_data` field will be initialised with a `user_data` parameter.</span></div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;<span class="comment"> * That is an arbitrary pointer, where the user code can associate some data</span></div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;<span class="comment"> * with the particular Mongoose manager. For example, a C++ wrapper class</span></div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;<span class="comment"> * could be written in which case `user_data` can hold a pointer to the</span></div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;<span class="comment"> * class instance.</span></div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2b1b8bd86c01ee6dae737670e870f44c.html#a2b1b8bd86c01ee6dae737670e870f44c">mg_mgr_init</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2.html#ad25f7c336d2f8f9ae7505412e9c17fc2">mgr</a>, <span class="keywordtype">void</span> *user_data);</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;<span class="comment"> * Optional parameters to `mg_mgr_init_opt()`.</span></div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;<span class="comment"> * If `main_iface` is not NULL, it will be used as the main interface in the</span></div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;<span class="comment"> * default interface set. The pointer will be free&#39;d by `mg_mgr_free`.</span></div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;<span class="comment"> * Otherwise, the main interface will be autodetected based on the current</span></div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;<span class="comment"> * platform.</span></div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;<span class="comment"> * If `num_ifaces` is 0 and `ifaces` is NULL, the default interface set will be</span></div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;<span class="comment"> * used.</span></div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;<span class="comment"> * This is an advanced option, as it requires you to construct a full interface</span></div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;<span class="comment"> * set, including special networking interfaces required by some optional</span></div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;<span class="comment"> * features such as TCP tunneling. Memory backing `ifaces` and each of the</span></div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;<span class="comment"> * `num_ifaces` pointers it contains will be reclaimed by `mg_mgr_free`.</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03502"></a><span class="lineno"><a class="line" href="structmg__mgr__init__opts.html"> 3502</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mgr__init__opts.html">mg_mgr_init_opts</a> {</div><div class="line"><a name="l03503"></a><span class="lineno"><a class="line" href="structmg__mgr__init__opts_ac72a1f670b50b1ab79bc9e2790f114c3.html#ac72a1f670b50b1ab79bc9e2790f114c3"> 3503</a></span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> *<a class="code" href="structmg__mgr__init__opts_ac72a1f670b50b1ab79bc9e2790f114c3.html#ac72a1f670b50b1ab79bc9e2790f114c3">main_iface</a>;</div><div class="line"><a name="l03504"></a><span class="lineno"><a class="line" href="structmg__mgr__init__opts_a9e6fe35e823019f31446d34e29cc3f4a.html#a9e6fe35e823019f31446d34e29cc3f4a"> 3504</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__mgr__init__opts_a9e6fe35e823019f31446d34e29cc3f4a.html#a9e6fe35e823019f31446d34e29cc3f4a">num_ifaces</a>;</div><div class="line"><a name="l03505"></a><span class="lineno"><a class="line" href="structmg__mgr__init__opts_adf5a32b0abe41300d2109969b768f33d.html#adf5a32b0abe41300d2109969b768f33d"> 3505</a></span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmg__iface__vtable.html">mg_iface_vtable</a> **<a class="code" href="structmg__mgr__init__opts_adf5a32b0abe41300d2109969b768f33d.html#adf5a32b0abe41300d2109969b768f33d">ifaces</a>;</div><div class="line"><a name="l03506"></a><span class="lineno"><a class="line" href="structmg__mgr__init__opts_a1c54576a6dc65d0d1fba5caec53847fd.html#a1c54576a6dc65d0d1fba5caec53847fd"> 3506</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__mgr__init__opts_a1c54576a6dc65d0d1fba5caec53847fd.html#a1c54576a6dc65d0d1fba5caec53847fd">nameserver</a>;</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;};</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;<span class="comment"> * Like `mg_mgr_init` but with more options.</span></div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;<span class="comment"> * Notably, this allows you to create a manger and choose</span></div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;<span class="comment"> * dynamically which networking interface implementation to use.</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a7021bd3f4a2112c8f3ddd88956b45a10.html#a7021bd3f4a2112c8f3ddd88956b45a10">mg_mgr_init_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keywordtype">void</span> *user_data,</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                     <span class="keyword">struct</span> <a class="code" href="structmg__mgr__init__opts.html">mg_mgr_init_opts</a> opts);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;<span class="comment"> * De-initialises Mongoose manager.</span></div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;<span class="comment"> * Closes and deallocates all active connections.</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a00e8d99b05aa6677b8788b9f5a9f4000.html#a00e8d99b05aa6677b8788b9f5a9f4000">mg_mgr_free</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *);</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;<span class="comment"> * This function performs the actual IO and must be called in a loop</span></div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;<span class="comment"> * (an event loop). It returns the current timestamp.</span></div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;<span class="comment"> * `milli` is the maximum number of milliseconds to sleep.</span></div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;<span class="comment"> * `mg_mgr_poll()` checks all connections for IO readiness. If at least one</span></div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;<span class="comment"> * of the connections is IO-ready, `mg_mgr_poll()` triggers the respective</span></div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;<span class="comment"> * event handlers and returns.</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;time_t <a class="code" href="mongoose_8h_a00051e79a693bfb8ffb9c7849ce5a5d9.html#a00051e79a693bfb8ffb9c7849ce5a5d9">mg_mgr_poll</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *, <span class="keywordtype">int</span> milli);</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;<span class="preprocessor">#if MG_ENABLE_BROADCAST</span></div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;<span class="comment"> * Passes a message of a given length to all connections.</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;<span class="comment"> * Must be called from a thread that does NOT call `mg_mgr_poll()`.</span></div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;<span class="comment"> * Note that `mg_broadcast()` is the only function</span></div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;<span class="comment"> * that can be, and must be, called from a different (non-IO) thread.</span></div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;<span class="comment"> * `func` callback function will be called by the IO thread for each</span></div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;<span class="comment"> * connection. When called, the event will be `MG_EV_POLL`, and a message will</span></div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;<span class="comment"> * be passed as the `ev_data` pointer. Maximum message size is capped</span></div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;<span class="comment"> * by `MG_CTL_MSG_MESSAGE_SIZE` which is set to 8192 bytes.</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;<span class="keywordtype">void</span> mg_broadcast(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> cb, <span class="keywordtype">void</span> *data,</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;                  <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;<span class="comment"> * Iterates over all active connections.</span></div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;<span class="comment"> * Returns the next connection from the list</span></div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;<span class="comment"> * of active connections or `NULL` if there are no more connections. Below</span></div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;<span class="comment"> * is the iteration idiom:</span></div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;<span class="comment"> * for (c = mg_next(srv, NULL); c != NULL; c = mg_next(srv, c)) {</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;<span class="comment"> *   // Do something with connection `c`</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_ab6fb7900e99440aa777f089728daf264.html#ab6fb7900e99440aa777f089728daf264">mg_next</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__connection_ac341f1f2bd18e030fe90a914e4517506.html#ac341f1f2bd18e030fe90a914e4517506">mgr</a>, <span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *c);</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="comment"> * Optional parameters to `mg_add_sock_opt()`.</span></div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="comment"> * `flags` is an initial `struct mg_connection::flags` bitmask to set,</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;<span class="comment"> * see `MG_F_*` flags definitions.</span></div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03573"></a><span class="lineno"><a class="line" href="structmg__add__sock__opts.html"> 3573</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__add__sock__opts.html">mg_add_sock_opts</a> {</div><div class="line"><a name="l03574"></a><span class="lineno"><a class="line" href="structmg__add__sock__opts_af927a96c42e76f43592b510eca4e1f8e.html#af927a96c42e76f43592b510eca4e1f8e"> 3574</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__add__sock__opts_af927a96c42e76f43592b510eca4e1f8e.html#af927a96c42e76f43592b510eca4e1f8e">user_data</a>;           <span class="comment">/* Initial value for connection&#39;s user_data */</span></div><div class="line"><a name="l03575"></a><span class="lineno"><a class="line" href="structmg__add__sock__opts_ac836b917617be7c0a38e6a322cdf9cff.html#ac836b917617be7c0a38e6a322cdf9cff"> 3575</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structmg__add__sock__opts_ac836b917617be7c0a38e6a322cdf9cff.html#ac836b917617be7c0a38e6a322cdf9cff">flags</a>;        <span class="comment">/* Initial connection flags */</span></div><div class="line"><a name="l03576"></a><span class="lineno"><a class="line" href="structmg__add__sock__opts_a13c0a3d7dc05ad3873a03a7236735a50.html#a13c0a3d7dc05ad3873a03a7236735a50"> 3576</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="structmg__add__sock__opts_a13c0a3d7dc05ad3873a03a7236735a50.html#a13c0a3d7dc05ad3873a03a7236735a50">error_string</a>; <span class="comment">/* Placeholder for the error string */</span></div><div class="line"><a name="l03577"></a><span class="lineno"><a class="line" href="structmg__add__sock__opts_a3d5516f6481c9a317b4708ec370a9b43.html#a3d5516f6481c9a317b4708ec370a9b43"> 3577</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *<a class="code" href="structmg__add__sock__opts_a3d5516f6481c9a317b4708ec370a9b43.html#a3d5516f6481c9a317b4708ec370a9b43">iface</a>;    <span class="comment">/* Interface instance */</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;};</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;<span class="comment"> * Creates a connection, associates it with the given socket and event handler</span></div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;<span class="comment"> * and adds it to the manager.</span></div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="comment"> * For more options see the `mg_add_sock_opt` variant.</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_acc89d313c52054dba755f4809386b6b7.html#acc89d313c52054dba755f4809386b6b7">mg_add_sock</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *<a class="code" href="structmg__connection_ac341f1f2bd18e030fe90a914e4517506.html#ac341f1f2bd18e030fe90a914e4517506">mgr</a>, sock_t <a class="code" href="structmg__connection_a608f2461b3dd53e503d6ed3c84ec55b0.html#a608f2461b3dd53e503d6ed3c84ec55b0">sock</a>,</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;                                  <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>,</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;                                        <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>));</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;<span class="comment"> * Creates a connection, associates it with the given socket and event handler</span></div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;<span class="comment"> * and adds to the manager.</span></div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;<span class="comment"> * See the `mg_add_sock_opts` structure for a description of the options.</span></div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_adb30c08fe723f18fd758311bde7082e2.html#adb30c08fe723f18fd758311bde7082e2">mg_add_sock_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, sock_t sock,</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;                                      <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>,</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                                            <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>),</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                                      <span class="keyword">struct</span> <a class="code" href="structmg__add__sock__opts.html">mg_add_sock_opts</a> opts);</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;<span class="comment"> * Optional parameters to `mg_bind_opt()`.</span></div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;<span class="comment"> * `flags` is an initial `struct mg_connection::flags` bitmask to set,</span></div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;<span class="comment"> * see `MG_F_*` flags definitions.</span></div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03607"></a><span class="lineno"><a class="line" href="structmg__bind__opts.html"> 3607</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__bind__opts.html">mg_bind_opts</a> {</div><div class="line"><a name="l03608"></a><span class="lineno"><a class="line" href="structmg__bind__opts_a3bd493ef5bd6c8da605b1480a6c189c4.html#a3bd493ef5bd6c8da605b1480a6c189c4"> 3608</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__bind__opts_a3bd493ef5bd6c8da605b1480a6c189c4.html#a3bd493ef5bd6c8da605b1480a6c189c4">user_data</a>;           <span class="comment">/* Initial value for connection&#39;s user_data */</span></div><div class="line"><a name="l03609"></a><span class="lineno"><a class="line" href="structmg__bind__opts_ae257fe726a23692a36fb8c92885d4873.html#ae257fe726a23692a36fb8c92885d4873"> 3609</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structmg__bind__opts_ae257fe726a23692a36fb8c92885d4873.html#ae257fe726a23692a36fb8c92885d4873">flags</a>;        <span class="comment">/* Extra connection flags */</span></div><div class="line"><a name="l03610"></a><span class="lineno"><a class="line" href="structmg__bind__opts_a9320251e7b1a273fedc123a3739fb9fa.html#a9320251e7b1a273fedc123a3739fb9fa"> 3610</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="structmg__bind__opts_a9320251e7b1a273fedc123a3739fb9fa.html#a9320251e7b1a273fedc123a3739fb9fa">error_string</a>; <span class="comment">/* Placeholder for the error string */</span></div><div class="line"><a name="l03611"></a><span class="lineno"><a class="line" href="structmg__bind__opts_a328924ea266e19c9add95902d82271ad.html#a328924ea266e19c9add95902d82271ad"> 3611</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *<a class="code" href="structmg__bind__opts_a328924ea266e19c9add95902d82271ad.html#a328924ea266e19c9add95902d82271ad">iface</a>;    <span class="comment">/* Interface instance */</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;<span class="preprocessor">#if MG_ENABLE_SSL</span></div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;<span class="comment">   * SSL settings.</span></div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;<span class="comment">   * Server certificate to present to clients or client certificate to</span></div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;<span class="comment">   * present to tunnel dispatcher (for tunneled connections).</span></div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_cert;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  <span class="comment">/* Private key corresponding to the certificate. If ssl_cert is set but</span></div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;<span class="comment">   * ssl_key is not, ssl_cert is used. */</span></div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_key;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;  <span class="comment">/* CA bundle used to verify client certificates or tunnel dispatchers. */</span></div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_ca_cert;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <span class="comment">/* Colon-delimited list of acceptable cipher suites.</span></div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;<span class="comment">   * Names depend on the library used, for example:</span></div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;<span class="comment">   * ECDH-ECDSA-AES128-GCM-SHA256:DHE-RSA-AES128-SHA256 (OpenSSL)</span></div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;<span class="comment">   * TLS-ECDH-ECDSA-WITH-AES-128-GCM-SHA256:TLS-DHE-RSA-WITH-AES-128-GCM-SHA256</span></div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;<span class="comment">   *   (mbedTLS)</span></div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;<span class="comment">   * For OpenSSL the list can be obtained by running &quot;openssl ciphers&quot;.</span></div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;<span class="comment">   * For mbedTLS, names can be found in library/ssl_ciphersuites.c</span></div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;<span class="comment">   * If NULL, a reasonable default is used.</span></div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_cipher_suites;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;};</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;<span class="comment"> * Creates a listening connection.</span></div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;<span class="comment"> * See `mg_bind_opt` for full documentation.</span></div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_aef2378acb5b7cc16530dfe648c8d37eb.html#aef2378acb5b7cc16530dfe648c8d37eb">mg_bind</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *address,</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;                              <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>,</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;                                    <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>));</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;<span class="comment"> * Creates a listening connection.</span></div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;<span class="comment"> * The `address` parameter specifies which address to bind to. It&#39;s format is</span></div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;<span class="comment"> * the same as for the `mg_connect()` call, where `HOST` part is optional.</span></div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;<span class="comment"> * `address` can be just a port number, e.g. `:8000`. To bind to a specific</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<span class="comment"> * interface, an IP address can be specified, e.g. `1.2.3.4:8000`. By default,</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment"> * a TCP connection is created. To create UDP connection, prepend `udp://`</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment"> * prefix, e.g. `udp://:8000`. To summarize, `address` parameter has following</span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;<span class="comment"> * format: `[PROTO://][IP_ADDRESS]:PORT`, where `PROTO` could be `tcp` or</span></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;<span class="comment"> * `udp`.</span></div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;<span class="comment"> * See the `mg_bind_opts` structure for a description of the optional</span></div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="comment"> * parameters.</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;<span class="comment"> * Returns a new listening connection or `NULL` on error.</span></div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<span class="comment"> * NOTE: The connection remains owned by the manager, do not free().</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_a9847181fe56b9289e485386315fc5519.html#a9847181fe56b9289e485386315fc5519">mg_bind_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *address,</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;                                  <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>,</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                                        <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>),</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;                                  <span class="keyword">struct</span> <a class="code" href="structmg__bind__opts.html">mg_bind_opts</a> opts);</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;<span class="comment">/* Optional parameters to `mg_connect_opt()` */</span></div><div class="line"><a name="l03672"></a><span class="lineno"><a class="line" href="structmg__connect__opts.html"> 3672</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connect__opts.html">mg_connect_opts</a> {</div><div class="line"><a name="l03673"></a><span class="lineno"><a class="line" href="structmg__connect__opts_a88039c409267c457638a0ebce97d7c5c.html#a88039c409267c457638a0ebce97d7c5c"> 3673</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__connect__opts_a88039c409267c457638a0ebce97d7c5c.html#a88039c409267c457638a0ebce97d7c5c">user_data</a>;           <span class="comment">/* Initial value for connection&#39;s user_data */</span></div><div class="line"><a name="l03674"></a><span class="lineno"><a class="line" href="structmg__connect__opts_a794f93a8213aa29cdb59fb42075c0ab0.html#a794f93a8213aa29cdb59fb42075c0ab0"> 3674</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structmg__connect__opts_a794f93a8213aa29cdb59fb42075c0ab0.html#a794f93a8213aa29cdb59fb42075c0ab0">flags</a>;        <span class="comment">/* Extra connection flags */</span></div><div class="line"><a name="l03675"></a><span class="lineno"><a class="line" href="structmg__connect__opts_a24fa9723e785487ed74b779c1e30ce75.html#a24fa9723e785487ed74b779c1e30ce75"> 3675</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="structmg__connect__opts_a24fa9723e785487ed74b779c1e30ce75.html#a24fa9723e785487ed74b779c1e30ce75">error_string</a>; <span class="comment">/* Placeholder for the error string */</span></div><div class="line"><a name="l03676"></a><span class="lineno"><a class="line" href="structmg__connect__opts_a47c10391acd986fe2ff3f4f308bd1637.html#a47c10391acd986fe2ff3f4f308bd1637"> 3676</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *<a class="code" href="structmg__connect__opts_a47c10391acd986fe2ff3f4f308bd1637.html#a47c10391acd986fe2ff3f4f308bd1637">iface</a>;    <span class="comment">/* Interface instance */</span></div><div class="line"><a name="l03677"></a><span class="lineno"><a class="line" href="structmg__connect__opts_a53edbf692c49f5ee86d2fe27ebba816c.html#a53edbf692c49f5ee86d2fe27ebba816c"> 3677</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__connect__opts_a53edbf692c49f5ee86d2fe27ebba816c.html#a53edbf692c49f5ee86d2fe27ebba816c">nameserver</a>;    <span class="comment">/* DNS server to use, NULL for default */</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="preprocessor">#if MG_ENABLE_SSL</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;<span class="comment">   * SSL settings.</span></div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;<span class="comment">   * Client certificate to present to the server.</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_cert;</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;<span class="comment">   * Private key corresponding to the certificate.</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;<span class="comment">   * If ssl_cert is set but ssl_key is not, ssl_cert is used.</span></div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_key;</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;<span class="comment">   * Verify server certificate using this CA bundle. If set to &quot;*&quot;, then SSL</span></div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;<span class="comment">   * is enabled but no cert verification is performed.</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_ca_cert;</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;  <span class="comment">/* Colon-delimited list of acceptable cipher suites.</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;<span class="comment">   * Names depend on the library used, for example:</span></div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;<span class="comment">   * ECDH-ECDSA-AES128-GCM-SHA256:DHE-RSA-AES128-SHA256 (OpenSSL)</span></div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;<span class="comment">   * TLS-ECDH-ECDSA-WITH-AES-128-GCM-SHA256:TLS-DHE-RSA-WITH-AES-128-GCM-SHA256</span></div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;<span class="comment">   *   (mbedTLS)</span></div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="comment">   * For OpenSSL the list can be obtained by running &quot;openssl ciphers&quot;.</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;<span class="comment">   * For mbedTLS, names can be found in library/ssl_ciphersuites.c</span></div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;<span class="comment">   * If NULL, a reasonable default is used.</span></div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_cipher_suites;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;<span class="comment">   * Server name verification. If ssl_ca_cert is set and the certificate has</span></div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;<span class="comment">   * passed verification, its subject will be verified against this string.</span></div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;<span class="comment">   * By default (if ssl_server_name is NULL) hostname part of the address will</span></div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="comment">   * be used. Wildcard matching is supported. A special value of &quot;*&quot; disables</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;<span class="comment">   * name verification.</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_server_name;</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;<span class="comment">   * PSK identity and key. Identity is a NUL-terminated string and key is a hex</span></div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;<span class="comment">   * string. Key must be either 16 or 32 bytes (32 or 64 hex digits) for AES-128</span></div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;<span class="comment">   * or AES-256 respectively.</span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;<span class="comment">   * Note: Default list of cipher suites does not include PSK suites, if you</span></div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="comment">   * want to use PSK you will need to set ssl_cipher_suites as well.</span></div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_psk_identity;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_psk_key;</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;};</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;<span class="comment"> * Connects to a remote host.</span></div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;<span class="comment"> * See `mg_connect_opt()` for full documentation.</span></div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_a259bc1f872b9a24d54d33e4e74cf75b4.html#a259bc1f872b9a24d54d33e4e74cf75b4">mg_connect</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *address,</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;                                 <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>,</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;                                       <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>));</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="comment"> * Connects to a remote host.</span></div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;<span class="comment"> * The `address` format is `[PROTO://]HOST:PORT`. `PROTO` could be `tcp` or</span></div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;<span class="comment"> * `udp`. `HOST` could be an IP address,</span></div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;<span class="comment"> * IPv6 address (if Mongoose is compiled with `-DMG_ENABLE_IPV6`) or a host</span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;<span class="comment"> * name. If `HOST` is a name, Mongoose will resolve it asynchronously. Examples</span></div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;<span class="comment"> * of valid addresses: `google.com:80`, `udp://1.2.3.4:53`, `10.0.0.1:443`,</span></div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;<span class="comment"> * `[::1]:80`</span></div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;<span class="comment"> * See the `mg_connect_opts` structure for a description of the optional</span></div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;<span class="comment"> * parameters.</span></div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;<span class="comment"> * Returns a new outbound connection or `NULL` on error.</span></div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;<span class="comment"> * NOTE: The connection remains owned by the manager, do not free().</span></div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;<span class="comment"> * NOTE: To enable IPv6 addresses `-DMG_ENABLE_IPV6` should be specified</span></div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;<span class="comment"> * in the compilation flags.</span></div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;<span class="comment"> * NOTE: The new connection will receive `MG_EV_CONNECT` as its first event</span></div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;<span class="comment"> * which will report the connect success status.</span></div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;<span class="comment"> * If the asynchronous resolution fails or the `connect()` syscall fails for</span></div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;<span class="comment"> * whatever reason (e.g. with `ECONNREFUSED` or `ENETUNREACH`), then</span></div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;<span class="comment"> * `MG_EV_CONNECT` event will report failure. Code example below:</span></div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;<span class="comment"> * static void ev_handler(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;<span class="comment"> *   int connect_status;</span></div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;<span class="comment"> *   switch (ev) {</span></div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;<span class="comment"> *     case MG_EV_CONNECT:</span></div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;<span class="comment"> *       connect_status = * (int *) ev_data;</span></div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;<span class="comment"> *       if (connect_status == 0) {</span></div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;<span class="comment"> *         // Success</span></div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;<span class="comment"> *       } else  {</span></div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;<span class="comment"> *         // Error</span></div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;<span class="comment"> *         printf(&quot;connect() error: %s\n&quot;, strerror(connect_status));</span></div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;<span class="comment"> *       }</span></div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;<span class="comment"> *       break;</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;<span class="comment"> *     ...</span></div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;<span class="comment"> *   }</span></div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;<span class="comment"> *   ...</span></div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;<span class="comment"> *   mg_connect(mgr, &quot;my_site.com:80&quot;, ev_handler);</span></div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_aa9250670d79f5b1ea7c970f180e1207f.html#aa9250670d79f5b1ea7c970f180e1207f">mg_connect_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *address,</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;                                     <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">handler</a>,</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;                                           <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>),</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;                                     <span class="keyword">struct</span> <a class="code" href="structmg__connect__opts.html">mg_connect_opts</a> opts);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;<span class="preprocessor">#if MG_ENABLE_SSL &amp;&amp; MG_NET_IF != MG_NET_IF_SIMPLELINK</span></div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;<span class="comment"> * Note: This function is deprecated. Please, use SSL options in</span></div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;<span class="comment"> * mg_connect_opt.</span></div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;<span class="comment"> * Enables SSL for a given connection.</span></div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="comment"> * `cert` is a server certificate file name for a listening connection</span></div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;<span class="comment"> * or a client certificate file name for an outgoing connection.</span></div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;<span class="comment"> * The certificate files must be in PEM format. The server certificate file</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;<span class="comment"> * must contain a certificate, concatenated with a private key, optionally</span></div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;<span class="comment"> * concatenated with DH parameters.</span></div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="comment"> * `ca_cert` is a CA certificate or NULL if peer verification is not</span></div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;<span class="comment"> * required.</span></div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;<span class="comment"> * Return: NULL on success or error message on error.</span></div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *mg_set_ssl(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *cert,</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                       <span class="keyword">const</span> <span class="keywordtype">char</span> *ca_cert);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;<span class="comment"> * Sends data to the connection.</span></div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;<span class="comment"> * Note that sending functions do not actually push data to the socket.</span></div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;<span class="comment"> * They just append data to the output buffer. MG_EV_SEND will be delivered when</span></div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;<span class="comment"> * the data has actually been pushed out.</span></div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a636b0233879363163fa46791a485681b.html#a636b0233879363163fa46791a485681b">mg_send</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">int</span> len);</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;<span class="comment">/* Enables format string warnings for mg_printf */</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;<span class="preprocessor">#if defined(__GNUC__)</span></div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<a class="code" href="namespaceTBT_a625f01f6d8d0db8cd557bae99d0a8ae0.html#a625f01f6d8d0db8cd557bae99d0a8ae0">__attribute__</a>((format(printf, 2, 3)))</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;<span class="comment">/* don&#39;t separate from mg_printf declaration */</span></div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;<span class="comment"> * Sends `printf`-style formatted data to the connection.</span></div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;<span class="comment"> * See `mg_send` for more details on send semantics.</span></div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_af5598a0890430f5953cd7c86fb371eea.html#af5598a0890430f5953cd7c86fb371eea">mg_printf</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;<span class="comment">/* Same as `mg_printf()`, but takes `va_list ap` as an argument. */</span></div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a361ad3a39d0a8304514c5cc8074fb3c3.html#a361ad3a39d0a8304514c5cc8074fb3c3">mg_vprintf</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, va_list ap);</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;<span class="comment"> * Creates a socket pair.</span></div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;<span class="comment"> * `sock_type` can be either `SOCK_STREAM` or `SOCK_DGRAM`.</span></div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;<span class="comment"> * Returns 0 on failure and 1 on success.</span></div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a6434df14580c4a10b5514935dd91a2c6.html#a6434df14580c4a10b5514935dd91a2c6">mg_socketpair</a>(sock_t[2], <span class="keywordtype">int</span> sock_type);</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;<span class="preprocessor">#if MG_ENABLE_SYNC_RESOLVER</span></div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;<span class="comment"> * Convert domain name into IP address.</span></div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;<span class="comment"> * This is a utility function. If compilation flags have</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;<span class="comment"> * `-DMG_ENABLE_GETADDRINFO`, then `getaddrinfo()` call is used for name</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;<span class="comment"> * resolution. Otherwise, `gethostbyname()` is used.</span></div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;<span class="comment"> * CAUTION: this function can block.</span></div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;<span class="comment"> * Return 1 on success, 0 on failure.</span></div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;<span class="keywordtype">int</span> mg_resolve(<span class="keyword">const</span> <span class="keywordtype">char</span> *domain_name, <span class="keywordtype">char</span> *ip_addr_buf, <span class="keywordtype">size_t</span> buf_len);</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="comment"> * Verify given IP address against the ACL.</span></div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;<span class="comment"> * `remote_ip` - an IPv4 address to check, in host byte order</span></div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;<span class="comment"> * `acl` - a comma separated list of IP subnets: `x.x.x.x/x` or `x.x.x.x`.</span></div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;<span class="comment"> * Each subnet is</span></div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="comment"> * prepended by either a - or a + sign. A plus sign means allow, where a</span></div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;<span class="comment"> * minus sign means deny. If a subnet mask is omitted, such as `-1.2.3.4`,</span></div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;<span class="comment"> * it means that only that single IP address is denied.</span></div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;<span class="comment"> * Subnet masks may vary from 0 to 32, inclusive. The default setting</span></div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="comment"> * is to allow all access. On each request the full list is traversed,</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="comment"> * and the last match wins. Example:</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;<span class="comment"> * `-0.0.0.0/0,+192.168/16` - deny all accesses, only allow 192.168/16 subnet</span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;<span class="comment"> * To learn more about subnet masks, see this</span></div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;<span class="comment"> * link:https://en.wikipedia.org/wiki/Subnetwork[Wikipedia page on Subnetwork].</span></div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="comment"> * Returns -1 if ACL is malformed, 0 if address is disallowed, 1 if allowed.</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ae3059501d12b30e53dadbe79ef5a2e17.html#ae3059501d12b30e53dadbe79ef5a2e17">mg_check_ip_acl</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *acl, uint32_t remote_ip);</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;<span class="comment"> * Schedules an MG_EV_TIMER event to be delivered at `timestamp` time.</span></div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;<span class="comment"> * `timestamp` is UNIX time (the number of seconds since Epoch). It is</span></div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;<span class="comment"> * `double` instead of `time_t` to allow for sub-second precision.</span></div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;<span class="comment"> * Returns the old timer value.</span></div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;<span class="comment"> * Example: set the connect timeout to 1.5 seconds:</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;<span class="comment"> *  c = mg_connect(&amp;mgr, &quot;cesanta.com&quot;, ev_handler);</span></div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;<span class="comment"> *  mg_set_timer(c, mg_time() + 1.5);</span></div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;<span class="comment"> *  ...</span></div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;<span class="comment"> *  void ev_handler(struct mg_connection *c, int ev, void *ev_data) {</span></div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;<span class="comment"> *  switch (ev) {</span></div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;<span class="comment"> *    case MG_EV_CONNECT:</span></div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;<span class="comment"> *      mg_set_timer(c, 0);  // Clear connect timer</span></div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;<span class="comment"> *      break;</span></div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;<span class="comment"> *    case MG_EV_TIMER:</span></div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;<span class="comment"> *      log(&quot;Connect timeout&quot;);</span></div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;<span class="comment"> *      c-&gt;flags |= MG_F_CLOSE_IMMEDIATELY;</span></div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;<span class="comment"> *      break;</span></div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;<span class="keywordtype">double</span> <a class="code" href="mongoose_8h_a45031ed3fb7ce9757f2cd543ac379c13.html#a45031ed3fb7ce9757f2cd543ac379c13">mg_set_timer</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *c, <span class="keywordtype">double</span> timestamp);</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;<span class="comment"> * A sub-second precision version of time().</span></div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;<span class="keywordtype">double</span> <a class="code" href="mongoose_8h_a844719a6a21476e5f173ef2101473153.html#a844719a6a21476e5f173ef2101473153">mg_time</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;}</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_NET_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/uri.h&quot;</span></div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;<span class="comment"> * === URI</span></div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_URI_H_</span></div><div class="line"><a name="l03924"></a><span class="lineno"><a class="line" href="mongoose_8h_a12d532cace7a37f9186aaf8a398a24c7.html#a12d532cace7a37f9186aaf8a398a24c7"> 3924</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_URI_H_</span></div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/net.h&quot; */</span></div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="comment"> * Parses an URI and fills string chunks with locations of the respective</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;<span class="comment"> * uri components within the input uri string. NULL pointers will be</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;<span class="comment"> * ignored.</span></div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;<span class="comment"> * General syntax:</span></div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;<span class="comment"> *     [scheme://[user_info@]]host[:port][/path][?query][#fragment]</span></div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;<span class="comment"> * Example:</span></div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;<span class="comment"> *     foo.com:80</span></div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;<span class="comment"> *     tcp://foo.com:1234</span></div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;<span class="comment"> *     http://foo.com:80/bar?baz=1</span></div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;<span class="comment"> *     https://user:pw@foo.com:443/blah</span></div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;<span class="comment"> * `path` will include the leading slash. `query` won&#39;t include the leading `?`.</span></div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;<span class="comment"> * `host` can contain embedded colons if surrounded by square brackets in order</span></div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;<span class="comment"> * to support IPv6 literal addresses.</span></div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;<span class="comment"> * Returns 0 on success, -1 on error.</span></div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ad29ff9ca37fd7635a97c9b9ab0d08bf2.html#ad29ff9ca37fd7635a97c9b9ab0d08bf2">mg_parse_uri</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> uri, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *scheme,</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                 <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *user_info, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *host,</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *port, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *path, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *query,</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;                 <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *fragment);</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;<span class="comment"> * Assemble URI from parts. Any of the inputs can be NULL or zero-length mg_str.</span></div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;<span class="comment"> * If normalize_path is true, path is normalized by resolving relative refs.</span></div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;<span class="comment"> * Result is a heap-allocated string (uri-&gt;p must be free()d after use).</span></div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;<span class="comment"> * Returns 0 on success, -1 on error.</span></div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a957de876a8d109fae4d9026389ff71d2.html#a957de876a8d109fae4d9026389ff71d2">mg_assemble_uri</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *scheme, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *user_info,</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *host, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> port,</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *path, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *query,</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *fragment, <span class="keywordtype">int</span> normalize_path,</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;                    <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *uri);</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a34fa5a03fe913545413422d65e3a8c8b.html#a34fa5a03fe913545413422d65e3a8c8b">mg_normalize_uri_path</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *in, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *out);</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;}</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_URI_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/util.h&quot;</span></div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;<span class="comment"> * === Utility API</span></div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_UTIL_H_</span></div><div class="line"><a name="l03994"></a><span class="lineno"><a class="line" href="mongoose_8h_a296f43f788f65175308f8d942e3d0df4.html#a296f43f788f65175308f8d942e3d0df4"> 3994</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_UTIL_H_</span></div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/common.h&quot; */</span></div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/net_if.h&quot; */</span></div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;<span class="preprocessor">#ifndef MG_MAX_PATH</span></div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;<span class="preprocessor">#ifdef PATH_MAX</span></div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;<span class="preprocessor">#define MG_MAX_PATH PATH_MAX</span></div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04009"></a><span class="lineno"><a class="line" href="mongoose_8h_a5158d521a8008ffa5bb1b15d35eb431d.html#a5158d521a8008ffa5bb1b15d35eb431d"> 4009</a></span>&#160;<span class="preprocessor">#define MG_MAX_PATH 256</span></div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;<span class="comment"> * Fetches substring from input string `s`, `end` into `v`.</span></div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;<span class="comment"> * Skips initial delimiter characters. Records first non-delimiter character</span></div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;<span class="comment"> * at the beginning of substring `v`. Then scans the rest of the string</span></div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;<span class="comment"> * until a delimiter character or end-of-string is found.</span></div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;<span class="comment"> * `delimiters` is a 0-terminated string containing delimiter characters.</span></div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;<span class="comment"> * Either one of `delimiters` or `end_string` terminates the search.</span></div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;<span class="comment"> * Returns an `s` pointer, advanced forward where parsing has stopped.</span></div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mongoose_8h_aba504889d00dcb957e8f3e92a4a19d6b.html#aba504889d00dcb957e8f3e92a4a19d6b">mg_skip</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *end_string,</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> *delimiters, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *<a class="code" href="structmg__connection_a1c70d397e2abcd97dfdee3311357f9cd.html#a1c70d397e2abcd97dfdee3311357f9cd">v</a>);</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;<span class="comment"> * Decodes base64-encoded string `s`, `len` into the destination `dst`.</span></div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;<span class="comment"> * The destination has to have enough space to hold the decoded buffer.</span></div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;<span class="comment"> * Decoding stops either when all strings have been decoded or invalid an</span></div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;<span class="comment"> * character appeared.</span></div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;<span class="comment"> * Destination is &#39;\0&#39;-terminated.</span></div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;<span class="comment"> * Returns the number of decoded characters. On success, that should be equal</span></div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;<span class="comment"> * to `len`. On error (invalid character) the return value is smaller then</span></div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;<span class="comment"> * `len`.</span></div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aa6ff7f3654a28ce8958b9aaafba871c8.html#aa6ff7f3654a28ce8958b9aaafba871c8">mg_base64_decode</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> len, <span class="keywordtype">char</span> *dst);</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;<span class="comment"> * Base64-encode chunk of memory `src`, `src_len` into the destination `dst`.</span></div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;<span class="comment"> * Destination has to have enough space to hold encoded buffer.</span></div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;<span class="comment"> * Destination is &#39;\0&#39;-terminated.</span></div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ac97e32affece7eff0d37c77555f97bcb.html#ac97e32affece7eff0d37c77555f97bcb">mg_base64_encode</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">int</span> src_len, <span class="keywordtype">char</span> *dst);</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;<span class="preprocessor">#if MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;<span class="comment"> * Performs a 64-bit `stat()` call against a given file.</span></div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;<span class="comment"> * `path` should be UTF8 encoded.</span></div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;<span class="comment"> * Return value is the same as for `stat()` syscall.</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;<span class="keywordtype">int</span> mg_stat(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, cs_stat_t *st);</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;<span class="comment"> * Opens the given file and returns a file stream.</span></div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;<span class="comment"> * `path` and `mode` should be UTF8 encoded.</span></div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;<span class="comment"> * Return value is the same as for the `fopen()` call.</span></div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;FILE *mg_fopen(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keywordtype">char</span> *mode);</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;<span class="comment"> * Opens the given file and returns a file stream.</span></div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="comment"> * `path` should be UTF8 encoded.</span></div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;<span class="comment"> * Return value is the same as for the `open()` syscall.</span></div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;<span class="keywordtype">int</span> mg_open(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keywordtype">int</span> flag, <span class="keywordtype">int</span> mode);</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;<span class="comment"> * Reads data from the given file stream.</span></div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;<span class="comment"> * Return value is a number of bytes readen.</span></div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;<span class="keywordtype">size_t</span> mg_fread(<span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> count, FILE *<a class="code" href="structmg__connection_a9bff1f6466b9a610dad5591bdbe79daa.html#a9bff1f6466b9a610dad5591bdbe79daa">f</a>);</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;<span class="comment"> * Writes data to the given file stream.</span></div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;<span class="comment"> * Return value is a number of bytes wtitten.</span></div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;<span class="keywordtype">size_t</span> mg_fwrite(<span class="keyword">const</span> <span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> count, FILE *<a class="code" href="structmg__connection_a9bff1f6466b9a610dad5591bdbe79daa.html#a9bff1f6466b9a610dad5591bdbe79daa">f</a>);</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_FILESYSTEM */</span><span class="preprocessor"></span></div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;<span class="preprocessor">#if MG_ENABLE_THREADS</span></div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;<span class="comment"> * Starts a new detached thread.</span></div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;<span class="comment"> * Arguments and semantics are the same as pthead&#39;s `pthread_create()`.</span></div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;<span class="comment"> * `thread_func` is a thread function, `thread_func_param` is a parameter</span></div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;<span class="comment"> * that is passed to the thread function.</span></div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;<span class="keywordtype">void</span> *mg_start_thread(<span class="keywordtype">void</span> *(*thread_func)(<span class="keywordtype">void</span> *), <span class="keywordtype">void</span> *thread_func_param);</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_aafce5d3ac0f161c1bbd30908af98a29d.html#aafce5d3ac0f161c1bbd30908af98a29d">mg_set_close_on_exec</a>(sock_t);</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;</div><div class="line"><a name="l04100"></a><span class="lineno"><a class="line" href="mongoose_8h_a9827c42d571fe14a9b76d4f078b8b732.html#a9827c42d571fe14a9b76d4f078b8b732"> 4100</a></span>&#160;<span class="preprocessor">#define MG_SOCK_STRINGIFY_IP 1</span></div><div class="line"><a name="l04101"></a><span class="lineno"><a class="line" href="mongoose_8h_a2aa8df2ebc8b7430317618a139c855f3.html#a2aa8df2ebc8b7430317618a139c855f3"> 4101</a></span>&#160;<span class="preprocessor">#define MG_SOCK_STRINGIFY_PORT 2</span></div><div class="line"><a name="l04102"></a><span class="lineno"><a class="line" href="mongoose_8h_a434958ae586db05e67d5ac9315301154.html#a434958ae586db05e67d5ac9315301154"> 4102</a></span>&#160;<span class="preprocessor">#define MG_SOCK_STRINGIFY_REMOTE 4</span></div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;<span class="comment"> * Converts a connection&#39;s local or remote address into string.</span></div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;<span class="comment"> * The `flags` parameter is a bit mask that controls the behaviour,</span></div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;<span class="comment"> * see `MG_SOCK_STRINGIFY_*` definitions.</span></div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;<span class="comment"> * - MG_SOCK_STRINGIFY_IP - print IP address</span></div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;<span class="comment"> * - MG_SOCK_STRINGIFY_PORT - print port number</span></div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;<span class="comment"> * - MG_SOCK_STRINGIFY_REMOTE - print remote peer&#39;s IP/port, not local address</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;<span class="comment"> * If both port number and IP address are printed, they are separated by `:`.</span></div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;<span class="comment"> * If compiled with `-DMG_ENABLE_IPV6`, IPv6 addresses are supported.</span></div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;<span class="comment"> * Return length of the stringified address.</span></div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a5357794c2b9d072ca2a6cf35af2dd39a.html#a5357794c2b9d072ca2a6cf35af2dd39a">mg_conn_addr_to_str</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *c, <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> len,</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="structmg__connection_aa47edda11152dd7769a76d806a87e1aa.html#aa47edda11152dd7769a76d806a87e1aa">flags</a>);</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;<span class="preprocessor">#if MG_NET_IF == MG_NET_IF_SOCKET</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;<span class="comment">/* Legacy interface. */</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a8666e3133ed8642cc139c439e20a61e7.html#a8666e3133ed8642cc139c439e20a61e7">mg_sock_to_str</a>(sock_t sock, <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">int</span> <a class="code" href="structmg__connection_aa47edda11152dd7769a76d806a87e1aa.html#aa47edda11152dd7769a76d806a87e1aa">flags</a>);</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;<span class="comment"> * Convert the socket&#39;s address into string.</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;<span class="comment"> * `flags` is MG_SOCK_STRINGIFY_IP and/or MG_SOCK_STRINGIFY_PORT.</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_afaaf58a848fe3c8484fb4758ebd7a232.html#afaaf58a848fe3c8484fb4758ebd7a232">mg_sock_addr_to_str</a>(<span class="keyword">const</span> <span class="keyword">union</span> <a class="code" href="unionsocket__address.html">socket_address</a> *<a class="code" href="structmg__connection_a3dfa1816f5a4b0725d9d04be75bbb3f8.html#a3dfa1816f5a4b0725d9d04be75bbb3f8">sa</a>, <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> len,</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="structmg__connection_aa47edda11152dd7769a76d806a87e1aa.html#aa47edda11152dd7769a76d806a87e1aa">flags</a>);</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;<span class="preprocessor">#if MG_ENABLE_HEXDUMP</span></div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;<span class="comment"> * Generates a human-readable hexdump of memory chunk.</span></div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;<span class="comment"> * Takes a memory buffer `buf` of length `len` and creates a hex dump of that</span></div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;<span class="comment"> * buffer in `dst`. The generated output is a-la hexdump(1).</span></div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;<span class="comment"> * Returns the length of generated string, excluding terminating `\0`. If</span></div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;<span class="comment"> * returned length is bigger than `dst_len`, the overflow bytes are discarded.</span></div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;<span class="keywordtype">int</span> mg_hexdump(<span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">int</span> len, <span class="keywordtype">char</span> *dst, <span class="keywordtype">int</span> dst_len);</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;<span class="comment">/* Same as mg_hexdump, but with output going to file instead of a buffer. */</span></div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;<span class="keywordtype">void</span> mg_hexdumpf(FILE *fp, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">int</span> len);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;<span class="comment"> * Generates human-readable hexdump of the data sent or received by the</span></div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;<span class="comment"> * connection. `path` is a file name where hexdump should be written.</span></div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;<span class="comment"> * `num_bytes` is a number of bytes sent/received. `ev` is one of the `MG_*`</span></div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;<span class="comment"> * events sent to an event handler. This function is supposed to be called from</span></div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;<span class="comment"> * the event handler.</span></div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;<span class="keywordtype">void</span> mg_hexdump_connection(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">int</span> num_bytes, <span class="keywordtype">int</span> ev);</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;<span class="comment"> * Returns true if target platform is big endian.</span></div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a27a424a231709f818d12ad9d0dadbb86.html#a27a424a231709f818d12ad9d0dadbb86">mg_is_big_endian</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;<span class="comment"> * Use with cs_base64_init/update/finish in order to write out base64 in chunks.</span></div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2ed764a3ef91c75d108534f061d03c7f.html#a2ed764a3ef91c75d108534f061d03c7f">mg_mbuf_append_base64_putc</a>(<span class="keywordtype">char</span> ch, <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>);</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;<span class="comment"> * Encode `len` bytes starting at `data` as base64 and append them to an mbuf.</span></div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a857c53ce2eb0f6c86ade55fed164a199.html#a857c53ce2eb0f6c86ade55fed164a199">mg_mbuf_append_base64</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *<a class="code" href="structmbuf.html">mbuf</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;<span class="comment"> * Generate a Basic Auth header and appends it to buf.</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;<span class="comment"> * If pass is NULL, then user is expected to contain the credentials pair</span></div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;<span class="comment"> * already encoded as `user:pass`.</span></div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2f76d3856c5886a14303404cbdbd53d5.html#a2f76d3856c5886a14303404cbdbd53d5">mg_basic_auth_header</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> user, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> pass,</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                          <span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *buf);</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;<span class="comment"> * URL-escape the specified string.</span></div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;<span class="comment"> * All non-printable characters are escaped, plus `._-$,;~()/`.</span></div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;<span class="comment"> * Input need not be NUL-terminated, but the returned string is.</span></div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;<span class="comment"> * Returned string is heap-allocated and must be free()&#39;d.</span></div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> <a class="code" href="mongoose_8h_a423c078d1e052e8cf92ea0d2d30acf2a.html#a423c078d1e052e8cf92ea0d2d30acf2a">mg_url_encode</a>(const struct <a class="code" href="structmg__str.html">mg_str</a> src);</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;}</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_UTIL_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/http.h&quot;</span></div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;<span class="comment"> * === Common API reference</span></div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_HTTP_H_</span></div><div class="line"><a name="l04205"></a><span class="lineno"><a class="line" href="mongoose_8h_a9b30fc56acd7706be9756ac4a570fbea.html#a9b30fc56acd7706be9756ac4a570fbea"> 4205</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_HTTP_H_</span></div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP</span></div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/net.h&quot; */</span></div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/mg_str.h&quot; */</span></div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_HEADERS</span></div><div class="line"><a name="l04217"></a><span class="lineno"><a class="line" href="mongoose_8h_a12ec0f9dfd1ce08498bb2aeed8a80d40.html#a12ec0f9dfd1ce08498bb2aeed8a80d40"> 4217</a></span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_HEADERS 20</span></div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_REQUEST_SIZE</span></div><div class="line"><a name="l04221"></a><span class="lineno"><a class="line" href="mongoose_8h_ab72511fe44213732e9bd15846b297b41.html#ab72511fe44213732e9bd15846b297b41"> 4221</a></span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_REQUEST_SIZE 1024</span></div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;<span class="preprocessor">#ifndef MG_MAX_HTTP_SEND_MBUF</span></div><div class="line"><a name="l04225"></a><span class="lineno"><a class="line" href="mongoose_8h_a16f3633a15e1350ad91f3365554d7041.html#a16f3633a15e1350ad91f3365554d7041"> 4225</a></span>&#160;<span class="preprocessor">#define MG_MAX_HTTP_SEND_MBUF 1024</span></div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;<span class="preprocessor">#ifndef MG_CGI_ENVIRONMENT_SIZE</span></div><div class="line"><a name="l04229"></a><span class="lineno"><a class="line" href="mongoose_8h_a5ed2ae3d99dea4390c16c2edf199fcbc.html#a5ed2ae3d99dea4390c16c2edf199fcbc"> 4229</a></span>&#160;<span class="preprocessor">#define MG_CGI_ENVIRONMENT_SIZE 8192</span></div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;<span class="comment">/* HTTP message */</span></div><div class="line"><a name="l04233"></a><span class="lineno"><a class="line" href="structhttp__message.html"> 4233</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structhttp__message.html">http_message</a> {</div><div class="line"><a name="l04234"></a><span class="lineno"><a class="line" href="structhttp__message_a005f4310b3d6f7f2c818e4dff1c81d10.html#a005f4310b3d6f7f2c818e4dff1c81d10"> 4234</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> message; <span class="comment">/* Whole message: request line + headers + body */</span></div><div class="line"><a name="l04235"></a><span class="lineno"><a class="line" href="structhttp__message_ab2e0f6d6abe3879d9f85238ae9c10fd5.html#ab2e0f6d6abe3879d9f85238ae9c10fd5"> 4235</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> body;    <span class="comment">/* Message body. 0-length for requests with no body */</span></div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;  <span class="comment">/* HTTP Request line (or HTTP response line) */</span></div><div class="line"><a name="l04238"></a><span class="lineno"><a class="line" href="structhttp__message_a446deffe0f2da170fb9216fd5c8812d2.html#a446deffe0f2da170fb9216fd5c8812d2"> 4238</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> method; <span class="comment">/* &quot;GET&quot; */</span></div><div class="line"><a name="l04239"></a><span class="lineno"><a class="line" href="structhttp__message_a2f8d9e674965443571fd6e581393dd62.html#a2f8d9e674965443571fd6e581393dd62"> 4239</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> uri;    <span class="comment">/* &quot;/my_file.html&quot; */</span></div><div class="line"><a name="l04240"></a><span class="lineno"><a class="line" href="structhttp__message_aafd1525884e7c83d781d86c063ec1f4f.html#aafd1525884e7c83d781d86c063ec1f4f"> 4240</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> proto;  <span class="comment">/* &quot;HTTP/1.1&quot; -- for both request and response */</span></div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  <span class="comment">/* For responses, code and response status message are set */</span></div><div class="line"><a name="l04243"></a><span class="lineno"><a class="line" href="structhttp__message_a1c4e12c873f1e4d9711d470e2e32fa65.html#a1c4e12c873f1e4d9711d470e2e32fa65"> 4243</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structhttp__message_a1c4e12c873f1e4d9711d470e2e32fa65.html#a1c4e12c873f1e4d9711d470e2e32fa65">resp_code</a>;</div><div class="line"><a name="l04244"></a><span class="lineno"><a class="line" href="structhttp__message_ae819bf6100f781e15515c01bf03f5a76.html#ae819bf6100f781e15515c01bf03f5a76"> 4244</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> resp_status_msg;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;<span class="comment">   * Query-string part of the URI. For example, for HTTP request</span></div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;<span class="comment">   *    GET /foo/bar?param1=val1&amp;param2=val2</span></div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;<span class="comment">   *    |    uri    |     query_string     |</span></div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;<span class="comment">   * Note that question mark character doesn&#39;t belong neither to the uri,</span></div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;<span class="comment">   * nor to the query_string</span></div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04254"></a><span class="lineno"><a class="line" href="structhttp__message_a899c4cefcdda3ba4fbafcfb05a85bba5.html#a899c4cefcdda3ba4fbafcfb05a85bba5"> 4254</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> query_string;</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;  <span class="comment">/* Headers */</span></div><div class="line"><a name="l04257"></a><span class="lineno"><a class="line" href="structhttp__message_ad0a1f9898353bfcc80ab7f2f0a22adb0.html#ad0a1f9898353bfcc80ab7f2f0a22adb0"> 4257</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> header_names[<a class="code" href="mongoose_8h_a12ec0f9dfd1ce08498bb2aeed8a80d40.html#a12ec0f9dfd1ce08498bb2aeed8a80d40">MG_MAX_HTTP_HEADERS</a>];</div><div class="line"><a name="l04258"></a><span class="lineno"><a class="line" href="structhttp__message_a95a0bfefd3a05bb3db52ce50a2ef71f4.html#a95a0bfefd3a05bb3db52ce50a2ef71f4"> 4258</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> header_values[<a class="code" href="mongoose_8h_a12ec0f9dfd1ce08498bb2aeed8a80d40.html#a12ec0f9dfd1ce08498bb2aeed8a80d40">MG_MAX_HTTP_HEADERS</a>];</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;};</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_WEBSOCKET</span></div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;<span class="comment">/* WebSocket message */</span></div><div class="line"><a name="l04263"></a><span class="lineno"><a class="line" href="structwebsocket__message.html"> 4263</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structwebsocket__message.html">websocket_message</a> {</div><div class="line"><a name="l04264"></a><span class="lineno"><a class="line" href="structwebsocket__message_aeb8922c34831455b764d83083ae39968.html#aeb8922c34831455b764d83083ae39968"> 4264</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structwebsocket__message_aeb8922c34831455b764d83083ae39968.html#aeb8922c34831455b764d83083ae39968">data</a>;</div><div class="line"><a name="l04265"></a><span class="lineno"><a class="line" href="structwebsocket__message_af7ae89c0cba9566b64a47d40c5ea700a.html#af7ae89c0cba9566b64a47d40c5ea700a"> 4265</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structwebsocket__message_af7ae89c0cba9566b64a47d40c5ea700a.html#af7ae89c0cba9566b64a47d40c5ea700a">size</a>;</div><div class="line"><a name="l04266"></a><span class="lineno"><a class="line" href="structwebsocket__message_a72b32c83b4a065faac7ae28802a5adf1.html#a72b32c83b4a065faac7ae28802a5adf1"> 4266</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structwebsocket__message_a72b32c83b4a065faac7ae28802a5adf1.html#a72b32c83b4a065faac7ae28802a5adf1">flags</a>;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;};</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;<span class="comment">/* HTTP multipart part */</span></div><div class="line"><a name="l04271"></a><span class="lineno"><a class="line" href="structmg__http__multipart__part.html"> 4271</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__http__multipart__part.html">mg_http_multipart_part</a> {</div><div class="line"><a name="l04272"></a><span class="lineno"><a class="line" href="structmg__http__multipart__part_a838efa2eb99ad6cecd6ae714d4775091.html#a838efa2eb99ad6cecd6ae714d4775091"> 4272</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__http__multipart__part_a838efa2eb99ad6cecd6ae714d4775091.html#a838efa2eb99ad6cecd6ae714d4775091">file_name</a>;</div><div class="line"><a name="l04273"></a><span class="lineno"><a class="line" href="structmg__http__multipart__part_af3c6e9825e31f000ec9e26c016eaa707.html#af3c6e9825e31f000ec9e26c016eaa707"> 4273</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__http__multipart__part_af3c6e9825e31f000ec9e26c016eaa707.html#af3c6e9825e31f000ec9e26c016eaa707">var_name</a>;</div><div class="line"><a name="l04274"></a><span class="lineno"><a class="line" href="structmg__http__multipart__part_a803db4feee24a462665d487acbeb1953.html#a803db4feee24a462665d487acbeb1953"> 4274</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> data;</div><div class="line"><a name="l04275"></a><span class="lineno"><a class="line" href="structmg__http__multipart__part_a728d1246c153ef43fb1f821bee61925a.html#a728d1246c153ef43fb1f821bee61925a"> 4275</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__http__multipart__part_a728d1246c153ef43fb1f821bee61925a.html#a728d1246c153ef43fb1f821bee61925a">status</a>; <span class="comment">/* &lt;0 on error */</span></div><div class="line"><a name="l04276"></a><span class="lineno"><a class="line" href="structmg__http__multipart__part_ab0c10748e6a40d9c85b4ec0ac98047bd.html#ab0c10748e6a40d9c85b4ec0ac98047bd"> 4276</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__http__multipart__part_ab0c10748e6a40d9c85b4ec0ac98047bd.html#ab0c10748e6a40d9c85b4ec0ac98047bd">user_data</a>;</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;};</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;<span class="comment">/* SSI call context */</span></div><div class="line"><a name="l04280"></a><span class="lineno"><a class="line" href="structmg__ssi__call__ctx.html"> 4280</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__ssi__call__ctx.html">mg_ssi_call_ctx</a> {</div><div class="line"><a name="l04281"></a><span class="lineno"><a class="line" href="structmg__ssi__call__ctx_ae4f6225598743855f1da5103a5640302.html#ae4f6225598743855f1da5103a5640302"> 4281</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhttp__message.html">http_message</a> *<a class="code" href="structmg__ssi__call__ctx_ae4f6225598743855f1da5103a5640302.html#ae4f6225598743855f1da5103a5640302">req</a>; <span class="comment">/* The request being processed. */</span></div><div class="line"><a name="l04282"></a><span class="lineno"><a class="line" href="structmg__ssi__call__ctx_a87af9ab75f5b51b3c2237d20138dfda6.html#a87af9ab75f5b51b3c2237d20138dfda6"> 4282</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> file;       <span class="comment">/* Filesystem path of the file being processed. */</span></div><div class="line"><a name="l04283"></a><span class="lineno"><a class="line" href="structmg__ssi__call__ctx_a203dc7c3db2fe470b099ed54e5a0bfbf.html#a203dc7c3db2fe470b099ed54e5a0bfbf"> 4283</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> arg; <span class="comment">/* The argument passed to the tag: &lt;!-- call arg --&gt;. */</span></div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;};</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;<span class="comment">/* HTTP and websocket events. void *ev_data is described in a comment. */</span></div><div class="line"><a name="l04287"></a><span class="lineno"><a class="line" href="mongoose_8h_affe184a142dedbd430516fa7f3e8c970.html#affe184a142dedbd430516fa7f3e8c970"> 4287</a></span>&#160;<span class="preprocessor">#define MG_EV_HTTP_REQUEST 100 </span><span class="comment">/* struct http_message * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04288"></a><span class="lineno"><a class="line" href="mongoose_8h_ab3565c05e1941650e0a28e79103e72bb.html#ab3565c05e1941650e0a28e79103e72bb"> 4288</a></span>&#160;<span class="preprocessor">#define MG_EV_HTTP_REPLY 101   </span><span class="comment">/* struct http_message * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04289"></a><span class="lineno"><a class="line" href="mongoose_8h_a8f090e56d549aec4618405ea80fe3823.html#a8f090e56d549aec4618405ea80fe3823"> 4289</a></span>&#160;<span class="preprocessor">#define MG_EV_HTTP_CHUNK 102   </span><span class="comment">/* struct http_message * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04290"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c1af28c35f337bc78315f854fe09de3.html#a4c1af28c35f337bc78315f854fe09de3"> 4290</a></span>&#160;<span class="preprocessor">#define MG_EV_SSI_CALL 105     </span><span class="comment">/* char * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04291"></a><span class="lineno"><a class="line" href="mongoose_8h_a64231e01d6b11e8329a5c0f826188e42.html#a64231e01d6b11e8329a5c0f826188e42"> 4291</a></span>&#160;<span class="preprocessor">#define MG_EV_SSI_CALL_CTX 106 </span><span class="comment">/* struct mg_ssi_call_ctx * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_WEBSOCKET</span></div><div class="line"><a name="l04294"></a><span class="lineno"><a class="line" href="mongoose_8h_af186d20ce452c4d6f1c3ce0ec53456bf.html#af186d20ce452c4d6f1c3ce0ec53456bf"> 4294</a></span>&#160;<span class="preprocessor">#define MG_EV_WEBSOCKET_HANDSHAKE_REQUEST 111 </span><span class="comment">/* struct http_message * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04295"></a><span class="lineno"><a class="line" href="mongoose_8h_a1ba706078e5c831a5d04ba515fd9aa8e.html#a1ba706078e5c831a5d04ba515fd9aa8e"> 4295</a></span>&#160;<span class="preprocessor">#define MG_EV_WEBSOCKET_HANDSHAKE_DONE 112    </span><span class="comment">/* NULL */</span><span class="preprocessor"></span></div><div class="line"><a name="l04296"></a><span class="lineno"><a class="line" href="mongoose_8h_a18bb92a6fd10027cecc0cd482918a227.html#a18bb92a6fd10027cecc0cd482918a227"> 4296</a></span>&#160;<span class="preprocessor">#define MG_EV_WEBSOCKET_FRAME 113             </span><span class="comment">/* struct websocket_message * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04297"></a><span class="lineno"><a class="line" href="mongoose_8h_a3ec207d56a989f98043470da1ea7432f.html#a3ec207d56a989f98043470da1ea7432f"> 4297</a></span>&#160;<span class="preprocessor">#define MG_EV_WEBSOCKET_CONTROL_FRAME 114     </span><span class="comment">/* struct websocket_message * */</span><span class="preprocessor"></span></div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_STREAMING_MULTIPART</span></div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;<span class="preprocessor">#define MG_EV_HTTP_MULTIPART_REQUEST 121 </span><span class="comment">/* struct http_message */</span><span class="preprocessor"></span></div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;<span class="preprocessor">#define MG_EV_HTTP_PART_BEGIN 122        </span><span class="comment">/* struct mg_http_multipart_part */</span><span class="preprocessor"></span></div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;<span class="preprocessor">#define MG_EV_HTTP_PART_DATA 123         </span><span class="comment">/* struct mg_http_multipart_part */</span><span class="preprocessor"></span></div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;<span class="preprocessor">#define MG_EV_HTTP_PART_END 124          </span><span class="comment">/* struct mg_http_multipart_part */</span><span class="preprocessor"></span></div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;<span class="comment">/* struct mg_http_multipart_part */</span></div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;<span class="preprocessor">#define MG_EV_HTTP_MULTIPART_REQUEST_END 125</span></div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;<span class="comment"> * Attaches a built-in HTTP event handler to the given connection.</span></div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;<span class="comment"> * The user-defined event handler will receive following extra events:</span></div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;<span class="comment"> * - MG_EV_HTTP_REQUEST: HTTP request has arrived. Parsed HTTP request</span></div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;<span class="comment"> *  is passed as</span></div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;<span class="comment"> *   `struct http_message` through the handler&#39;s `void *ev_data` pointer.</span></div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;<span class="comment"> * - MG_EV_HTTP_REPLY: The HTTP reply has arrived. The parsed HTTP reply is</span></div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;<span class="comment"> *   passed as `struct http_message` through the handler&#39;s `void *ev_data`</span></div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;<span class="comment"> *   pointer.</span></div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;<span class="comment"> * - MG_EV_HTTP_CHUNK: The HTTP chunked-encoding chunk has arrived.</span></div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;<span class="comment"> *   The parsed HTTP reply is passed as `struct http_message` through the</span></div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;<span class="comment"> *   handler&#39;s `void *ev_data` pointer. `http_message::body` would contain</span></div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="comment"> *   incomplete, reassembled HTTP body.</span></div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;<span class="comment"> *   It will grow with every new chunk that arrives, and it can</span></div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;<span class="comment"> *   potentially consume a lot of memory. An event handler may process</span></div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;<span class="comment"> *   the body as chunks are coming, and signal Mongoose to delete processed</span></div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;<span class="comment"> *   body by setting `MG_F_DELETE_CHUNK` in `mg_connection::flags`. When</span></div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;<span class="comment"> *   the last zero chunk is received,</span></div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;<span class="comment"> *   Mongoose sends `MG_EV_HTTP_REPLY` event with</span></div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;<span class="comment"> *   full reassembled body (if handler did not signal to delete chunks) or</span></div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;<span class="comment"> *   with empty body (if handler did signal to delete chunks).</span></div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;<span class="comment"> * - MG_EV_WEBSOCKET_HANDSHAKE_REQUEST: server has received the WebSocket</span></div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;<span class="comment"> *   handshake request. `ev_data` contains parsed HTTP request.</span></div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;<span class="comment"> * - MG_EV_WEBSOCKET_HANDSHAKE_DONE: server has completed the WebSocket</span></div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;<span class="comment"> *   handshake. `ev_data` is `NULL`.</span></div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;<span class="comment"> * - MG_EV_WEBSOCKET_FRAME: new WebSocket frame has arrived. `ev_data` is</span></div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;<span class="comment"> *   `struct websocket_message *`</span></div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;<span class="comment"> * When compiled with MG_ENABLE_HTTP_STREAMING_MULTIPART, Mongoose parses</span></div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;<span class="comment"> * multipart requests and splits them into separate events:</span></div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;<span class="comment"> * - MG_EV_HTTP_MULTIPART_REQUEST: Start of the request.</span></div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;<span class="comment"> *   This event is sent before body is parsed. After this, the user</span></div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;<span class="comment"> *   should expect a sequence of PART_BEGIN/DATA/END requests.</span></div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;<span class="comment"> *   This is also the last time when headers and other request fields are</span></div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;<span class="comment"> *   accessible.</span></div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;<span class="comment"> * - MG_EV_HTTP_PART_BEGIN: Start of a part of a multipart message.</span></div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;<span class="comment"> *   Argument: mg_http_multipart_part with var_name and file_name set</span></div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;<span class="comment"> *   (if present). No data is passed in this message.</span></div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;<span class="comment"> * - MG_EV_HTTP_PART_DATA: new portion of data from the multipart message.</span></div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;<span class="comment"> *   Argument: mg_http_multipart_part. var_name and file_name are preserved,</span></div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;<span class="comment"> *   data is available in mg_http_multipart_part.data.</span></div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;<span class="comment"> * - MG_EV_HTTP_PART_END: End of the current part. var_name, file_name are</span></div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;<span class="comment"> *   the same, no data in the message. If status is 0, then the part is</span></div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;<span class="comment"> *   properly terminated with a boundary, status &lt; 0 means that connection</span></div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;<span class="comment"> *   was terminated.</span></div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;<span class="comment"> * - MG_EV_HTTP_MULTIPART_REQUEST_END: End of the multipart request.</span></div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;<span class="comment"> *   Argument: mg_http_multipart_part, var_name and file_name are NULL,</span></div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;<span class="comment"> *   status = 0 means request was properly closed, &lt; 0 means connection</span></div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;<span class="comment"> *   was terminated (note: in this case both PART_END and REQUEST_END are</span></div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;<span class="comment"> *   delivered).</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a9f8dc6ab99c0ffe17672edd78c6672be.html#a9f8dc6ab99c0ffe17672edd78c6672be">mg_set_protocol_http_websocket</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_WEBSOCKET</span></div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;<span class="comment"> * Send websocket handshake to the server.</span></div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;<span class="comment"> * `nc` must be a valid connection, connected to a server. `uri` is an URI</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;<span class="comment"> * to fetch, extra_headers` is extra HTTP headers to send or `NULL`.</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;<span class="comment"> * This function is intended to be used by websocket client.</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;<span class="comment"> * Note that the Host header is mandatory in HTTP/1.1 and must be</span></div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;<span class="comment"> * included in `extra_headers`. `mg_send_websocket_handshake2` offers</span></div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;<span class="comment"> * a better API for that.</span></div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;<span class="comment"> * Deprecated in favour of `mg_send_websocket_handshake2`</span></div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ad541c3df7d4e23ab160c9aebc6c4f512.html#ad541c3df7d4e23ab160c9aebc6c4f512">mg_send_websocket_handshake</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *uri,</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers);</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;<span class="comment"> * Send websocket handshake to the server.</span></div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;<span class="comment"> * `nc` must be a valid connection, connected to a server. `uri` is an URI</span></div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;<span class="comment"> * to fetch, `host` goes into the `Host` header, `protocol` goes into the</span></div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;<span class="comment"> * `Sec-WebSocket-Proto` header (NULL to omit), extra_headers` is extra HTTP</span></div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;<span class="comment"> * headers to send or `NULL`.</span></div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;<span class="comment"> * This function is intended to be used by websocket client.</span></div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a7ce4b10e6acbb76ded6a48ca41eefad0.html#a7ce4b10e6acbb76ded6a48ca41eefad0">mg_send_websocket_handshake2</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *host, <span class="keyword">const</span> <span class="keywordtype">char</span> *protocol,</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers);</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;<span class="comment">/* Like mg_send_websocket_handshake2 but also passes basic auth header */</span></div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ad281ec2c88a87500882fb3dffd2d8701.html#ad281ec2c88a87500882fb3dffd2d8701">mg_send_websocket_handshake3</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *host, <span class="keyword">const</span> <span class="keywordtype">char</span> *protocol,</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers, <span class="keyword">const</span> <span class="keywordtype">char</span> *user,</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *pass);</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;<span class="comment">/* Same as mg_send_websocket_handshake3 but with strings not necessarily</span></div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;<span class="comment"> * NUL-temrinated */</span></div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a46f725f5b4a9ae9daaca141579844dfd.html#a46f725f5b4a9ae9daaca141579844dfd">mg_send_websocket_handshake3v</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> path,</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> host,</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> protocol,</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> extra_headers,</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> user,</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> pass);</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;<span class="comment"> * Helper function that creates an outbound WebSocket connection.</span></div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;<span class="comment"> * `url` is a URL to connect to. It must be properly URL-encoded, e.g. have</span></div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;<span class="comment"> * no spaces, etc. By default, `mg_connect_ws()` sends Connection and</span></div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;<span class="comment"> * Host headers. `extra_headers` is an extra HTTP header to send, e.g.</span></div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;<span class="comment"> * `&quot;User-Agent: my-app\r\n&quot;`.</span></div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;<span class="comment"> * If `protocol` is not NULL, then a `Sec-WebSocket-Protocol` header is sent.</span></div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;<span class="comment"> * Examples:</span></div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;<span class="comment"> *   nc1 = mg_connect_ws(mgr, ev_handler_1, &quot;ws://echo.websocket.org&quot;, NULL,</span></div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;<span class="comment"> *                       NULL);</span></div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;<span class="comment"> *   nc2 = mg_connect_ws(mgr, ev_handler_1, &quot;wss://echo.websocket.org&quot;, NULL,</span></div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;<span class="comment"> *                       NULL);</span></div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;<span class="comment"> *   nc3 = mg_connect_ws(mgr, ev_handler_1, &quot;ws://api.cesanta.com&quot;,</span></div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;<span class="comment"> *                       &quot;clubby.cesanta.com&quot;, NULL);</span></div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_aed89d9cc01411bdca562bda37c77b58f.html#aed89d9cc01411bdca562bda37c77b58f">mg_connect_ws</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr,</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;                                    <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> event_handler,</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;                                          <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>),</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *url, <span class="keyword">const</span> <span class="keywordtype">char</span> *protocol,</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers);</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;<span class="comment"> * Helper function that creates an outbound WebSocket connection</span></div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;<span class="comment"> * Mostly identical to `mg_connect_ws`, but allows to provide extra parameters</span></div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;<span class="comment"> * (for example, SSL parameters)</span></div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_a07613513316e3fd2012dc6746ab9898a.html#a07613513316e3fd2012dc6746ab9898a">mg_connect_ws_opt</a>(</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="namespaceTBT_ab2294a8ec1c676b81a8cd10a13a24828.html#ab2294a8ec1c676b81a8cd10a13a24828">ev_handler</a>, <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>),</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__connect__opts.html">mg_connect_opts</a> opts, <span class="keyword">const</span> <span class="keywordtype">char</span> *url, <span class="keyword">const</span> <span class="keywordtype">char</span> *protocol,</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers);</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;<span class="comment"> * Send WebSocket frame to the remote end.</span></div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;<span class="comment"> * `op_and_flags` specifies the frame&#39;s type. It&#39;s one of:</span></div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;<span class="comment"> * - WEBSOCKET_OP_CONTINUE</span></div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;<span class="comment"> * - WEBSOCKET_OP_TEXT</span></div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;<span class="comment"> * - WEBSOCKET_OP_BINARY</span></div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;<span class="comment"> * - WEBSOCKET_OP_CLOSE</span></div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;<span class="comment"> * - WEBSOCKET_OP_PING</span></div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;<span class="comment"> * - WEBSOCKET_OP_PONG</span></div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;<span class="comment"> * Orred with one of the flags:</span></div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;<span class="comment"> * - WEBSOCKET_DONT_FIN: Don&#39;t set the FIN flag on the frame to be sent.</span></div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;<span class="comment"> * `data` and `data_len` contain frame data.</span></div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_acad098986b7ca8b1056601edeb888746.html#acad098986b7ca8b1056601edeb888746">mg_send_websocket_frame</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> op_and_flags,</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> data_len);</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;<span class="comment"> * Sends multiple websocket frames.</span></div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;<span class="comment"> * Like `mg_send_websocket_frame()`, but composes a frame from multiple</span></div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;<span class="comment"> *buffers.</span></div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_aa08250ec322dd7b5ddb7aaae7550116c.html#aa08250ec322dd7b5ddb7aaae7550116c">mg_send_websocket_framev</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> op_and_flags,</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;                              <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *strings, <span class="keywordtype">int</span> num_strings);</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;<span class="comment"> * Sends WebSocket frame to the remote end.</span></div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;<span class="comment"> * Like `mg_send_websocket_frame()`, but allows to create formatted messages</span></div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;<span class="comment"> * with `printf()`-like semantics.</span></div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a8ba0ed8d1d0901fcba91c0615ad50f21.html#a8ba0ed8d1d0901fcba91c0615ad50f21">mg_printf_websocket_frame</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> op_and_flags,</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;<span class="comment">/* Websocket opcodes, from http://tools.ietf.org/html/rfc6455 */</span></div><div class="line"><a name="l04488"></a><span class="lineno"><a class="line" href="mongoose_8h_af6fa0ddf4cf4312672294f74be3018a3.html#af6fa0ddf4cf4312672294f74be3018a3"> 4488</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_OP_CONTINUE 0</span></div><div class="line"><a name="l04489"></a><span class="lineno"><a class="line" href="mongoose_8h_a731c44893bf7d4a94ccea7c1fb448449.html#a731c44893bf7d4a94ccea7c1fb448449"> 4489</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_OP_TEXT 1</span></div><div class="line"><a name="l04490"></a><span class="lineno"><a class="line" href="mongoose_8h_afdc51a4a1aca89dbf91620a4ff96bb22.html#afdc51a4a1aca89dbf91620a4ff96bb22"> 4490</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_OP_BINARY 2</span></div><div class="line"><a name="l04491"></a><span class="lineno"><a class="line" href="mongoose_8h_a35774a6aa1911d096e9f9e66eb16a1b1.html#a35774a6aa1911d096e9f9e66eb16a1b1"> 4491</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_OP_CLOSE 8</span></div><div class="line"><a name="l04492"></a><span class="lineno"><a class="line" href="mongoose_8h_a08c4f979d64eea3a5344035e76d01f00.html#a08c4f979d64eea3a5344035e76d01f00"> 4492</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_OP_PING 9</span></div><div class="line"><a name="l04493"></a><span class="lineno"><a class="line" href="mongoose_8h_a649ce751b34e57ac445ba7290ad06132.html#a649ce751b34e57ac445ba7290ad06132"> 4493</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_OP_PONG 10</span></div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;<span class="comment"> * If set causes the FIN flag to not be set on outbound</span></div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;<span class="comment"> * frames. This enables sending multiple fragments of a single</span></div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;<span class="comment"> * logical message.</span></div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;<span class="comment"> * The WebSocket protocol mandates that if the FIN flag of a data</span></div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;<span class="comment"> * frame is not set, the next frame must be a WEBSOCKET_OP_CONTINUE.</span></div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;<span class="comment"> * The last frame must have the FIN bit set.</span></div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;<span class="comment"> * Note that mongoose will automatically defragment incoming messages,</span></div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;<span class="comment"> * so this flag is used only on outbound messages.</span></div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04507"></a><span class="lineno"><a class="line" href="mongoose_8h_a051224bbd25f707d1c92593d663e1371.html#a051224bbd25f707d1c92593d663e1371"> 4507</a></span>&#160;<span class="preprocessor">#define WEBSOCKET_DONT_FIN 0x100</span></div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_HTTP_WEBSOCKET */</span><span class="preprocessor"></span></div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;<span class="comment"> * Decodes a URL-encoded string.</span></div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;<span class="comment"> * Source string is specified by (`src`, `src_len`), and destination is</span></div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;<span class="comment"> * (`dst`, `dst_len`). If `is_form_url_encoded` is non-zero, then</span></div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;<span class="comment"> * `+` character is decoded as a blank space character. This function</span></div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;<span class="comment"> * guarantees to NUL-terminate the destination. If destination is too small,</span></div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;<span class="comment"> * then the source string is partially decoded and `-1` is returned.</span></div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;<span class="comment"> *Otherwise,</span></div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;<span class="comment"> * a length of the decoded string is returned, not counting final NUL.</span></div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aa588727712fe512035b7b76ad0b29b06.html#aa588727712fe512035b7b76ad0b29b06">mg_url_decode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">int</span> src_len, <span class="keywordtype">char</span> *dst, <span class="keywordtype">int</span> dst_len,</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;                  <span class="keywordtype">int</span> is_form_url_encoded);</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mongoose_8h_abe1edc7ce2a347318aac5bb0fb91c163.html#abe1edc7ce2a347318aac5bb0fb91c163">mg_hash_md5_v</a>(<span class="keywordtype">size_t</span> num_msgs, <span class="keyword">const</span> uint8_t *msgs[],</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">size_t</span> *msg_lens, uint8_t *digest);</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a411376e1a1915ab6c7ce6f8212adebb5.html#a411376e1a1915ab6c7ce6f8212adebb5">mg_hash_sha1_v</a>(<span class="keywordtype">size_t</span> num_msgs, <span class="keyword">const</span> uint8_t *msgs[],</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">size_t</span> *msg_lens, uint8_t *digest);</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;}</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_HTTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_HTTP_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/http_server.h&quot;</span></div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;<span class="comment"> * === Server API reference</span></div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_HTTP_SERVER_H_</span></div><div class="line"><a name="l04545"></a><span class="lineno"><a class="line" href="mongoose_8h_ac38eec6938b2fa6c1fc74b57e2391f42.html#ac38eec6938b2fa6c1fc74b57e2391f42"> 4545</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_HTTP_SERVER_H_</span></div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP</span></div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;<span class="comment"> * Parses a HTTP message.</span></div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;<span class="comment"> * `is_req` should be set to 1 if parsing a request, 0 if reply.</span></div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;<span class="comment"> * Returns the number of bytes parsed. If HTTP message is</span></div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;<span class="comment"> * incomplete `0` is returned. On parse error, a negative number is returned.</span></div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a491a8389c337a0b86153dfabfde2930c.html#a491a8389c337a0b86153dfabfde2930c">mg_parse_http</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> n, <span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm, <span class="keywordtype">int</span> is_req);</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;<span class="comment"> * Searches and returns the header `name` in parsed HTTP message `hm`.</span></div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;<span class="comment"> * If header is not found, NULL is returned. Example:</span></div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;<span class="comment"> *     struct mg_str *host_hdr = mg_get_http_header(hm, &quot;Host&quot;);</span></div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> *<a class="code" href="mongoose_8h_a3d93bd313a02285ccd37773aba1beeb5.html#a3d93bd313a02285ccd37773aba1beeb5">mg_get_http_header</a>(<span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm, <span class="keyword">const</span> <span class="keywordtype">char</span> *name);</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;<span class="comment"> * Parses the HTTP header `hdr`. Finds variable `var_name` and stores its value</span></div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;<span class="comment"> * in the buffer `buf`, `buf_size`. Returns 0 if variable not found, non-zero</span></div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;<span class="comment"> * otherwise.</span></div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;<span class="comment"> * This function is supposed to parse cookies, authentication headers, etc.</span></div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;<span class="comment"> * Example (error handling omitted):</span></div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;<span class="comment"> *     char user[20];</span></div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;<span class="comment"> *     struct mg_str *hdr = mg_get_http_header(hm, &quot;Authorization&quot;);</span></div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;<span class="comment"> *     mg_http_parse_header(hdr, &quot;username&quot;, user, sizeof(user));</span></div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;<span class="comment"> * Returns the length of the variable&#39;s value. If buffer is not large enough,</span></div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;<span class="comment"> * or variable not found, 0 is returned.</span></div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ad2749ecf09e951753f13583a47336bed.html#ad2749ecf09e951753f13583a47336bed">mg_http_parse_header</a>(<span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *hdr, <span class="keyword">const</span> <span class="keywordtype">char</span> *var_name, <span class="keywordtype">char</span> *buf,</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;                         <span class="keywordtype">size_t</span> buf_size);</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;<span class="comment"> * Gets and parses the Authorization: Basic header</span></div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;<span class="comment"> * Returns -1 if no Authorization header is found, or if</span></div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;<span class="comment"> * mg_parse_http_basic_auth</span></div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;<span class="comment"> * fails parsing the resulting header.</span></div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a3481a6b79218165d9332e7856f6916fa.html#a3481a6b79218165d9332e7856f6916fa">mg_get_http_basic_auth</a>(<span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm, <span class="keywordtype">char</span> *user, <span class="keywordtype">size_t</span> user_len,</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;                           <span class="keywordtype">char</span> *pass, <span class="keywordtype">size_t</span> pass_len);</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;<span class="comment"> * Parses the Authorization: Basic header</span></div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;<span class="comment"> * Returns -1 iif the authorization type is not &quot;Basic&quot; or any other error such</span></div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;<span class="comment"> * as incorrectly encoded base64 user password pair.</span></div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a38631bcf9f50213200764415341c59b0.html#a38631bcf9f50213200764415341c59b0">mg_parse_http_basic_auth</a>(<span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *hdr, <span class="keywordtype">char</span> *user, <span class="keywordtype">size_t</span> user_len,</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;                             <span class="keywordtype">char</span> *pass, <span class="keywordtype">size_t</span> pass_len);</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;<span class="comment"> * Parses the buffer `buf`, `buf_len` that contains multipart form data chunks.</span></div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;<span class="comment"> * Stores the chunk name in a `var_name`, `var_name_len` buffer.</span></div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;<span class="comment"> * If a chunk is an uploaded file, then `file_name`, `file_name_len` is</span></div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;<span class="comment"> * filled with an uploaded file name. `chunk`, `chunk_len`</span></div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;<span class="comment"> * points to the chunk data.</span></div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;<span class="comment"> * Return: number of bytes to skip to the next chunk or 0 if there are</span></div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;<span class="comment"> *         no more chunks.</span></div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;<span class="comment"> * Usage example:</span></div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;<span class="comment"> *    static void ev_handler(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;<span class="comment"> *      switch(ev) {</span></div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;<span class="comment"> *        case MG_EV_HTTP_REQUEST: {</span></div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;<span class="comment"> *          struct http_message *hm = (struct http_message *) ev_data;</span></div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;<span class="comment"> *          char var_name[100], file_name[100];</span></div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;<span class="comment"> *          const char *chunk;</span></div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;<span class="comment"> *          size_t chunk_len, n1, n2;</span></div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;<span class="comment"> *          n1 = n2 = 0;</span></div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;<span class="comment"> *          while ((n2 = mg_parse_multipart(hm-&gt;body.p + n1,</span></div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;<span class="comment"> *                                          hm-&gt;body.len - n1,</span></div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;<span class="comment"> *                                          var_name, sizeof(var_name),</span></div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;<span class="comment"> *                                          file_name, sizeof(file_name),</span></div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;<span class="comment"> *                                          &amp;chunk, &amp;chunk_len)) &gt; 0) {</span></div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;<span class="comment"> *            printf(&quot;var: %s, file_name: %s, size: %d, chunk: [%.*s]\n&quot;,</span></div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;<span class="comment"> *                   var_name, file_name, (int) chunk_len,</span></div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;<span class="comment"> *                   (int) chunk_len, chunk);</span></div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;<span class="comment"> *            n1 += n2;</span></div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;<span class="comment"> *          }</span></div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;<span class="comment"> *        }</span></div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;<span class="comment"> *        break;</span></div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mongoose_8h_a29203c832b21ea3e7af11f374e2eccbd.html#a29203c832b21ea3e7af11f374e2eccbd">mg_parse_multipart</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> buf_len, <span class="keywordtype">char</span> *var_name,</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;                          <span class="keywordtype">size_t</span> var_name_len, <span class="keywordtype">char</span> *file_name,</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;                          <span class="keywordtype">size_t</span> file_name_len, <span class="keyword">const</span> <span class="keywordtype">char</span> **chunk,</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;                          <span class="keywordtype">size_t</span> *chunk_len);</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;<span class="comment"> * Fetches a HTTP form variable.</span></div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;<span class="comment"> * Fetches a variable `name` from a `buf` into a buffer specified by `dst`,</span></div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;<span class="comment"> * `dst_len`. The destination is always zero-terminated. Returns the length of</span></div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;<span class="comment"> * a fetched variable. If not found, 0 is returned. `buf` must be valid</span></div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;<span class="comment"> * url-encoded buffer. If destination is too small or an error occured,</span></div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;<span class="comment"> * negative number is returned.</span></div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ad48bda7f453ecfd8ee745380ed247b9f.html#ad48bda7f453ecfd8ee745380ed247b9f">mg_get_http_var</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *buf, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> *dst,</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;                    <span class="keywordtype">size_t</span> dst_len);</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;<span class="preprocessor">#if MG_ENABLE_FILESYSTEM</span></div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;<span class="comment"> * This structure defines how `mg_serve_http()` works.</span></div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;<span class="comment"> * Best practice is to set only required settings, and leave the rest as NULL.</span></div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;<span class="keyword">struct </span>mg_serve_http_opts {</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;  <span class="comment">/* Path to web root directory */</span></div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *document_root;</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;  <span class="comment">/* List of index files. Default is &quot;&quot; */</span></div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *index_files;</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;<span class="comment">   * Leave as NULL to disable authentication.</span></div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;<span class="comment">   * To enable directory protection with authentication, set this to &quot;.htpasswd&quot;</span></div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;<span class="comment">   * Then, creating &quot;.htpasswd&quot; file in any directory automatically protects</span></div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;<span class="comment">   * it with digest authentication.</span></div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;<span class="comment">   * Use `mongoose` web server binary, or `htdigest` Apache utility to</span></div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;<span class="comment">   * create/manipulate passwords file.</span></div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;<span class="comment">   * Make sure `auth_domain` is set to a valid domain name.</span></div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *per_directory_auth_file;</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;  <span class="comment">/* Authorization domain (domain name of this web server) */</span></div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *auth_domain;</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;<span class="comment">   * Leave as NULL to disable authentication.</span></div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;<span class="comment">   * Normally, only selected directories in the document root are protected.</span></div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;<span class="comment">   * If absolutely every access to the web server needs to be authenticated,</span></div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;<span class="comment">   * regardless of the URI, set this option to the path to the passwords file.</span></div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;<span class="comment">   * Format of that file is the same as &quot;.htpasswd&quot; file. Make sure that file</span></div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;<span class="comment">   * is located outside document root to prevent people fetching it.</span></div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *global_auth_file;</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  <span class="comment">/* Set to &quot;no&quot; to disable directory listing. Enabled by default. */</span></div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *enable_directory_listing;</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;<span class="comment">   * SSI files pattern. If not set, &quot;**.shtml$|**.shtm$&quot; is used.</span></div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;<span class="comment">   * All files that match ssi_pattern are treated as SSI.</span></div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;<span class="comment">   * Server Side Includes (SSI) is a simple interpreted server-side scripting</span></div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;<span class="comment">   * language which is most commonly used to include the contents of a file</span></div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;<span class="comment">   * into a web page. It can be useful when it is desirable to include a common</span></div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;<span class="comment">   * piece of code throughout a website, for example, headers and footers.</span></div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;<span class="comment">   * In order for a webpage to recognize an SSI-enabled HTML file, the</span></div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;<span class="comment">   * filename should end with a special extension, by default the extension</span></div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;<span class="comment">   * should be either .shtml or .shtm</span></div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;<span class="comment">   * Unknown SSI directives are silently ignored by Mongoose. Currently,</span></div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;<span class="comment">   * the following SSI directives are supported:</span></div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;<span class="comment">   *    &amp;lt;!--#include FILE_TO_INCLUDE --&amp;gt;</span></div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;<span class="comment">   *    &amp;lt;!--#exec &quot;COMMAND_TO_EXECUTE&quot; --&amp;gt;</span></div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;<span class="comment">   *    &amp;lt;!--#call COMMAND --&amp;gt;</span></div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;<span class="comment">   * Note that &amp;lt;!--#include ...&gt; directive supports three path</span></div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;<span class="comment">   *specifications:</span></div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;<span class="comment">   * &amp;lt;!--#include virtual=&quot;path&quot; --&amp;gt;  Path is relative to web server root</span></div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;<span class="comment">   * &amp;lt;!--#include abspath=&quot;path&quot; --&amp;gt;  Path is absolute or relative to the</span></div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;<span class="comment">   *                                  web server working dir</span></div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;<span class="comment">   * &amp;lt;!--#include file=&quot;path&quot; --&amp;gt;,    Path is relative to current document</span></div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;<span class="comment">   * &amp;lt;!--#include &quot;path&quot; --&amp;gt;</span></div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;<span class="comment">   * The include directive may be used to include the contents of a file or</span></div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;<span class="comment">   * the result of running a CGI script.</span></div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;<span class="comment">   * The exec directive is used to execute</span></div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;<span class="comment">   * a command on a server, and show command&#39;s output. Example:</span></div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;<span class="comment">   * &amp;lt;!--#exec &quot;ls -l&quot; --&amp;gt;</span></div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;<span class="comment">   * The call directive is a way to invoke a C handler from the HTML page.</span></div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;<span class="comment">   * On each occurence of &amp;lt;!--#call COMMAND OPTIONAL_PARAMS&gt; directive,</span></div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;<span class="comment">   * Mongoose calls a registered event handler with MG_EV_SSI_CALL event,</span></div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;<span class="comment">   * and event parameter will point to the COMMAND OPTIONAL_PARAMS string.</span></div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;<span class="comment">   * An event handler can output any text, for example by calling</span></div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;<span class="comment">   * `mg_printf()`. This is a flexible way of generating a web page on</span></div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;<span class="comment">   * server side by calling a C event handler. Example:</span></div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;<span class="comment">   * &amp;lt;!--#call foo --&amp;gt; ... &amp;lt;!--#call bar --&amp;gt;</span></div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;<span class="comment">   * In the event handler:</span></div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;<span class="comment">   *    case MG_EV_SSI_CALL: {</span></div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;<span class="comment">   *      const char *param = (const char *) ev_data;</span></div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;<span class="comment">   *      if (strcmp(param, &quot;foo&quot;) == 0) {</span></div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;<span class="comment">   *        mg_printf(c, &quot;hello from foo&quot;);</span></div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;<span class="comment">   *      } else if (strcmp(param, &quot;bar&quot;) == 0) {</span></div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;<span class="comment">   *        mg_printf(c, &quot;hello from bar&quot;);</span></div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;<span class="comment">   *      }</span></div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;<span class="comment">   *      break;</span></div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;<span class="comment">   *    }</span></div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ssi_pattern;</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;  <span class="comment">/* IP ACL. By default, NULL, meaning all IPs are allowed to connect */</span></div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *ip_acl;</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_URL_REWRITES</span></div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;  <span class="comment">/* URL rewrites.</span></div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;<span class="comment">   * Comma-separated list of `uri_pattern=url_file_or_directory_path` rewrites.</span></div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;<span class="comment">   * When HTTP request is received, Mongoose constructs a file name from the</span></div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;<span class="comment">   * requested URI by combining `document_root` and the URI. However, if the</span></div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;<span class="comment">   * rewrite option is used and `uri_pattern` matches requested URI, then</span></div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;<span class="comment">   * `document_root` is ignored. Instead, `url_file_or_directory_path` is used,</span></div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;<span class="comment">   * which should be a full path name or a path relative to the web server&#39;s</span></div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;<span class="comment">   * current working directory. It can also be an URI (http:// or https://)</span></div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;<span class="comment">   * in which case mongoose will behave as a reverse proxy for that destination.</span></div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;<span class="comment">   * Note that `uri_pattern`, as all Mongoose patterns, is a prefix pattern.</span></div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;<span class="comment">   * If uri_pattern starts with `@` symbol, then Mongoose compares it with the</span></div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;<span class="comment">   * HOST header of the request. If they are equal, Mongoose sets document root</span></div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;<span class="comment">   * to `file_or_directory_path`, implementing virtual hosts support.</span></div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;<span class="comment">   * Example: `@foo.com=/document/root/for/foo.com`</span></div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;<span class="comment">   * If `uri_pattern` starts with `%` symbol, then Mongoose compares it with</span></div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;<span class="comment">   * the listening port. If they match, then Mongoose issues a 301 redirect.</span></div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;<span class="comment">   * For example, to redirect all HTTP requests to the</span></div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;<span class="comment">   * HTTPS port, do `%80=https://my.site.com`. Note that the request URI is</span></div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;<span class="comment">   * automatically appended to the redirect location.</span></div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *url_rewrites;</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;  <span class="comment">/* DAV document root. If NULL, DAV requests are going to fail. */</span></div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *dav_document_root;</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;<span class="comment">   * DAV passwords file. If NULL, DAV requests are going to fail.</span></div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;<span class="comment">   * If passwords file is set to &quot;-&quot;, then DAV auth is disabled.</span></div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *dav_auth_file;</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;  <span class="comment">/* Glob pattern for the files to hide. */</span></div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *hidden_file_pattern;</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;  <span class="comment">/* Set to non-NULL to enable CGI, e.g. **.cgi$|**.php$&quot; */</span></div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *cgi_file_pattern;</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;  <span class="comment">/* If not NULL, ignore CGI script hashbang and use this interpreter */</span></div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *cgi_interpreter;</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;<span class="comment">   * Comma-separated list of Content-Type overrides for path suffixes, e.g.</span></div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;<span class="comment">   * &quot;.txt=text/plain; charset=utf-8,.c=text/plain&quot;</span></div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *custom_mime_types;</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;<span class="comment">   * Extra HTTP headers to add to each server response.</span></div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;<span class="comment">   * Example: to enable CORS, set this to &quot;Access-Control-Allow-Origin: *&quot;.</span></div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers;</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;};</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;<span class="comment"> * Serves given HTTP request according to the `options`.</span></div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;<span class="comment"> * Example code snippet:</span></div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;<span class="comment"> * static void ev_handler(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;<span class="comment"> *   struct http_message *hm = (struct http_message *) ev_data;</span></div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;<span class="comment"> *   struct mg_serve_http_opts opts = { .document_root = &quot;/var/www&quot; };  // C99</span></div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;<span class="comment"> *   switch (ev) {</span></div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;<span class="comment"> *     case MG_EV_HTTP_REQUEST:</span></div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;<span class="comment"> *       mg_serve_http(nc, hm, opts);</span></div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;<span class="comment"> *       break;</span></div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;<span class="comment"> *     default:</span></div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;<span class="comment"> *       break;</span></div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;<span class="comment"> *   }</span></div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;<span class="keywordtype">void</span> mg_serve_http(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm,</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;                   <span class="keyword">struct</span> mg_serve_http_opts opts);</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;<span class="comment"> * Serves a specific file with a given MIME type and optional extra headers.</span></div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;<span class="comment"> * Example code snippet:</span></div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;<span class="comment"> * static void ev_handler(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;<span class="comment"> *   switch (ev) {</span></div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;<span class="comment"> *     case MG_EV_HTTP_REQUEST: {</span></div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;<span class="comment"> *       struct http_message *hm = (struct http_message *) ev_data;</span></div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;<span class="comment"> *       mg_http_serve_file(nc, hm, &quot;file.txt&quot;,</span></div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;<span class="comment"> *                          mg_mk_str(&quot;text/plain&quot;), mg_mk_str(&quot;&quot;));</span></div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;<span class="comment"> *       break;</span></div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;<span class="comment"> *     }</span></div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;<span class="comment"> *     ...</span></div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;<span class="comment"> *   }</span></div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;<span class="keywordtype">void</span> mg_http_serve_file(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm,</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> mime_type,</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;                        <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> extra_headers);</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_STREAMING_MULTIPART</span></div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;<span class="comment">/* Callback prototype for `mg_file_upload_handler()`. */</span></div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> (*mg_fu_fname_fn)(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;                                        <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> fname);</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;<span class="comment"> * File upload handler.</span></div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;<span class="comment"> * This handler can be used to implement file uploads with minimum code.</span></div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;<span class="comment"> * This handler will process MG_EV_HTTP_PART_* events and store file data into</span></div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;<span class="comment"> * a local file.</span></div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;<span class="comment"> * `local_name_fn` will be invoked with whatever name was provided by the client</span></div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;<span class="comment"> * and will expect the name of the local file to open. A return value of NULL</span></div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;<span class="comment"> * will abort file upload (client will get a &quot;403 Forbidden&quot; response). If</span></div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;<span class="comment"> * non-null, the returned string must be heap-allocated and will be freed by</span></div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;<span class="comment"> * the caller.</span></div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;<span class="comment"> * Exception: it is ok to return the same string verbatim.</span></div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;<span class="comment"> * Example:</span></div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;<span class="comment"> * struct mg_str upload_fname(struct mg_connection *nc, struct mg_str fname) {</span></div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;<span class="comment"> *   // Just return the same filename. Do not actually do this except in test!</span></div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;<span class="comment"> *   // fname is user-controlled and needs to be sanitized.</span></div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;<span class="comment"> *   return fname;</span></div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;<span class="comment"> * void ev_handler(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;<span class="comment"> *   switch (ev) {</span></div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;<span class="comment"> *     ...</span></div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;<span class="comment"> *     case MG_EV_HTTP_PART_BEGIN:</span></div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;<span class="comment"> *     case MG_EV_HTTP_PART_DATA:</span></div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;<span class="comment"> *     case MG_EV_HTTP_PART_END:</span></div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;<span class="comment"> *       mg_file_upload_handler(nc, ev, ev_data, upload_fname);</span></div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;<span class="comment"> *       break;</span></div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;<span class="comment"> *   }</span></div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;<span class="keywordtype">void</span> mg_file_upload_handler(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> ev, <span class="keywordtype">void</span> *ev_data,</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;                            mg_fu_fname_fn local_name_fn</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;                                <a class="code" href="mongoose_8h_a38d833c3c352508abac7aa3ae0def23f.html#a38d833c3c352508abac7aa3ae0def23f">MG_UD_ARG</a>(<span class="keywordtype">void</span> *user_data));</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_HTTP_STREAMING_MULTIPART */</span><span class="preprocessor"></span></div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_FILESYSTEM */</span><span class="preprocessor"></span></div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;<span class="comment"> * Registers a callback for a specified http endpoint</span></div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;<span class="comment"> * Note: if callback is registered it is called instead of the</span></div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;<span class="comment"> * callback provided in mg_bind</span></div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;<span class="comment"> * Example code snippet:</span></div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;<span class="comment"> * static void handle_hello1(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;<span class="comment"> *   (void) ev; (void) ev_data;</span></div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;<span class="comment"> *   mg_printf(nc, &quot;HTTP/1.0 200 OK\r\n\r\n[I am Hello1]&quot;);</span></div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;<span class="comment"> *  nc-&gt;flags |= MG_F_SEND_AND_CLOSE;</span></div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;<span class="comment"> * static void handle_hello2(struct mg_connection *nc, int ev, void *ev_data) {</span></div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;<span class="comment"> *  (void) ev; (void) ev_data;</span></div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;<span class="comment"> *   mg_printf(nc, &quot;HTTP/1.0 200 OK\r\n\r\n[I am Hello2]&quot;);</span></div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;<span class="comment"> *  nc-&gt;flags |= MG_F_SEND_AND_CLOSE;</span></div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;<span class="comment"> * void init() {</span></div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;<span class="comment"> *   nc = mg_bind(&amp;mgr, local_addr, cb1);</span></div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;<span class="comment"> *   mg_register_http_endpoint(nc, &quot;/hello1&quot;, handle_hello1);</span></div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;<span class="comment"> *   mg_register_http_endpoint(nc, &quot;/hello1/hello2&quot;, handle_hello2);</span></div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a55f8f83c2fd984700206ece02df64968.html#a55f8f83c2fd984700206ece02df64968">mg_register_http_endpoint</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *uri_path,</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;                               <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> handler,</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;                                     <span class="keywordtype">void</span> *user_data));</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;</div><div class="line"><a name="l04941"></a><span class="lineno"><a class="line" href="structmg__http__endpoint__opts.html"> 4941</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__http__endpoint__opts.html">mg_http_endpoint_opts</a> {</div><div class="line"><a name="l04942"></a><span class="lineno"><a class="line" href="structmg__http__endpoint__opts_acdb6a63492d91f7e1c4f34242ba6be1d.html#acdb6a63492d91f7e1c4f34242ba6be1d"> 4942</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__http__endpoint__opts_acdb6a63492d91f7e1c4f34242ba6be1d.html#acdb6a63492d91f7e1c4f34242ba6be1d">user_data</a>;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;  <span class="comment">/* Authorization domain (realm) */</span></div><div class="line"><a name="l04944"></a><span class="lineno"><a class="line" href="structmg__http__endpoint__opts_a5af8bb0311abbac3f9388c4b95210dac.html#a5af8bb0311abbac3f9388c4b95210dac"> 4944</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__http__endpoint__opts_a5af8bb0311abbac3f9388c4b95210dac.html#a5af8bb0311abbac3f9388c4b95210dac">auth_domain</a>;</div><div class="line"><a name="l04945"></a><span class="lineno"><a class="line" href="structmg__http__endpoint__opts_a57ae875a1cc356870d396f3d864d2fc8.html#a57ae875a1cc356870d396f3d864d2fc8"> 4945</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__http__endpoint__opts_a57ae875a1cc356870d396f3d864d2fc8.html#a57ae875a1cc356870d396f3d864d2fc8">auth_file</a>;</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;};</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_afef8ba7b50b93fcf9948c226755d05e9.html#afef8ba7b50b93fcf9948c226755d05e9">mg_register_http_endpoint_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *uri_path,</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;                                   <a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> handler,</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;                                   <span class="keyword">struct</span> <a class="code" href="structmg__http__endpoint__opts.html">mg_http_endpoint_opts</a> opts);</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;<span class="comment"> * Authenticates a HTTP request against an opened password file.</span></div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;<span class="comment"> * Returns 1 if authenticated, 0 otherwise.</span></div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aaf77e1d30ef9c704be1706f2e40c89c7.html#aaf77e1d30ef9c704be1706f2e40c89c7">mg_http_check_digest_auth</a>(<span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm, <span class="keyword">const</span> <span class="keywordtype">char</span> *auth_domain,</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;                              FILE *fp);</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;<span class="comment"> * Authenticates given response params against an opened password file.</span></div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;<span class="comment"> * Returns 1 if authenticated, 0 otherwise.</span></div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;<span class="comment"> * It&#39;s used by mg_http_check_digest_auth().</span></div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a99861af97ad5c71937c11583d62a69f8.html#a99861af97ad5c71937c11583d62a69f8">mg_check_digest_auth</a>(<span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> method, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> uri,</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> username, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> cnonce,</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> response, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> qop,</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> nc, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> nonce,</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> auth_domain, FILE *fp);</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;<span class="comment"> * Sends buffer `buf` of size `len` to the client using chunked HTTP encoding.</span></div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;<span class="comment"> * This function sends the buffer size as hex number + newline first, then</span></div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;<span class="comment"> * the buffer itself, then the newline. For example,</span></div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;<span class="comment"> * `mg_send_http_chunk(nc, &quot;foo&quot;, 3)` will append the `3\r\nfoo\r\n` string</span></div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;<span class="comment"> * to the `nc-&gt;send_mbuf` output IO buffer.</span></div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;<span class="comment"> * NOTE: The HTTP header &quot;Transfer-Encoding: chunked&quot; should be sent prior to</span></div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;<span class="comment"> * using this function.</span></div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;<span class="comment"> * NOTE: do not forget to send an empty chunk at the end of the response,</span></div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;<span class="comment"> * to tell the client that everything was sent. Example:</span></div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;<span class="comment"> *   mg_printf_http_chunk(nc, &quot;%s&quot;, &quot;my response!&quot;);</span></div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;<span class="comment"> *   mg_send_http_chunk(nc, &quot;&quot;, 0); // Tell the client we&#39;re finished</span></div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a6842bbd8fac97833cc3b25a2b25dbeca.html#a6842bbd8fac97833cc3b25a2b25dbeca">mg_send_http_chunk</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;<span class="comment"> * Sends a printf-formatted HTTP chunk.</span></div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;<span class="comment"> * Functionality is similar to `mg_send_http_chunk()`.</span></div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ad6216276f7a0b334ad97aafcc95f677f.html#ad6216276f7a0b334ad97aafcc95f677f">mg_printf_http_chunk</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;<span class="comment"> * Sends the response status line.</span></div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;<span class="comment"> * If `extra_headers` is not NULL, then `extra_headers` are also sent</span></div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;<span class="comment"> * after the response line. `extra_headers` must NOT end end with new line.</span></div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;<span class="comment"> * Example:</span></div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;<span class="comment"> *      mg_send_response_line(nc, 200, &quot;Access-Control-Allow-Origin: *&quot;);</span></div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;<span class="comment"> * Will result in:</span></div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;<span class="comment"> *      HTTP/1.1 200 OK\r\n</span></div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;<span class="comment"> *      Access-Control-Allow-Origin: *\r\n</span></div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_abbadafd3b6ce148e82e413f4d0dfa934.html#abbadafd3b6ce148e82e413f4d0dfa934">mg_send_response_line</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> status_code,</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers);</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;<span class="comment"> * Sends an error response. If reason is NULL, the message will be inferred</span></div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;<span class="comment"> * from the error code (if supported).</span></div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2c92ac0d106eed3725227053a4ce323f.html#a2c92ac0d106eed3725227053a4ce323f">mg_http_send_error</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> code, <span class="keyword">const</span> <span class="keywordtype">char</span> *reason);</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;<span class="comment"> * Sends a redirect response.</span></div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;<span class="comment"> * `status_code` should be either 301 or 302 and `location` point to the</span></div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;<span class="comment"> * new location.</span></div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;<span class="comment"> * If `extra_headers` is not empty, then `extra_headers` are also sent</span></div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;<span class="comment"> * after the response line. `extra_headers` must NOT end end with new line.</span></div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;<span class="comment"> * Example:</span></div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;<span class="comment"> *      mg_http_send_redirect(nc, 302, mg_mk_str(&quot;/login&quot;), mg_mk_str(NULL));</span></div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a984773b80f958b983265208dd054b500.html#a984773b80f958b983265208dd054b500">mg_http_send_redirect</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">int</span> status_code,</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;                           <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> location,</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;                           <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> extra_headers);</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;<span class="comment"> * Sends the response line and headers.</span></div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;<span class="comment"> * This function sends the response line with the `status_code`, and</span></div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;<span class="comment"> * automatically</span></div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;<span class="comment"> * sends one header: either &quot;Content-Length&quot; or &quot;Transfer-Encoding&quot;.</span></div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;<span class="comment"> * If `content_length` is negative, then &quot;Transfer-Encoding: chunked&quot; header</span></div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;<span class="comment"> * is sent, otherwise, &quot;Content-Length&quot; header is sent.</span></div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;<span class="comment"> * NOTE: If `Transfer-Encoding` is `chunked`, then message body must be sent</span></div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;<span class="comment"> * using `mg_send_http_chunk()` or `mg_printf_http_chunk()` functions.</span></div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;<span class="comment"> * Otherwise, `mg_send()` or `mg_printf()` must be used.</span></div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;<span class="comment"> * Extra headers could be set through `extra_headers`. Note `extra_headers`</span></div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;<span class="comment"> * must NOT be terminated by a new line.</span></div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2dfcbaf7ad4885852337450d17ab0608.html#a2dfcbaf7ad4885852337450d17ab0608">mg_send_head</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *n, <span class="keywordtype">int</span> status_code,</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;                  int64_t content_length, <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers);</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;<span class="comment"> * Sends a printf-formatted HTTP chunk, escaping HTML tags.</span></div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a565a83b815183775e6788c032cabcb4e.html#a565a83b815183775e6788c032cabcb4e">mg_printf_html_escape</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;<span class="preprocessor">#if MG_ENABLE_HTTP_URL_REWRITES</span></div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;<span class="comment"> * Proxies a given request to a given upstream http server. The path prefix</span></div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;<span class="comment"> * in `mount` will be stripped of the path requested to the upstream server,</span></div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;<span class="comment"> * e.g. if mount is /api and upstream is http://localhost:8001/foo</span></div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;<span class="comment"> * then an incoming request to /api/bar will cause a request to</span></div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;<span class="comment"> * http://localhost:8001/foo/bar</span></div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;<span class="comment"> * EXPERIMENTAL API. Please use http_serve_http + url_rewrites if a static</span></div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;<span class="comment"> * mapping is good enough.</span></div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;<span class="keywordtype">void</span> mg_http_reverse_proxy(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;                           <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structhttp__message.html">http_message</a> *hm, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> mount,</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;                           <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> upstream);</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;}</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_HTTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_HTTP_SERVER_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/http_client.h&quot;</span></div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;<span class="comment"> * === Client API reference</span></div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_HTTP_CLIENT_H_</span></div><div class="line"><a name="l05088"></a><span class="lineno"><a class="line" href="mongoose_8h_aab713a8029d83b958ac5e57a8c7c7678.html#aab713a8029d83b958ac5e57a8c7c7678"> 5088</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_HTTP_CLIENT_H_</span></div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;<span class="comment"> * Helper function that creates an outbound HTTP connection.</span></div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;<span class="comment"> * `url` is the URL to fetch. It must be properly URL-encoded, e.g. have</span></div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;<span class="comment"> * no spaces, etc. By default, `mg_connect_http()` sends the Connection and</span></div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;<span class="comment"> * Host headers. `extra_headers` is an extra HTTP header to send, e.g.</span></div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;<span class="comment"> * `&quot;User-Agent: my-app\r\n&quot;`.</span></div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;<span class="comment"> * If `post_data` is NULL, then a GET request is created. Otherwise, a POST</span></div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;<span class="comment"> * request is created with the specified POST data. Note that if the data being</span></div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;<span class="comment"> * posted is a form submission, the `Content-Type` header should be set</span></div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;<span class="comment"> * accordingly (see example below).</span></div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;<span class="comment"> * Examples:</span></div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;<span class="comment"> *   nc1 = mg_connect_http(mgr, ev_handler_1, &quot;http://www.google.com&quot;, NULL,</span></div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;<span class="comment"> *                         NULL);</span></div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;<span class="comment"> *   nc2 = mg_connect_http(mgr, ev_handler_1, &quot;https://github.com&quot;, NULL, NULL);</span></div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;<span class="comment"> *   nc3 = mg_connect_http(</span></div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;<span class="comment"> *       mgr, ev_handler_1, &quot;my_server:8000/form_submit/&quot;,</span></div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;<span class="comment"> *       &quot;Content-Type: application/x-www-form-urlencoded\r\n&quot;,</span></div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;<span class="comment"> *       &quot;var_1=value_1&amp;var_2=value_2&quot;);</span></div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_a4de7fb521506943105ec64d4587ccf33.html#a4de7fb521506943105ec64d4587ccf33">mg_connect_http</a>(</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr,</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> event_handler, <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>), <span class="keyword">const</span> <span class="keywordtype">char</span> *url,</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers, <span class="keyword">const</span> <span class="keywordtype">char</span> *post_data);</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;<span class="comment"> * Helper function that creates an outbound HTTP connection.</span></div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;<span class="comment"> * Mostly identical to mg_connect_http, but allows you to provide extra</span></div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;<span class="comment"> *parameters</span></div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;<span class="comment"> * (for example, SSL parameters)</span></div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *<a class="code" href="mongoose_8h_a61d93cfd74b29d8f333053673cc3726c.html#a61d93cfd74b29d8f333053673cc3726c">mg_connect_http_opt</a>(</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> <a class="code" href="namespaceTBT_ab2294a8ec1c676b81a8cd10a13a24828.html#ab2294a8ec1c676b81a8cd10a13a24828">ev_handler</a>, <span class="keywordtype">void</span> *user_data),</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__connect__opts.html">mg_connect_opts</a> opts, <span class="keyword">const</span> <span class="keywordtype">char</span> *url, <span class="keyword">const</span> <span class="keywordtype">char</span> *extra_headers,</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *post_data);</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;<span class="comment">/* Creates digest authentication header for a client request. */</span></div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a7441246a6da4d19051f35d4438e8eddc.html#a7441246a6da4d19051f35d4438e8eddc">mg_http_create_digest_auth_header</a>(<span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> buf_len,</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;                                      <span class="keyword">const</span> <span class="keywordtype">char</span> *method, <span class="keyword">const</span> <span class="keywordtype">char</span> *uri,</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;                                      <span class="keyword">const</span> <span class="keywordtype">char</span> *auth_domain, <span class="keyword">const</span> <span class="keywordtype">char</span> *user,</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;                                      <span class="keyword">const</span> <span class="keywordtype">char</span> *passwd);</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;}</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_HTTP_CLIENT_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/mqtt.h&quot;</span></div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;<span class="comment"> * This software is dual-licensed: you can redistribute it and/or modify</span></div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License version 2 as</span></div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;<span class="comment"> * published by the Free Software Foundation. For the terms of this</span></div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;<span class="comment"> * license, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;<span class="comment"> * You are free to use this software under the terms of the GNU General</span></div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;<span class="comment"> * Public License, but WITHOUT ANY WARRANTY; without even the implied</span></div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;<span class="comment"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;<span class="comment"> * See the GNU General Public License for more details.</span></div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;<span class="comment"> * Alternatively, you can license this software under a commercial</span></div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;<span class="comment"> * license, as set out in &lt;https://www.cesanta.com/license&gt;.</span></div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;<span class="comment"> * === MQTT API reference</span></div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_MQTT_H_</span></div><div class="line"><a name="l05170"></a><span class="lineno"><a class="line" href="mongoose_8h_a18e370f275010cd0aebdb25e2346b69d.html#a18e370f275010cd0aebdb25e2346b69d"> 5170</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_MQTT_H_</span></div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/net.h&quot; */</span></div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;</div><div class="line"><a name="l05174"></a><span class="lineno"><a class="line" href="structmg__mqtt__message.html"> 5174</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mqtt__message.html">mg_mqtt_message</a> {</div><div class="line"><a name="l05175"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_abfc247fa4aaf411b0957e71df6f6ce2b.html#abfc247fa4aaf411b0957e71df6f6ce2b"> 5175</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__mqtt__message_abfc247fa4aaf411b0957e71df6f6ce2b.html#abfc247fa4aaf411b0957e71df6f6ce2b">cmd</a>;</div><div class="line"><a name="l05176"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a5c5bca3da240c7a3cbc7bef8b67bc90e.html#a5c5bca3da240c7a3cbc7bef8b67bc90e"> 5176</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__mqtt__message_a5c5bca3da240c7a3cbc7bef8b67bc90e.html#a5c5bca3da240c7a3cbc7bef8b67bc90e">qos</a>;</div><div class="line"><a name="l05177"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a5ac9625e8214e6a3ac6c835f19b3a9c8.html#a5ac9625e8214e6a3ac6c835f19b3a9c8"> 5177</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__mqtt__message_a5ac9625e8214e6a3ac6c835f19b3a9c8.html#a5ac9625e8214e6a3ac6c835f19b3a9c8">len</a>; <span class="comment">/* message length in the IO buffer */</span></div><div class="line"><a name="l05178"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_ac121d4016c13ad0387409feee1ebc666.html#ac121d4016c13ad0387409feee1ebc666"> 5178</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> topic;</div><div class="line"><a name="l05179"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a12215d63bfcd1341849add871ef0efc7.html#a12215d63bfcd1341849add871ef0efc7"> 5179</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> payload;</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;</div><div class="line"><a name="l05181"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a4a6ff07b1d3fb2f06de4422d13e8e1ec.html#a4a6ff07b1d3fb2f06de4422d13e8e1ec"> 5181</a></span>&#160;  uint8_t <a class="code" href="structmg__mqtt__message_a4a6ff07b1d3fb2f06de4422d13e8e1ec.html#a4a6ff07b1d3fb2f06de4422d13e8e1ec">connack_ret_code</a>; <span class="comment">/* connack */</span></div><div class="line"><a name="l05182"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_aa62fb03efa898fe46058b34e6031f8db.html#aa62fb03efa898fe46058b34e6031f8db"> 5182</a></span>&#160;  uint16_t <a class="code" href="structmg__mqtt__message_aa62fb03efa898fe46058b34e6031f8db.html#aa62fb03efa898fe46058b34e6031f8db">message_id</a>;      <span class="comment">/* puback */</span></div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;  <span class="comment">/* connect */</span></div><div class="line"><a name="l05185"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a28adc3153ad7cca48588a73297dff2b4.html#a28adc3153ad7cca48588a73297dff2b4"> 5185</a></span>&#160;  uint8_t <a class="code" href="structmg__mqtt__message_a28adc3153ad7cca48588a73297dff2b4.html#a28adc3153ad7cca48588a73297dff2b4">protocol_version</a>;</div><div class="line"><a name="l05186"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a74388e94b78a4aed9260dc2c4d4da5da.html#a74388e94b78a4aed9260dc2c4d4da5da"> 5186</a></span>&#160;  uint8_t <a class="code" href="structmg__mqtt__message_a74388e94b78a4aed9260dc2c4d4da5da.html#a74388e94b78a4aed9260dc2c4d4da5da">connect_flags</a>;</div><div class="line"><a name="l05187"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a79e6436df92ae92c88cd99150c27f8c7.html#a79e6436df92ae92c88cd99150c27f8c7"> 5187</a></span>&#160;  uint16_t <a class="code" href="structmg__mqtt__message_a79e6436df92ae92c88cd99150c27f8c7.html#a79e6436df92ae92c88cd99150c27f8c7">keep_alive_timer</a>;</div><div class="line"><a name="l05188"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_ae908f614c1a210234df403fe9148d229.html#ae908f614c1a210234df403fe9148d229"> 5188</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> protocol_name;</div><div class="line"><a name="l05189"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_aa737e24d88a034c481cffdd207c6cb1a.html#aa737e24d88a034c481cffdd207c6cb1a"> 5189</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> client_id;</div><div class="line"><a name="l05190"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a445cb051eb2301102a74561590614322.html#a445cb051eb2301102a74561590614322"> 5190</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> will_topic;</div><div class="line"><a name="l05191"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_abf358db60e5a092bd71a52a2dc9d02c7.html#abf358db60e5a092bd71a52a2dc9d02c7"> 5191</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> will_message;</div><div class="line"><a name="l05192"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a85ab9fb52ea0d8f353dcc09e285516c7.html#a85ab9fb52ea0d8f353dcc09e285516c7"> 5192</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> user_name;</div><div class="line"><a name="l05193"></a><span class="lineno"><a class="line" href="structmg__mqtt__message_a9b8cee8acf7b16eed78f29b08d792229.html#a9b8cee8acf7b16eed78f29b08d792229"> 5193</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> password;</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;};</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;</div><div class="line"><a name="l05196"></a><span class="lineno"><a class="line" href="structmg__mqtt__topic__expression.html"> 5196</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mqtt__topic__expression.html">mg_mqtt_topic_expression</a> {</div><div class="line"><a name="l05197"></a><span class="lineno"><a class="line" href="structmg__mqtt__topic__expression_a04074697217a1c329b32a9242d63ed8f.html#a04074697217a1c329b32a9242d63ed8f"> 5197</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__mqtt__topic__expression_a04074697217a1c329b32a9242d63ed8f.html#a04074697217a1c329b32a9242d63ed8f">topic</a>;</div><div class="line"><a name="l05198"></a><span class="lineno"><a class="line" href="structmg__mqtt__topic__expression_a56df5bba82939797c94dd68993b0beff.html#a56df5bba82939797c94dd68993b0beff"> 5198</a></span>&#160;  uint8_t <a class="code" href="structmg__mqtt__topic__expression_a56df5bba82939797c94dd68993b0beff.html#a56df5bba82939797c94dd68993b0beff">qos</a>;</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;};</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;</div><div class="line"><a name="l05201"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts.html"> 5201</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__send__mqtt__handshake__opts.html">mg_send_mqtt_handshake_opts</a> {</div><div class="line"><a name="l05202"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts_a89a41409815899bd7ed46a510a162bc8.html#a89a41409815899bd7ed46a510a162bc8"> 5202</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structmg__send__mqtt__handshake__opts_a89a41409815899bd7ed46a510a162bc8.html#a89a41409815899bd7ed46a510a162bc8">flags</a>; <span class="comment">/* connection flags */</span></div><div class="line"><a name="l05203"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts_a39a20b37f0de09f81c6de35690f7d98f.html#a39a20b37f0de09f81c6de35690f7d98f"> 5203</a></span>&#160;  uint16_t <a class="code" href="structmg__send__mqtt__handshake__opts_a39a20b37f0de09f81c6de35690f7d98f.html#a39a20b37f0de09f81c6de35690f7d98f">keep_alive</a>;</div><div class="line"><a name="l05204"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts_a7cdd8f59da7f39ccd8face3e7267d634.html#a7cdd8f59da7f39ccd8face3e7267d634"> 5204</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__send__mqtt__handshake__opts_a7cdd8f59da7f39ccd8face3e7267d634.html#a7cdd8f59da7f39ccd8face3e7267d634">will_topic</a>;</div><div class="line"><a name="l05205"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts_a747846d48256c35b24544a1e19321f09.html#a747846d48256c35b24544a1e19321f09"> 5205</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__send__mqtt__handshake__opts_a747846d48256c35b24544a1e19321f09.html#a747846d48256c35b24544a1e19321f09">will_message</a>;</div><div class="line"><a name="l05206"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts_a3110a5a3589f32974b23f442b970ee85.html#a3110a5a3589f32974b23f442b970ee85"> 5206</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__send__mqtt__handshake__opts_a3110a5a3589f32974b23f442b970ee85.html#a3110a5a3589f32974b23f442b970ee85">user_name</a>;</div><div class="line"><a name="l05207"></a><span class="lineno"><a class="line" href="structmg__send__mqtt__handshake__opts_ac16baef17869ac723d502190b19780bf.html#ac16baef17869ac723d502190b19780bf"> 5207</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__send__mqtt__handshake__opts_ac16baef17869ac723d502190b19780bf.html#ac16baef17869ac723d502190b19780bf">password</a>;</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;};</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;<span class="comment">/* mg_mqtt_proto_data should be in header to allow external access to it */</span></div><div class="line"><a name="l05211"></a><span class="lineno"><a class="line" href="structmg__mqtt__proto__data.html"> 5211</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__mqtt__proto__data.html">mg_mqtt_proto_data</a> {</div><div class="line"><a name="l05212"></a><span class="lineno"><a class="line" href="structmg__mqtt__proto__data_add8062f8f2802a844056ead961485bc0.html#add8062f8f2802a844056ead961485bc0"> 5212</a></span>&#160;  uint16_t <a class="code" href="structmg__mqtt__proto__data_add8062f8f2802a844056ead961485bc0.html#add8062f8f2802a844056ead961485bc0">keep_alive</a>;</div><div class="line"><a name="l05213"></a><span class="lineno"><a class="line" href="structmg__mqtt__proto__data_afebe290ccf2c1929b1c05a25bfe7f4d7.html#afebe290ccf2c1929b1c05a25bfe7f4d7"> 5213</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structmg__mqtt__proto__data_afebe290ccf2c1929b1c05a25bfe7f4d7.html#afebe290ccf2c1929b1c05a25bfe7f4d7">last_control_time</a>;</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;};</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;<span class="comment">/* Message types */</span></div><div class="line"><a name="l05217"></a><span class="lineno"><a class="line" href="mongoose_8h_a9d9b0667f38b7766fa2d5897afa91aa7.html#a9d9b0667f38b7766fa2d5897afa91aa7"> 5217</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_CONNECT 1</span></div><div class="line"><a name="l05218"></a><span class="lineno"><a class="line" href="mongoose_8h_a38aebb59d8c82a49a9be50c4faf4d3d3.html#a38aebb59d8c82a49a9be50c4faf4d3d3"> 5218</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_CONNACK 2</span></div><div class="line"><a name="l05219"></a><span class="lineno"><a class="line" href="mongoose_8h_a8e62e4d7227c4f867e159a01327275d8.html#a8e62e4d7227c4f867e159a01327275d8"> 5219</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PUBLISH 3</span></div><div class="line"><a name="l05220"></a><span class="lineno"><a class="line" href="mongoose_8h_a2484b661c8d02c88941d273466b199a2.html#a2484b661c8d02c88941d273466b199a2"> 5220</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PUBACK 4</span></div><div class="line"><a name="l05221"></a><span class="lineno"><a class="line" href="mongoose_8h_a0eb7be0367463400a6f25d7502fc0a8a.html#a0eb7be0367463400a6f25d7502fc0a8a"> 5221</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PUBREC 5</span></div><div class="line"><a name="l05222"></a><span class="lineno"><a class="line" href="mongoose_8h_a650b248708f19ef7aa655c94520006e6.html#a650b248708f19ef7aa655c94520006e6"> 5222</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PUBREL 6</span></div><div class="line"><a name="l05223"></a><span class="lineno"><a class="line" href="mongoose_8h_a8668624a75a4153787267c9761dae2a6.html#a8668624a75a4153787267c9761dae2a6"> 5223</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PUBCOMP 7</span></div><div class="line"><a name="l05224"></a><span class="lineno"><a class="line" href="mongoose_8h_ae0182e3405110e96894f235e47e11eeb.html#ae0182e3405110e96894f235e47e11eeb"> 5224</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_SUBSCRIBE 8</span></div><div class="line"><a name="l05225"></a><span class="lineno"><a class="line" href="mongoose_8h_ae038529ab1c502bfbc6104c26933d90f.html#ae038529ab1c502bfbc6104c26933d90f"> 5225</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_SUBACK 9</span></div><div class="line"><a name="l05226"></a><span class="lineno"><a class="line" href="mongoose_8h_ab74c8a421a8fb26eceec15afd9b13754.html#ab74c8a421a8fb26eceec15afd9b13754"> 5226</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_UNSUBSCRIBE 10</span></div><div class="line"><a name="l05227"></a><span class="lineno"><a class="line" href="mongoose_8h_a102b91b3b50c14b7b873446bf9b11b34.html#a102b91b3b50c14b7b873446bf9b11b34"> 5227</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_UNSUBACK 11</span></div><div class="line"><a name="l05228"></a><span class="lineno"><a class="line" href="mongoose_8h_a6ad41476cf7a84e70bb8ebac3cd383b5.html#a6ad41476cf7a84e70bb8ebac3cd383b5"> 5228</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PINGREQ 12</span></div><div class="line"><a name="l05229"></a><span class="lineno"><a class="line" href="mongoose_8h_a9c3bb557cc4c7399b86961aac483dcd4.html#a9c3bb557cc4c7399b86961aac483dcd4"> 5229</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_PINGRESP 13</span></div><div class="line"><a name="l05230"></a><span class="lineno"><a class="line" href="mongoose_8h_adb9fdc13537d4270f792b7f2fd360285.html#adb9fdc13537d4270f792b7f2fd360285"> 5230</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CMD_DISCONNECT 14</span></div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;<span class="comment">/* MQTT event types */</span></div><div class="line"><a name="l05233"></a><span class="lineno"><a class="line" href="mongoose_8h_a8e488c37e364619bb6aac78c950763c0.html#a8e488c37e364619bb6aac78c950763c0"> 5233</a></span>&#160;<span class="preprocessor">#define MG_MQTT_EVENT_BASE 200</span></div><div class="line"><a name="l05234"></a><span class="lineno"><a class="line" href="mongoose_8h_a766c163e97df1e2e4ca680c46f9ea7ab.html#a766c163e97df1e2e4ca680c46f9ea7ab"> 5234</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNECT (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_CONNECT)</span></div><div class="line"><a name="l05235"></a><span class="lineno"><a class="line" href="mongoose_8h_a19e14605d33429d70d54fc7a249c7ed7.html#a19e14605d33429d70d54fc7a249c7ed7"> 5235</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_CONNACK)</span></div><div class="line"><a name="l05236"></a><span class="lineno"><a class="line" href="mongoose_8h_acadd343910ddcfbbac6292cdc1c86506.html#acadd343910ddcfbbac6292cdc1c86506"> 5236</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PUBLISH (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PUBLISH)</span></div><div class="line"><a name="l05237"></a><span class="lineno"><a class="line" href="mongoose_8h_ab8a4cbb7223e56be59e25eec820f770e.html#ab8a4cbb7223e56be59e25eec820f770e"> 5237</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PUBACK (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PUBACK)</span></div><div class="line"><a name="l05238"></a><span class="lineno"><a class="line" href="mongoose_8h_ab9c55d19b839a825831d03ea39d8fdcb.html#ab9c55d19b839a825831d03ea39d8fdcb"> 5238</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PUBREC (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PUBREC)</span></div><div class="line"><a name="l05239"></a><span class="lineno"><a class="line" href="mongoose_8h_af9f308f0bf4b1184a3a929277d73a6b3.html#af9f308f0bf4b1184a3a929277d73a6b3"> 5239</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PUBREL (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PUBREL)</span></div><div class="line"><a name="l05240"></a><span class="lineno"><a class="line" href="mongoose_8h_a482f6c264fbb4b886be07a953bd2a570.html#a482f6c264fbb4b886be07a953bd2a570"> 5240</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PUBCOMP (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PUBCOMP)</span></div><div class="line"><a name="l05241"></a><span class="lineno"><a class="line" href="mongoose_8h_ad70d5dd88fb5428231558b4e80bb9544.html#ad70d5dd88fb5428231558b4e80bb9544"> 5241</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_SUBSCRIBE (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_SUBSCRIBE)</span></div><div class="line"><a name="l05242"></a><span class="lineno"><a class="line" href="mongoose_8h_aae4814c3a911c4eb527524e6a457ddbf.html#aae4814c3a911c4eb527524e6a457ddbf"> 5242</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_SUBACK (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_SUBACK)</span></div><div class="line"><a name="l05243"></a><span class="lineno"><a class="line" href="mongoose_8h_a71334833342ab94c6a852779ca1259ea.html#a71334833342ab94c6a852779ca1259ea"> 5243</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_UNSUBSCRIBE (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_UNSUBSCRIBE)</span></div><div class="line"><a name="l05244"></a><span class="lineno"><a class="line" href="mongoose_8h_aa3590272497911a47b88f09e61a9f6fb.html#aa3590272497911a47b88f09e61a9f6fb"> 5244</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_UNSUBACK (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_UNSUBACK)</span></div><div class="line"><a name="l05245"></a><span class="lineno"><a class="line" href="mongoose_8h_a8ed7bd42a21c0b6d87823aae192691df.html#a8ed7bd42a21c0b6d87823aae192691df"> 5245</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PINGREQ (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PINGREQ)</span></div><div class="line"><a name="l05246"></a><span class="lineno"><a class="line" href="mongoose_8h_a12105ebb378b249b3af7a4b8f8cc4b91.html#a12105ebb378b249b3af7a4b8f8cc4b91"> 5246</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_PINGRESP (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_PINGRESP)</span></div><div class="line"><a name="l05247"></a><span class="lineno"><a class="line" href="mongoose_8h_a3ba27c78c2235157354d996861f132ff.html#a3ba27c78c2235157354d996861f132ff"> 5247</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_DISCONNECT (MG_MQTT_EVENT_BASE + MG_MQTT_CMD_DISCONNECT)</span></div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;<span class="comment">/* Message flags */</span></div><div class="line"><a name="l05250"></a><span class="lineno"><a class="line" href="mongoose_8h_ab88fcbc0c835ecbb8294b0aca931b587.html#ab88fcbc0c835ecbb8294b0aca931b587"> 5250</a></span>&#160;<span class="preprocessor">#define MG_MQTT_RETAIN 0x1</span></div><div class="line"><a name="l05251"></a><span class="lineno"><a class="line" href="mongoose_8h_a4a3b4922367baa156e2de12c82e1003f.html#a4a3b4922367baa156e2de12c82e1003f"> 5251</a></span>&#160;<span class="preprocessor">#define MG_MQTT_DUP 0x4</span></div><div class="line"><a name="l05252"></a><span class="lineno"><a class="line" href="mongoose_8h_a7b42037c5fbe7cf651db7e59f89e8366.html#a7b42037c5fbe7cf651db7e59f89e8366"> 5252</a></span>&#160;<span class="preprocessor">#define MG_MQTT_QOS(qos) ((qos) &lt;&lt; 1)</span></div><div class="line"><a name="l05253"></a><span class="lineno"><a class="line" href="mongoose_8h_a46b16651c6b161a1979696c8388c8f93.html#a46b16651c6b161a1979696c8388c8f93"> 5253</a></span>&#160;<span class="preprocessor">#define MG_MQTT_GET_QOS(flags) (((flags) &amp;0x6) &gt;&gt; 1)</span></div><div class="line"><a name="l05254"></a><span class="lineno"><a class="line" href="mongoose_8h_a5d78b702e1f3ea1e61afbc01a16443d5.html#a5d78b702e1f3ea1e61afbc01a16443d5"> 5254</a></span>&#160;<span class="preprocessor">#define MG_MQTT_SET_QOS(flags, qos) (flags) = ((flags) &amp; ~0x6) | ((qos) &lt;&lt; 1)</span></div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;<span class="comment">/* Connection flags */</span></div><div class="line"><a name="l05257"></a><span class="lineno"><a class="line" href="mongoose_8h_ae5a62877f3beca999cf72009b3033d11.html#ae5a62877f3beca999cf72009b3033d11"> 5257</a></span>&#160;<span class="preprocessor">#define MG_MQTT_CLEAN_SESSION 0x02</span></div><div class="line"><a name="l05258"></a><span class="lineno"><a class="line" href="mongoose_8h_a5ac9fc484d90f4cfc42304e930fe5792.html#a5ac9fc484d90f4cfc42304e930fe5792"> 5258</a></span>&#160;<span class="preprocessor">#define MG_MQTT_HAS_WILL 0x04</span></div><div class="line"><a name="l05259"></a><span class="lineno"><a class="line" href="mongoose_8h_a647c44b8c8f2922c47f27942f60b13eb.html#a647c44b8c8f2922c47f27942f60b13eb"> 5259</a></span>&#160;<span class="preprocessor">#define MG_MQTT_WILL_RETAIN 0x20</span></div><div class="line"><a name="l05260"></a><span class="lineno"><a class="line" href="mongoose_8h_aabfcd517ac438f4b054de6a2cf16e0a3.html#aabfcd517ac438f4b054de6a2cf16e0a3"> 5260</a></span>&#160;<span class="preprocessor">#define MG_MQTT_HAS_PASSWORD 0x40</span></div><div class="line"><a name="l05261"></a><span class="lineno"><a class="line" href="mongoose_8h_a0e3e1b6c0039cb52e1704a16db689ab1.html#a0e3e1b6c0039cb52e1704a16db689ab1"> 5261</a></span>&#160;<span class="preprocessor">#define MG_MQTT_HAS_USER_NAME 0x80</span></div><div class="line"><a name="l05262"></a><span class="lineno"><a class="line" href="mongoose_8h_a6ae3b078201f93cddbfbe5fb9da9b739.html#a6ae3b078201f93cddbfbe5fb9da9b739"> 5262</a></span>&#160;<span class="preprocessor">#define MG_MQTT_GET_WILL_QOS(flags) (((flags) &amp;0x18) &gt;&gt; 3)</span></div><div class="line"><a name="l05263"></a><span class="lineno"><a class="line" href="mongoose_8h_ae9354ca9723b95f518fac9ea825325ac.html#ae9354ca9723b95f518fac9ea825325ac"> 5263</a></span>&#160;<span class="preprocessor">#define MG_MQTT_SET_WILL_QOS(flags, qos) \</span></div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;<span class="preprocessor">  (flags) = ((flags) &amp; ~0x18) | ((qos) &lt;&lt; 3)</span></div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;<span class="comment">/* CONNACK return codes */</span></div><div class="line"><a name="l05267"></a><span class="lineno"><a class="line" href="mongoose_8h_aed7e728958eac5462565485ccc1069f4.html#aed7e728958eac5462565485ccc1069f4"> 5267</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK_ACCEPTED 0</span></div><div class="line"><a name="l05268"></a><span class="lineno"><a class="line" href="mongoose_8h_ae912a860a0c18366da64ac011a79be72.html#ae912a860a0c18366da64ac011a79be72"> 5268</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK_UNACCEPTABLE_VERSION 1</span></div><div class="line"><a name="l05269"></a><span class="lineno"><a class="line" href="mongoose_8h_a51d0f438f58c9426a2c4ea1951dc5883.html#a51d0f438f58c9426a2c4ea1951dc5883"> 5269</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK_IDENTIFIER_REJECTED 2</span></div><div class="line"><a name="l05270"></a><span class="lineno"><a class="line" href="mongoose_8h_a6ca4e759531a3ecf8ce3929cbfb888d3.html#a6ca4e759531a3ecf8ce3929cbfb888d3"> 5270</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK_SERVER_UNAVAILABLE 3</span></div><div class="line"><a name="l05271"></a><span class="lineno"><a class="line" href="mongoose_8h_ace79bd779ee1c1ab61422d137760f8ed.html#ace79bd779ee1c1ab61422d137760f8ed"> 5271</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK_BAD_AUTH 4</span></div><div class="line"><a name="l05272"></a><span class="lineno"><a class="line" href="mongoose_8h_a8210dd839f67b3016ef38ca3691d4356.html#a8210dd839f67b3016ef38ca3691d4356"> 5272</a></span>&#160;<span class="preprocessor">#define MG_EV_MQTT_CONNACK_NOT_AUTHORIZED 5</span></div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;</div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;<span class="comment"> * Attaches a built-in MQTT event handler to the given connection.</span></div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;<span class="comment"> * The user-defined event handler will receive following extra events:</span></div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;<span class="comment"> * - MG_EV_MQTT_CONNACK</span></div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;<span class="comment"> * - MG_EV_MQTT_PUBLISH</span></div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;<span class="comment"> * - MG_EV_MQTT_PUBACK</span></div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;<span class="comment"> * - MG_EV_MQTT_PUBREC</span></div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;<span class="comment"> * - MG_EV_MQTT_PUBREL</span></div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;<span class="comment"> * - MG_EV_MQTT_PUBCOMP</span></div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;<span class="comment"> * - MG_EV_MQTT_SUBACK</span></div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a008152c925b906c1c202f6752750e62c.html#a008152c925b906c1c202f6752750e62c">mg_set_protocol_mqtt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;<span class="comment">/* Sends an MQTT handshake. */</span></div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a3963d4e573819f175d59c41c5045fd91.html#a3963d4e573819f175d59c41c5045fd91">mg_send_mqtt_handshake</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *client_id);</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;<span class="comment">/* Sends an MQTT handshake with optional parameters. */</span></div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ac2734b66171767f69ab0d15b61eae7c7.html#ac2734b66171767f69ab0d15b61eae7c7">mg_send_mqtt_handshake_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *client_id,</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;                                <span class="keyword">struct</span> <a class="code" href="structmg__send__mqtt__handshake__opts.html">mg_send_mqtt_handshake_opts</a>);</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;<span class="comment">/* Publishes a message to a given topic. */</span></div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a0ee862018546e5ce25be6d0c079d46d3.html#a0ee862018546e5ce25be6d0c079d46d3">mg_mqtt_publish</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *topic,</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;                     uint16_t message_id, <span class="keywordtype">int</span> flags, <span class="keyword">const</span> <span class="keywordtype">void</span> *data,</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;                     <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;<span class="comment">/* Subscribes to a bunch of topics. */</span></div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_af568ca12452ee3d3cd2dc7bf0d1cd7da.html#af568ca12452ee3d3cd2dc7bf0d1cd7da">mg_mqtt_subscribe</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmg__mqtt__topic__expression.html">mg_mqtt_topic_expression</a> *topics,</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;                       <span class="keywordtype">size_t</span> topics_len, uint16_t message_id);</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;<span class="comment">/* Unsubscribes from a bunch of topics. */</span></div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_aef2a5aec1f45c52fe66adbd33b81b69b.html#aef2a5aec1f45c52fe66adbd33b81b69b">mg_mqtt_unsubscribe</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keywordtype">char</span> **topics,</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;                         <span class="keywordtype">size_t</span> topics_len, uint16_t message_id);</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;<span class="comment">/* Sends a DISCONNECT command. */</span></div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a0e2c21fb32382c57e15c60b05c4a13a6.html#a0e2c21fb32382c57e15c60b05c4a13a6">mg_mqtt_disconnect</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;<span class="comment">/* Sends a CONNACK command with a given `return_code`. */</span></div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a23b37b4236cfa9615daab4f522d6cc83.html#a23b37b4236cfa9615daab4f522d6cc83">mg_mqtt_connack</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint8_t return_code);</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;<span class="comment">/* Sends a PUBACK command with a given `message_id`. */</span></div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a8755d2c1c429a6e46a66661c8276c219.html#a8755d2c1c429a6e46a66661c8276c219">mg_mqtt_puback</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint16_t message_id);</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;<span class="comment">/* Sends a PUBREC command with a given `message_id`. */</span></div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_aac203b0b75c3c6e3cb8fcb8f56b984c7.html#aac203b0b75c3c6e3cb8fcb8f56b984c7">mg_mqtt_pubrec</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint16_t message_id);</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;<span class="comment">/* Sends a PUBREL command with a given `message_id`. */</span></div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_af61196528db9402aae10ac9e2339b657.html#af61196528db9402aae10ac9e2339b657">mg_mqtt_pubrel</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint16_t message_id);</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;<span class="comment">/* Sends a PUBCOMP command with a given `message_id`. */</span></div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a2e0549498ee17cc8829e43301f3da235.html#a2e0549498ee17cc8829e43301f3da235">mg_mqtt_pubcomp</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint16_t message_id);</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;<span class="comment"> * Sends a SUBACK command with a given `message_id`</span></div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;<span class="comment"> * and a sequence of granted QoSs.</span></div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ab640f92c3ed206f3c8cdae4fc76fe553.html#ab640f92c3ed206f3c8cdae4fc76fe553">mg_mqtt_suback</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint8_t *qoss, <span class="keywordtype">size_t</span> qoss_len,</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;                    uint16_t message_id);</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;<span class="comment">/* Sends a UNSUBACK command with a given `message_id`. */</span></div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_abd2b5b0874803614548d497856aa02a1.html#abd2b5b0874803614548d497856aa02a1">mg_mqtt_unsuback</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint16_t message_id);</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;<span class="comment">/* Sends a PINGREQ command. */</span></div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a006a9d8d665592d4f185f9f93913a6ec.html#a006a9d8d665592d4f185f9f93913a6ec">mg_mqtt_ping</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;<span class="comment">/* Sends a PINGRESP command. */</span></div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a25d58e0edd722222c88a2d6d8b4cac9b.html#a25d58e0edd722222c88a2d6d8b4cac9b">mg_mqtt_pong</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;<span class="comment"> * Extracts the next topic expression from a SUBSCRIBE command payload.</span></div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;<span class="comment"> * The topic expression name will point to a string in the payload buffer.</span></div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;<span class="comment"> * Returns the pos of the next topic expression or -1 when the list</span></div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;<span class="comment"> * of topics is exhausted.</span></div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_af87c977d7706368c60d29eedcdbc3bb7.html#af87c977d7706368c60d29eedcdbc3bb7">mg_mqtt_next_subscribe_topic</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mqtt__message.html">mg_mqtt_message</a> *msg,</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *topic, uint8_t *qos, <span class="keywordtype">int</span> pos);</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;<span class="comment"> * Matches a topic against a topic expression</span></div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;<span class="comment"> * Returns 1 if it matches; 0 otherwise.</span></div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aa718a4e8e712cf409544b9f31d0fc9e4.html#aa718a4e8e712cf409544b9f31d0fc9e4">mg_mqtt_match_topic_expression</a>(<span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> exp, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> topic);</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;<span class="comment"> * Same as `mg_mqtt_match_topic_expression()`, but takes `exp` as a</span></div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;<span class="comment"> * NULL-terminated string.</span></div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_acd8e58739ec13389ed8752ae93f71a64.html#acd8e58739ec13389ed8752ae93f71a64">mg_mqtt_vmatch_topic_expression</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *exp, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> topic);</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;}</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_MQTT_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/mqtt_server.h&quot;</span></div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;<span class="comment"> * This software is dual-licensed: you can redistribute it and/or modify</span></div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License version 2 as</span></div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;<span class="comment"> * published by the Free Software Foundation. For the terms of this</span></div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;<span class="comment"> * license, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;<span class="comment"> * You are free to use this software under the terms of the GNU General</span></div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;<span class="comment"> * Public License, but WITHOUT ANY WARRANTY; without even the implied</span></div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;<span class="comment"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;<span class="comment"> * See the GNU General Public License for more details.</span></div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;<span class="comment"> * Alternatively, you can license this software under a commercial</span></div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;<span class="comment"> * license, as set out in &lt;https://www.cesanta.com/license&gt;.</span></div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;<span class="comment"> * === MQTT Server API reference</span></div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_MQTT_BROKER_H_</span></div><div class="line"><a name="l05401"></a><span class="lineno"><a class="line" href="mongoose_8h_a45a750baad11325d2a0b2f0d8701eaea.html#a45a750baad11325d2a0b2f0d8701eaea"> 5401</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_MQTT_BROKER_H_</span></div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;<span class="preprocessor">#if MG_ENABLE_MQTT_BROKER</span></div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;<span class="comment">/* Amalgamated: #include &quot;common/queue.h&quot; */</span></div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/mqtt.h&quot; */</span></div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;<span class="preprocessor">#ifndef MG_MQTT_MAX_SESSION_SUBSCRIPTIONS</span></div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;<span class="preprocessor">#define MG_MQTT_MAX_SESSION_SUBSCRIPTIONS 512</span></div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;<span class="keyword">struct </span>mg_mqtt_broker;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;<span class="comment">/* MQTT session (Broker side). */</span></div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;<span class="keyword">struct </span>mg_mqtt_session {</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;  <span class="keyword">struct </span>mg_mqtt_broker *brk;       <span class="comment">/* Broker */</span></div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;  <a class="code" href="mongoose_8h_aec2ccd0e8c215504508af23f04480be6.html#aec2ccd0e8c215504508af23f04480be6">LIST_ENTRY</a>(mg_mqtt_session) link; <span class="comment">/* mg_mqtt_broker::sessions linkage */</span></div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *nc;         <span class="comment">/* Connection with the client */</span></div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;  <span class="keywordtype">size_t</span> num_subscriptions;         <span class="comment">/* Size of `subscriptions` array */</span></div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>;                  <span class="comment">/* User data */</span></div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__mqtt__topic__expression.html">mg_mqtt_topic_expression</a> *subscriptions;</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;};</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;<span class="comment">/* MQTT broker. */</span></div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;<span class="keyword">struct </span>mg_mqtt_broker {</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;  <a class="code" href="mongoose_8h_ae72219f63b2fe9bce774a64e11404179.html#ae72219f63b2fe9bce774a64e11404179">LIST_HEAD</a>(_mg_sesshead, mg_mqtt_session) sessions; <span class="comment">/* Session list */</span></div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;  <span class="keywordtype">void</span> *user_data;                                   <span class="comment">/* User data */</span></div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;};</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;<span class="comment">/* Initialises a MQTT broker. */</span></div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;<span class="keywordtype">void</span> mg_mqtt_broker_init(<span class="keyword">struct</span> mg_mqtt_broker *brk, <span class="keywordtype">void</span> *user_data);</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;<span class="comment"> * Processes a MQTT broker message.</span></div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;<span class="comment"> * The listening connection expects a pointer to an initialised</span></div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;<span class="comment"> * `mg_mqtt_broker` structure in the `user_data` field.</span></div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;<span class="comment"> * Basic usage:</span></div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;<span class="comment"> * mg_mqtt_broker_init(&amp;brk, NULL);</span></div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;<span class="comment"> * if ((nc = mg_bind(&amp;mgr, address, mg_mqtt_broker)) == NULL) {</span></div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;<span class="comment"> *   // fail;</span></div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;<span class="comment"> * nc-&gt;user_data = &amp;brk;</span></div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;<span class="comment"> * New incoming connections will receive a `mg_mqtt_session` structure</span></div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;<span class="comment"> * in the connection `user_data`. The original `user_data` will be stored</span></div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;<span class="comment"> * in the `user_data` field of the session structure. This allows the user</span></div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;<span class="comment"> * handler to store user data before `mg_mqtt_broker` creates the session.</span></div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;<span class="comment"> * Since only the MG_EV_ACCEPT message is processed by the listening socket,</span></div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;<span class="comment"> * for most events the `user_data` will thus point to a `mg_mqtt_session`.</span></div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;<span class="keywordtype">void</span> mg_mqtt_broker(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *brk, <span class="keywordtype">int</span> ev, <span class="keywordtype">void</span> *data);</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;<span class="comment"> * Iterates over all MQTT session connections. Example:</span></div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;<span class="comment"> * struct mg_mqtt_session *s;</span></div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;<span class="comment"> * for (s = mg_mqtt_next(brk, NULL); s != NULL; s = mg_mqtt_next(brk, s)) {</span></div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;<span class="comment"> *   // Do something</span></div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;<span class="keyword">struct </span>mg_mqtt_session *mg_mqtt_next(<span class="keyword">struct</span> mg_mqtt_broker *brk,</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;                                     <span class="keyword">struct</span> mg_mqtt_session *s);</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;}</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_MQTT_BROKER */</span><span class="preprocessor"></span></div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_MQTT_BROKER_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/dns.h&quot;</span></div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;<span class="comment"> * === DNS API reference</span></div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_DNS_H_</span></div><div class="line"><a name="l05496"></a><span class="lineno"><a class="line" href="mongoose_8h_a7fe60f63a0cc61c8cd71dbef725270c7.html#a7fe60f63a0cc61c8cd71dbef725270c7"> 5496</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_DNS_H_</span></div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/net.h&quot; */</span></div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;</div><div class="line"><a name="l05504"></a><span class="lineno"><a class="line" href="mongoose_8h_a70b2c1dc86aa4f3d6e54771db39864de.html#a70b2c1dc86aa4f3d6e54771db39864de"> 5504</a></span>&#160;<span class="preprocessor">#define MG_DNS_A_RECORD 0x01     </span><span class="comment">/* Lookup IP address */</span><span class="preprocessor"></span></div><div class="line"><a name="l05505"></a><span class="lineno"><a class="line" href="mongoose_8h_a5b3d185901e6bbb5639f43ed248957d7.html#a5b3d185901e6bbb5639f43ed248957d7"> 5505</a></span>&#160;<span class="preprocessor">#define MG_DNS_CNAME_RECORD 0x05 </span><span class="comment">/* Lookup CNAME */</span><span class="preprocessor"></span></div><div class="line"><a name="l05506"></a><span class="lineno"><a class="line" href="mongoose_8h_af8fe72ace3457c290cf497eb6a86fed6.html#af8fe72ace3457c290cf497eb6a86fed6"> 5506</a></span>&#160;<span class="preprocessor">#define MG_DNS_PTR_RECORD 0x0c   </span><span class="comment">/* Lookup PTR */</span><span class="preprocessor"></span></div><div class="line"><a name="l05507"></a><span class="lineno"><a class="line" href="mongoose_8h_ae317239a8c6733e1138a8b3ad03b2a26.html#ae317239a8c6733e1138a8b3ad03b2a26"> 5507</a></span>&#160;<span class="preprocessor">#define MG_DNS_TXT_RECORD 0x10   </span><span class="comment">/* Lookup TXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l05508"></a><span class="lineno"><a class="line" href="mongoose_8h_a37e3cf159528fdc6aa81d0d2038dc08e.html#a37e3cf159528fdc6aa81d0d2038dc08e"> 5508</a></span>&#160;<span class="preprocessor">#define MG_DNS_AAAA_RECORD 0x1c  </span><span class="comment">/* Lookup IPv6 address */</span><span class="preprocessor"></span></div><div class="line"><a name="l05509"></a><span class="lineno"><a class="line" href="mongoose_8h_a08bd2dfc9820e1242db9550077cacdef.html#a08bd2dfc9820e1242db9550077cacdef"> 5509</a></span>&#160;<span class="preprocessor">#define MG_DNS_SRV_RECORD 0x21   </span><span class="comment">/* Lookup SRV */</span><span class="preprocessor"></span></div><div class="line"><a name="l05510"></a><span class="lineno"><a class="line" href="mongoose_8h_adfb7692a8bd7fd34709807c9140c4e75.html#adfb7692a8bd7fd34709807c9140c4e75"> 5510</a></span>&#160;<span class="preprocessor">#define MG_DNS_MX_RECORD 0x0f    </span><span class="comment">/* Lookup mail server for domain */</span><span class="preprocessor"></span></div><div class="line"><a name="l05511"></a><span class="lineno"><a class="line" href="mongoose_8h_ab8441ddecac87c9f52c2112824227b54.html#ab8441ddecac87c9f52c2112824227b54"> 5511</a></span>&#160;<span class="preprocessor">#define MG_DNS_ANY_RECORD 0xff</span></div><div class="line"><a name="l05512"></a><span class="lineno"><a class="line" href="mongoose_8h_a8a085bb70a7c72f2c99e48ad4210b0b0.html#a8a085bb70a7c72f2c99e48ad4210b0b0"> 5512</a></span>&#160;<span class="preprocessor">#define MG_DNS_NSEC_RECORD 0x2f</span></div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;</div><div class="line"><a name="l05514"></a><span class="lineno"><a class="line" href="mongoose_8h_a84f36ff9caf50e0d70d10244a2c64b45.html#a84f36ff9caf50e0d70d10244a2c64b45"> 5514</a></span>&#160;<span class="preprocessor">#define MG_MAX_DNS_QUESTIONS 32</span></div><div class="line"><a name="l05515"></a><span class="lineno"><a class="line" href="mongoose_8h_a1832d47a93efb88b807286ed1ae80646.html#a1832d47a93efb88b807286ed1ae80646"> 5515</a></span>&#160;<span class="preprocessor">#define MG_MAX_DNS_ANSWERS 32</span></div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;</div><div class="line"><a name="l05517"></a><span class="lineno"><a class="line" href="mongoose_8h_aa35cf5785762bc43af99942199253f06.html#aa35cf5785762bc43af99942199253f06"> 5517</a></span>&#160;<span class="preprocessor">#define MG_DNS_MESSAGE 100 </span><span class="comment">/* High-level DNS message event */</span><span class="preprocessor"></span></div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;</div><div class="line"><a name="l05519"></a><span class="lineno"><a class="line" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523d"> 5519</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523d">mg_dns_resource_record_kind</a> {</div><div class="line"><a name="l05520"></a><span class="lineno"><a class="line" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523da040994f9cd7f4d58856a996e51e778f9"> 5520</a></span>&#160;  <a class="code" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523da040994f9cd7f4d58856a996e51e778f9">MG_DNS_INVALID_RECORD</a> = 0,</div><div class="line"><a name="l05521"></a><span class="lineno"><a class="line" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523daa0729979378c7d0c1658e1502a531f91"> 5521</a></span>&#160;  <a class="code" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523daa0729979378c7d0c1658e1502a531f91">MG_DNS_QUESTION</a>,</div><div class="line"><a name="l05522"></a><span class="lineno"><a class="line" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523da6ddce58b99210fa84e2b4d0e13770985"> 5522</a></span>&#160;  <a class="code" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523da6ddce58b99210fa84e2b4d0e13770985">MG_DNS_ANSWER</a></div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;};</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;<span class="comment">/* DNS resource record. */</span></div><div class="line"><a name="l05526"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record.html"> 5526</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> {</div><div class="line"><a name="l05527"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48.html#afd27e187a02127a98a04757013aecd48"> 5527</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> name; <span class="comment">/* buffer with compressed name */</span></div><div class="line"><a name="l05528"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record_a9d314632522fcca513858285c639bee9.html#a9d314632522fcca513858285c639bee9"> 5528</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__dns__resource__record_a9d314632522fcca513858285c639bee9.html#a9d314632522fcca513858285c639bee9">rtype</a>;</div><div class="line"><a name="l05529"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record_a9be7dc2d7ef4e2dc20413289a55f6ff7.html#a9be7dc2d7ef4e2dc20413289a55f6ff7"> 5529</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__dns__resource__record_a9be7dc2d7ef4e2dc20413289a55f6ff7.html#a9be7dc2d7ef4e2dc20413289a55f6ff7">rclass</a>;</div><div class="line"><a name="l05530"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record_aa5d1c1a7ba2d02908c27fab68ded25be.html#aa5d1c1a7ba2d02908c27fab68ded25be"> 5530</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__dns__resource__record_aa5d1c1a7ba2d02908c27fab68ded25be.html#aa5d1c1a7ba2d02908c27fab68ded25be">ttl</a>;</div><div class="line"><a name="l05531"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record_a6f9d5dda9d8ae9240a74282c44d4a555.html#a6f9d5dda9d8ae9240a74282c44d4a555"> 5531</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523d">mg_dns_resource_record_kind</a> kind;</div><div class="line"><a name="l05532"></a><span class="lineno"><a class="line" href="structmg__dns__resource__record_ac169801d0c9ce94137fcce9a3f629152.html#ac169801d0c9ce94137fcce9a3f629152"> 5532</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> rdata; <span class="comment">/* protocol data (can be a compressed name) */</span></div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;};</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;<span class="comment">/* DNS message (request and response). */</span></div><div class="line"><a name="l05536"></a><span class="lineno"><a class="line" href="structmg__dns__message.html"> 5536</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__dns__message.html">mg_dns_message</a> {</div><div class="line"><a name="l05537"></a><span class="lineno"><a class="line" href="structmg__dns__message_ae8543b2a3044c785b4bf0dc4fc39beff.html#ae8543b2a3044c785b4bf0dc4fc39beff"> 5537</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> pkt; <span class="comment">/* packet body */</span></div><div class="line"><a name="l05538"></a><span class="lineno"><a class="line" href="structmg__dns__message_a87f916bb55651d46ce74f930a5e08327.html#a87f916bb55651d46ce74f930a5e08327"> 5538</a></span>&#160;  uint16_t <a class="code" href="structmg__dns__message_a87f916bb55651d46ce74f930a5e08327.html#a87f916bb55651d46ce74f930a5e08327">flags</a>;</div><div class="line"><a name="l05539"></a><span class="lineno"><a class="line" href="structmg__dns__message_afb4a01337779347f74a214c7a273ebcb.html#afb4a01337779347f74a214c7a273ebcb"> 5539</a></span>&#160;  uint16_t <a class="code" href="structmg__dns__message_afb4a01337779347f74a214c7a273ebcb.html#afb4a01337779347f74a214c7a273ebcb">transaction_id</a>;</div><div class="line"><a name="l05540"></a><span class="lineno"><a class="line" href="structmg__dns__message_a035ced22ef43b6b23ad6df3ad3aad126.html#a035ced22ef43b6b23ad6df3ad3aad126"> 5540</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__dns__message_a035ced22ef43b6b23ad6df3ad3aad126.html#a035ced22ef43b6b23ad6df3ad3aad126">num_questions</a>;</div><div class="line"><a name="l05541"></a><span class="lineno"><a class="line" href="structmg__dns__message_a6ebecefbdcb5c292f439123b7c780517.html#a6ebecefbdcb5c292f439123b7c780517"> 5541</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__dns__message_a6ebecefbdcb5c292f439123b7c780517.html#a6ebecefbdcb5c292f439123b7c780517">num_answers</a>;</div><div class="line"><a name="l05542"></a><span class="lineno"><a class="line" href="structmg__dns__message_a866a83825f2daa4043aa20acded4f007.html#a866a83825f2daa4043aa20acded4f007"> 5542</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> questions[<a class="code" href="mongoose_8h_a84f36ff9caf50e0d70d10244a2c64b45.html#a84f36ff9caf50e0d70d10244a2c64b45">MG_MAX_DNS_QUESTIONS</a>];</div><div class="line"><a name="l05543"></a><span class="lineno"><a class="line" href="structmg__dns__message_a76e7c9d2d5f7f621df2d2551f0163e01.html#a76e7c9d2d5f7f621df2d2551f0163e01"> 5543</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> answers[<a class="code" href="mongoose_8h_a1832d47a93efb88b807286ed1ae80646.html#a1832d47a93efb88b807286ed1ae80646">MG_MAX_DNS_ANSWERS</a>];</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;};</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> *<a class="code" href="mongoose_8h_a130d32ddb7c73fc58222bf5165394b79.html#a130d32ddb7c73fc58222bf5165394b79">mg_dns_next_record</a>(</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg, <span class="keywordtype">int</span> query, <span class="keyword">struct</span> <a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> *prev);</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;<span class="comment"> * Parses the record data from a DNS resource record.</span></div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;<span class="comment"> *  - A:     struct in_addr *ina</span></div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;<span class="comment"> *  - AAAA:  struct in6_addr *ina</span></div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;<span class="comment"> *  - CNAME: char buffer</span></div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;<span class="comment"> * Returns -1 on error.</span></div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;<span class="comment"> * TODO(mkm): MX</span></div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aebdeb217cebb5f134c84baab1369b2e3.html#aebdeb217cebb5f134c84baab1369b2e3">mg_dns_parse_record_data</a>(<span class="keyword">struct</span> <a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg,</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;                             <span class="keyword">struct</span> <a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> *rr, <span class="keywordtype">void</span> *data,</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;                             <span class="keywordtype">size_t</span> data_len);</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;</div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;<span class="comment"> * Sends a DNS query to the remote end.</span></div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a080dc50cfd880656bc8e79513c62fc2d.html#a080dc50cfd880656bc8e79513c62fc2d">mg_send_dns_query</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48.html#afd27e187a02127a98a04757013aecd48">name</a>,</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;                       <span class="keywordtype">int</span> query_type);</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;<span class="comment"> * Inserts a DNS header to an IO buffer.</span></div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;<span class="comment"> * Returns the number of bytes inserted.</span></div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a2cbd4a7623976a4a7f4afd779861f6bb.html#a2cbd4a7623976a4a7f4afd779861f6bb">mg_dns_insert_header</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *io, <span class="keywordtype">size_t</span> pos,</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg);</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;<span class="comment"> * Appends already encoded questions from an existing message.</span></div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;<span class="comment"> * This is useful when generating a DNS reply message which includes</span></div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;<span class="comment"> * all question records.</span></div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;<span class="comment"> * Returns the number of appended bytes.</span></div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ad92c952f7a90d0ddc227a0fbaeb41aad.html#ad92c952f7a90d0ddc227a0fbaeb41aad">mg_dns_copy_questions</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *io, <span class="keyword">struct</span> <a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg);</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;<span class="comment"> * Encodes and appends a DNS resource record to an IO buffer.</span></div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;<span class="comment"> * The record metadata is taken from the `rr` parameter, while the name and data</span></div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;<span class="comment"> * are taken from the parameters, encoded in the appropriate format depending on</span></div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;<span class="comment"> * record type and stored in the IO buffer. The encoded values might contain</span></div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;<span class="comment"> * offsets within the IO buffer. It&#39;s thus important that the IO buffer doesn&#39;t</span></div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;<span class="comment"> * get trimmed while a sequence of records are encoded while preparing a DNS</span></div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;<span class="comment"> * reply.</span></div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;<span class="comment"> * This function doesn&#39;t update the `name` and `rdata` pointers in the `rr`</span></div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;<span class="comment"> * struct because they might be invalidated as soon as the IO buffer grows</span></div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;<span class="comment"> * again.</span></div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;<span class="comment"> * Returns the number of bytes appended or -1 in case of error.</span></div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a25b56c78c499f837955faa1a52b5d7e5.html#a25b56c78c499f837955faa1a52b5d7e5">mg_dns_encode_record</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *io, <span class="keyword">struct</span> <a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> *rr,</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48.html#afd27e187a02127a98a04757013aecd48">name</a>, <span class="keywordtype">size_t</span> nlen, <span class="keyword">const</span> <span class="keywordtype">void</span> *rdata,</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;                         <span class="keywordtype">size_t</span> rlen);</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;<span class="comment"> * Encodes a DNS name.</span></div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_aca70cc85f25278380c14fd01c135fdce.html#aca70cc85f25278380c14fd01c135fdce">mg_dns_encode_name</a>(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *io, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48.html#afd27e187a02127a98a04757013aecd48">name</a>, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;<span class="comment">/* Low-level: parses a DNS response. */</span></div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_ab965bcfe8bc9e43a27ced4390301ea28.html#ab965bcfe8bc9e43a27ced4390301ea28">mg_parse_dns</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *buf, <span class="keywordtype">int</span> len, <span class="keyword">struct</span> <a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg);</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;<span class="comment"> * Uncompresses a DNS compressed name.</span></div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;<span class="comment"> * The containing DNS message is required because of the compressed encoding</span></div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;<span class="comment"> * and reference suffixes present elsewhere in the packet.</span></div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;<span class="comment"> * If the name is less than `dst_len` characters long, the remainder</span></div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;<span class="comment"> * of `dst` is terminated with `\0` characters. Otherwise, `dst` is not</span></div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;<span class="comment"> * terminated.</span></div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;<span class="comment"> * If `dst_len` is 0 `dst` can be NULL.</span></div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;<span class="comment"> * Returns the uncompressed name length.</span></div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mongoose_8h_ad8632dc50f1013eddb59c461554c291c.html#ad8632dc50f1013eddb59c461554c291c">mg_dns_uncompress_name</a>(<span class="keyword">struct</span> <a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg, <span class="keyword">struct</span> <a class="code" href="structmg__str.html">mg_str</a> *<a class="code" href="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48.html#afd27e187a02127a98a04757013aecd48">name</a>,</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;                              <span class="keywordtype">char</span> *dst, <span class="keywordtype">int</span> dst_len);</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;<span class="comment"> * Attaches a built-in DNS event handler to the given listening connection.</span></div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;<span class="comment"> * The DNS event handler parses the incoming UDP packets, treating them as DNS</span></div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;<span class="comment"> * requests. If an incoming packet gets successfully parsed by the DNS event</span></div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;<span class="comment"> * handler, a user event handler will receive an `MG_DNS_REQUEST` event, with</span></div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;<span class="comment"> * `ev_data` pointing to the parsed `struct mg_dns_message`.</span></div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;<span class="comment"> * See</span></div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;<span class="comment"> * [captive_dns_server](https://github.com/cesanta/mongoose/tree/master/examples/captive_dns_server)</span></div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;<span class="comment"> * example on how to handle DNS request and send DNS reply.</span></div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_ab35d9402402a39d7d6e47c8426807cda.html#ab35d9402402a39d7d6e47c8426807cda">mg_set_protocol_dns</a>(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;}</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_DNS_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/dns_server.h&quot;</span></div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;</div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;<span class="comment"> * === DNS server API reference</span></div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;<span class="comment"> * Disabled by default; enable with `-DMG_ENABLE_DNS_SERVER`.</span></div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_DNS_SERVER_H_</span></div><div class="line"><a name="l05665"></a><span class="lineno"><a class="line" href="mongoose_8h_a223d06125ee68b58ce1e1e9a08c405d8.html#a223d06125ee68b58ce1e1e9a08c405d8"> 5665</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_DNS_SERVER_H_</span></div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;<span class="preprocessor">#if MG_ENABLE_DNS_SERVER</span></div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/dns.h&quot; */</span></div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;<span class="preprocessor">#define MG_DNS_SERVER_DEFAULT_TTL 3600</span></div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;<span class="keyword">struct </span>mg_dns_reply {</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg;</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmbuf.html">mbuf</a> *io;</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;  <span class="keywordtype">size_t</span> start;</div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;};</div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;<span class="comment"> * Creates a DNS reply.</span></div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;<span class="comment"> * The reply will be based on an existing query message `msg`.</span></div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;<span class="comment"> * The query body will be appended to the output buffer.</span></div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;<span class="comment"> * &quot;reply + recursion allowed&quot; will be added to the message flags and the</span></div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;<span class="comment"> * message&#39;s num_answers will be set to 0.</span></div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;<span class="comment"> * Answer records can be appended with `mg_dns_send_reply` or by lower</span></div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;<span class="comment"> * level function defined in the DNS API.</span></div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;<span class="comment"> * In order to send a reply use `mg_dns_send_reply`.</span></div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;<span class="comment"> * It&#39;s possible to use a connection&#39;s send buffer as reply buffer,</span></div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;<span class="comment"> * and it will work for both UDP and TCP connections.</span></div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;<span class="comment"> * Example:</span></div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;<span class="comment"> * ```c</span></div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;<span class="comment"> * reply = mg_dns_create_reply(&amp;nc-&gt;send_mbuf, msg);</span></div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;<span class="comment"> * for (i = 0; i &lt; msg-&gt;num_questions; i++) {</span></div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;<span class="comment"> *   rr = &amp;msg-&gt;questions[i];</span></div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;<span class="comment"> *   if (rr-&gt;rtype == MG_DNS_A_RECORD) {</span></div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;<span class="comment"> *     mg_dns_reply_record(&amp;reply, rr, 3600, &amp;dummy_ip_addr, 4);</span></div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;<span class="comment"> *   }</span></div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;<span class="comment"> * }</span></div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;<span class="comment"> * mg_dns_send_reply(nc, &amp;reply);</span></div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;<span class="keyword">struct </span>mg_dns_reply mg_dns_create_reply(struct mbuf *io,</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;                                        <span class="keyword">struct </span><a class="code" href="structmg__dns__message.html">mg_dns_message</a> *msg);</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;<span class="comment"> * Appends a DNS reply record to the IO buffer and to the DNS message.</span></div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;<span class="comment"> * The message&#39;s num_answers field will be incremented. It&#39;s the caller&#39;s duty</span></div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;<span class="comment"> * to ensure num_answers is properly initialised.</span></div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;<span class="comment"> * Returns -1 on error.</span></div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;<span class="keywordtype">int</span> mg_dns_reply_record(<span class="keyword">struct</span> mg_dns_reply *reply,</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;                        <span class="keyword">struct</span> <a class="code" href="structmg__dns__resource__record.html">mg_dns_resource_record</a> *question,</div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> rtype, <span class="keywordtype">int</span> ttl, <span class="keyword">const</span> <span class="keywordtype">void</span> *rdata,</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;                        <span class="keywordtype">size_t</span> rdata_len);</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;<span class="comment"> * Sends a DNS reply through a connection.</span></div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;<span class="comment"> * The DNS data is stored in an IO buffer pointed by reply structure in `r`.</span></div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;<span class="comment"> * This function mutates the content of that buffer in order to ensure that</span></div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;<span class="comment"> * the DNS header reflects the size and flags of the message, that might have</span></div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;<span class="comment"> * been updated either with `mg_dns_reply_record` or by direct manipulation of</span></div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;<span class="comment"> * `r-&gt;message`.</span></div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;<span class="comment"> * Once sent, the IO buffer will be trimmed unless the reply IO buffer</span></div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;<span class="comment"> * is the connection&#39;s send buffer and the connection is not in UDP mode.</span></div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;<span class="keywordtype">void</span> mg_dns_send_reply(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, <span class="keyword">struct</span> mg_dns_reply *r);</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;}</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_DNS_SERVER */</span><span class="preprocessor"></span></div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_DNS_SERVER_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/resolv.h&quot;</span></div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;<span class="comment"> * Copyright (c) 2014 Cesanta Software Limited</span></div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;<span class="comment"> * === API reference</span></div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_RESOLV_H_</span></div><div class="line"><a name="l05760"></a><span class="lineno"><a class="line" href="mongoose_8h_a4f4e0f89fc2f7e7c6716d55958548ddc.html#a4f4e0f89fc2f7e7c6716d55958548ddc"> 5760</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_RESOLV_H_</span></div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;<span class="comment">/* Amalgamated: #include &quot;mongoose/src/dns.h&quot; */</span></div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;</div><div class="line"><a name="l05768"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9"> 5768</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9">mg_resolve_err</a> {</div><div class="line"><a name="l05769"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9ad5e3180ee26f6b358b9692b471424615"> 5769</a></span>&#160;  <a class="code" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9ad5e3180ee26f6b358b9692b471424615">MG_RESOLVE_OK</a> = 0,</div><div class="line"><a name="l05770"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9aed7b4c97d10cc18cab15c2219cdc06a4"> 5770</a></span>&#160;  <a class="code" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9aed7b4c97d10cc18cab15c2219cdc06a4">MG_RESOLVE_NO_ANSWERS</a> = 1,</div><div class="line"><a name="l05771"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9ad00b64839df458acf79081a2f7e74ff2"> 5771</a></span>&#160;  <a class="code" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9ad00b64839df458acf79081a2f7e74ff2">MG_RESOLVE_EXCEEDED_RETRY_COUNT</a> = 2,</div><div class="line"><a name="l05772"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9a974987bbd29f526f623288c0a801c471"> 5772</a></span>&#160;  <a class="code" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9a974987bbd29f526f623288c0a801c471">MG_RESOLVE_TIMEOUT</a> = 3</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;};</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;</div><div class="line"><a name="l05775"></a><span class="lineno"><a class="line" href="mongoose_8h_acb5c96f1b5d26b71d4b397fc2b2fda54.html#acb5c96f1b5d26b71d4b397fc2b2fda54"> 5775</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="mongoose_8h_acb5c96f1b5d26b71d4b397fc2b2fda54.html#acb5c96f1b5d26b71d4b397fc2b2fda54">mg_resolve_callback_t</a>)(<span class="keyword">struct </span><a class="code" href="structmg__dns__message.html">mg_dns_message</a> *dns_message,</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;                                      <span class="keywordtype">void</span> *user_data, <span class="keyword">enum</span> <a class="code" href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9">mg_resolve_err</a>);</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;<span class="comment">/* Options for `mg_resolve_async_opt`. */</span></div><div class="line"><a name="l05779"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts.html"> 5779</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__resolve__async__opts.html">mg_resolve_async_opts</a> {</div><div class="line"><a name="l05780"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts_a2fb7183d887260a2b3576e47641e96dc.html#a2fb7183d887260a2b3576e47641e96dc"> 5780</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmg__resolve__async__opts_a2fb7183d887260a2b3576e47641e96dc.html#a2fb7183d887260a2b3576e47641e96dc">nameserver</a>;</div><div class="line"><a name="l05781"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts_a6db0305ac9736d2f98507ce07bebcd59.html#a6db0305ac9736d2f98507ce07bebcd59"> 5781</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__resolve__async__opts_a6db0305ac9736d2f98507ce07bebcd59.html#a6db0305ac9736d2f98507ce07bebcd59">max_retries</a>;    <span class="comment">/* defaults to 2 if zero */</span></div><div class="line"><a name="l05782"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts_adeb3e0102e6e1eb86340e86fcc2b3560.html#adeb3e0102e6e1eb86340e86fcc2b3560"> 5782</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__resolve__async__opts_adeb3e0102e6e1eb86340e86fcc2b3560.html#adeb3e0102e6e1eb86340e86fcc2b3560">timeout</a>;        <span class="comment">/* in seconds; defaults to 5 if zero */</span></div><div class="line"><a name="l05783"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts_a9e7955b13fd4cac697a92ca28dff30ae.html#a9e7955b13fd4cac697a92ca28dff30ae"> 5783</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__resolve__async__opts_a9e7955b13fd4cac697a92ca28dff30ae.html#a9e7955b13fd4cac697a92ca28dff30ae">accept_literal</a>; <span class="comment">/* pseudo-resolve literal ipv4 and ipv6 addrs */</span></div><div class="line"><a name="l05784"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts_ae7bb70da865548e33663e1292e334293.html#ae7bb70da865548e33663e1292e334293"> 5784</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structmg__resolve__async__opts_ae7bb70da865548e33663e1292e334293.html#ae7bb70da865548e33663e1292e334293">only_literal</a>;   <span class="comment">/* only resolves literal addrs; sync cb invocation */</span></div><div class="line"><a name="l05785"></a><span class="lineno"><a class="line" href="structmg__resolve__async__opts_ac82e8d612fe2f822fc99ca3bd2d9921c.html#ac82e8d612fe2f822fc99ca3bd2d9921c"> 5785</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> **<a class="code" href="structmg__resolve__async__opts_ac82e8d612fe2f822fc99ca3bd2d9921c.html#ac82e8d612fe2f822fc99ca3bd2d9921c">dns_conn</a>; <span class="comment">/* return DNS connection */</span></div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;};</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;<span class="comment">/* See `mg_resolve_async_opt()` */</span></div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a32b1220140b7bcee01f64ac254237f0d.html#a32b1220140b7bcee01f64ac254237f0d">mg_resolve_async</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> query,</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;                     <a class="code" href="mongoose_8h_acb5c96f1b5d26b71d4b397fc2b2fda54.html#acb5c96f1b5d26b71d4b397fc2b2fda54">mg_resolve_callback_t</a> cb, <span class="keywordtype">void</span> *data);</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;<span class="comment">/* Set default DNS server */</span></div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mongoose_8h_a11a8939e058117e6e8dc25c68d267450.html#a11a8939e058117e6e8dc25c68d267450">mg_set_nameserver</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *nameserver);</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;<span class="comment"> * Resolved a DNS name asynchronously.</span></div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;<span class="comment"> * Upon successful resolution, the user callback will be invoked</span></div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;<span class="comment"> * with the full DNS response message and a pointer to the user&#39;s</span></div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;<span class="comment"> * context `data`.</span></div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;<span class="comment"> * In case of timeout while performing the resolution the callback</span></div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;<span class="comment"> * will receive a NULL `msg`.</span></div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;<span class="comment"> * The DNS answers can be extracted with `mg_next_record` and</span></div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;<span class="comment"> * `mg_dns_parse_record_data`:</span></div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;<span class="comment"> * [source,c]</span></div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;<span class="comment"> * ----</span></div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;<span class="comment"> * struct in_addr ina;</span></div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;<span class="comment"> * struct mg_dns_resource_record *rr = mg_next_record(msg, MG_DNS_A_RECORD,</span></div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;<span class="comment"> *   NULL);</span></div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;<span class="comment"> * mg_dns_parse_record_data(msg, rr, &amp;ina, sizeof(ina));</span></div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;<span class="comment"> * ----</span></div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a1db131b77c3d3046fc7aa7577b52dfae.html#a1db131b77c3d3046fc7aa7577b52dfae">mg_resolve_async_opt</a>(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> query,</div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;                         <a class="code" href="mongoose_8h_acb5c96f1b5d26b71d4b397fc2b2fda54.html#acb5c96f1b5d26b71d4b397fc2b2fda54">mg_resolve_callback_t</a> cb, <span class="keywordtype">void</span> *data,</div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structmg__resolve__async__opts.html">mg_resolve_async_opts</a> opts);</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;<span class="comment"> * Resolve a name from `/etc/hosts`.</span></div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;<span class="comment"> * Returns 0 on success, -1 on failure.</span></div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mongoose_8h_a01b40ebd30681c3d77814be6e5ac2a55.html#a01b40ebd30681c3d77814be6e5ac2a55">mg_resolve_from_hosts_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *host, <span class="keyword">union</span> <a class="code" href="unionsocket__address.html">socket_address</a> *usa);</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;}</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_RESOLV_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/coap.h&quot;</span></div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;<span class="comment"> * Copyright (c) 2015 Cesanta Software Limited</span></div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;<span class="comment"> * This software is dual-licensed: you can redistribute it and/or modify</span></div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License version 2 as</span></div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;<span class="comment"> * published by the Free Software Foundation. For the terms of this</span></div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;<span class="comment"> * license, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;<span class="comment"> * You are free to use this software under the terms of the GNU General</span></div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;<span class="comment"> * Public License, but WITHOUT ANY WARRANTY; without even the implied</span></div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;<span class="comment"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;<span class="comment"> * See the GNU General Public License for more details.</span></div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;<span class="comment"> * Alternatively, you can license this software under a commercial</span></div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;<span class="comment"> * license, as set out in &lt;https://www.cesanta.com/license&gt;.</span></div><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;<span class="comment"> * === CoAP API reference</span></div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;<span class="comment"> * CoAP message format:</span></div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;<span class="comment"> * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-</span></div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;<span class="comment"> * |Ver| T | TKL | Code | Message ID | Token (if any, TKL bytes) ...</span></div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;<span class="comment"> * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-</span></div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;<span class="comment"> * | Options (if any) ...            |1 1 1 1 1 1 1 1| Payload (if any) ...</span></div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;<span class="comment"> * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-</span></div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;<span class="comment"> * ```</span></div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_COAP_H_</span></div><div class="line"><a name="l05866"></a><span class="lineno"><a class="line" href="mongoose_8h_a4c30ff5b1e35dbbc20e9c0183f9d0b62.html#a4c30ff5b1e35dbbc20e9c0183f9d0b62"> 5866</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_COAP_H_</span></div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;</div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;<span class="preprocessor">#if MG_ENABLE_COAP</span></div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_TYPE_FIELD 0x2</span></div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;<span class="preprocessor">#define MG_COAP_CODE_CLASS_FIELD 0x4</span></div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;<span class="preprocessor">#define MG_COAP_CODE_DETAIL_FIELD 0x8</span></div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_ID_FIELD 0x10</span></div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;<span class="preprocessor">#define MG_COAP_TOKEN_FIELD 0x20</span></div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;<span class="preprocessor">#define MG_COAP_OPTIOMG_FIELD 0x40</span></div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;<span class="preprocessor">#define MG_COAP_PAYLOAD_FIELD 0x80</span></div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;<span class="preprocessor">#define MG_COAP_ERROR 0x10000</span></div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;<span class="preprocessor">#define MG_COAP_FORMAT_ERROR (MG_COAP_ERROR | 0x20000)</span></div><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;<span class="preprocessor">#define MG_COAP_IGNORE (MG_COAP_ERROR | 0x40000)</span></div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;<span class="preprocessor">#define MG_COAP_NOT_ENOUGH_DATA (MG_COAP_ERROR | 0x80000)</span></div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;<span class="preprocessor">#define MG_COAP_NETWORK_ERROR (MG_COAP_ERROR | 0x100000)</span></div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_CON 0</span></div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_NOC 1</span></div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_ACK 2</span></div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_RST 3</span></div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;<span class="preprocessor">#define MG_COAP_MSG_MAX 3</span></div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;</div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;<span class="preprocessor">#define MG_COAP_CODECLASS_REQUEST 0</span></div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;<span class="preprocessor">#define MG_COAP_CODECLASS_RESP_OK 2</span></div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;<span class="preprocessor">#define MG_COAP_CODECLASS_CLIENT_ERR 4</span></div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;<span class="preprocessor">#define MG_COAP_CODECLASS_SRV_ERR 5</span></div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;<span class="preprocessor">#define MG_COAP_EVENT_BASE 300</span></div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;<span class="preprocessor">#define MG_EV_COAP_CON (MG_COAP_EVENT_BASE + MG_COAP_MSG_CON)</span></div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;<span class="preprocessor">#define MG_EV_COAP_NOC (MG_COAP_EVENT_BASE + MG_COAP_MSG_NOC)</span></div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;<span class="preprocessor">#define MG_EV_COAP_ACK (MG_COAP_EVENT_BASE + MG_COAP_MSG_ACK)</span></div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;<span class="preprocessor">#define MG_EV_COAP_RST (MG_COAP_EVENT_BASE + MG_COAP_MSG_RST)</span></div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;<span class="comment"> * CoAP options.</span></div><div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;<span class="comment"> * Use mg_coap_add_option and mg_coap_free_options</span></div><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;<span class="comment"> * for creation and destruction.</span></div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;<span class="keyword">struct </span>mg_coap_option {</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;  <span class="keyword">struct </span>mg_coap_option *next;</div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;  uint32_t number;</div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> value;</div><div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;};</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;<span class="comment">/* CoAP message. See RFC 7252 for details. */</span></div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;<span class="keyword">struct </span>mg_coap_message {</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;  uint32_t flags;</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;  uint8_t msg_type;</div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;  uint8_t code_class;</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;  uint8_t code_detail;</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;  uint16_t msg_id;</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> token;</div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;  <span class="keyword">struct </span>mg_coap_option *options;</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;  <span class="keyword">struct </span><a class="code" href="structmg__str.html">mg_str</a> payload;</div><div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;  <span class="keyword">struct </span>mg_coap_option *optiomg_tail;</div><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;};</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;<span class="comment">/* Sets CoAP protocol handler - triggers CoAP specific events. */</span></div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;<span class="keywordtype">int</span> mg_set_protocol_coap(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc);</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;<span class="comment"> * Adds a new option to mg_coap_message structure.</span></div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;<span class="comment"> * Returns pointer to the newly created option.</span></div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;<span class="comment"> * Note: options must be freed by using mg_coap_free_options</span></div><div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;<span class="keyword">struct </span>mg_coap_option *mg_coap_add_option(<span class="keyword">struct</span> mg_coap_message *cm,</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;                                          uint32_t number, <span class="keywordtype">char</span> *value,</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;                                          <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;<span class="comment"> * Frees the memory allocated for options.</span></div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;<span class="comment"> * If the cm parameter doesn&#39;t contain any option it does nothing.</span></div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;<span class="keywordtype">void</span> mg_coap_free_options(<span class="keyword">struct</span> mg_coap_message *cm);</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;<span class="comment"> * Composes a CoAP message from `mg_coap_message`</span></div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;<span class="comment"> * and sends it into `nc` connection.</span></div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;<span class="comment"> * Returns 0 on success. On error, it is a bitmask:</span></div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;<span class="comment"> * - `#define MG_COAP_ERROR 0x10000`</span></div><div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;<span class="comment"> * - `#define MG_COAP_FORMAT_ERROR (MG_COAP_ERROR | 0x20000)`</span></div><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;<span class="comment"> * - `#define MG_COAP_IGNORE (MG_COAP_ERROR | 0x40000)`</span></div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;<span class="comment"> * - `#define MG_COAP_NOT_ENOUGH_DATA (MG_COAP_ERROR | 0x80000)`</span></div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;<span class="comment"> * - `#define MG_COAP_NETWORK_ERROR (MG_COAP_ERROR | 0x100000)`</span></div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;uint32_t mg_coap_send_message(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc,</div><div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;                              <span class="keyword">struct</span> mg_coap_message *cm);</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;</div><div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;<span class="comment"> * Composes CoAP acknowledgement from `mg_coap_message`</span></div><div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;<span class="comment"> * and sends it into `nc` connection.</span></div><div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;<span class="comment"> * Return value: see `mg_coap_send_message()`</span></div><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;uint32_t mg_coap_send_ack(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *nc, uint16_t msg_id);</div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;</div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;<span class="comment"> * Parses CoAP message and fills mg_coap_message and returns cm-&gt;flags.</span></div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;<span class="comment"> * This is a helper function.</span></div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;<span class="comment"> * NOTE: usually CoAP works over UDP, so lack of data means format error.</span></div><div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;<span class="comment"> * But, in theory, it is possible to use CoAP over TCP (according to RFC)</span></div><div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;<span class="comment"> * The caller has to check results and treat COAP_NOT_ENOUGH_DATA according to</span></div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;<span class="comment"> * underlying protocol:</span></div><div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;<span class="comment"> * - in case of UDP COAP_NOT_ENOUGH_DATA means COAP_FORMAT_ERROR,</span></div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;<span class="comment"> * - in case of TCP client can try to receive more data</span></div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;<span class="comment"> * Return value: see `mg_coap_send_message()`</span></div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;uint32_t mg_coap_parse(<span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *io, <span class="keyword">struct</span> mg_coap_message *cm);</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;<span class="comment"> * Composes CoAP message from mg_coap_message structure.</span></div><div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;<span class="comment"> * This is a helper function.</span></div><div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;<span class="comment"> * Return value: see `mg_coap_send_message()`</span></div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;uint32_t mg_coap_compose(<span class="keyword">struct</span> mg_coap_message *cm, <span class="keyword">struct</span> <a class="code" href="structmbuf.html">mbuf</a> *io);</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;}</div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;</div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MG_ENABLE_COAP */</span><span class="preprocessor"></span></div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;</div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_COAP_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/sntp.h&quot;</span></div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;<span class="comment"> * Copyright (c) 2016 Cesanta Software Limited</span></div><div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;</div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_SNTP_H_</span></div><div class="line"><a name="l06008"></a><span class="lineno"><a class="line" href="mongoose_8h_a3ebff5d1e743d8faafdfa7d8d38117bc.html#a3ebff5d1e743d8faafdfa7d8d38117bc"> 6008</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_SNTP_H_</span></div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;</div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;<span class="preprocessor">#if MG_ENABLE_SNTP</span></div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;</div><div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;<span class="preprocessor">#define MG_SNTP_EVENT_BASE 500</span></div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;</div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;<span class="comment"> * Received reply from time server. Event handler parameter contains</span></div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;<span class="comment"> * pointer to mg_sntp_message structure</span></div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;<span class="preprocessor">#define MG_SNTP_REPLY (MG_SNTP_EVENT_BASE + 1)</span></div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;</div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;<span class="comment">/* Received malformed SNTP packet */</span></div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;<span class="preprocessor">#define MG_SNTP_MALFORMED_REPLY (MG_SNTP_EVENT_BASE + 2)</span></div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;</div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;<span class="comment">/* Failed to get time from server (timeout etc) */</span></div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;<span class="preprocessor">#define MG_SNTP_FAILED (MG_SNTP_EVENT_BASE + 3)</span></div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;<span class="keyword">struct </span>mg_sntp_message {</div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;  <span class="comment">/* if server sends this flags, user should not send requests to it */</span></div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;  <span class="keywordtype">int</span> kiss_of_death;</div><div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;  <span class="comment">/* usual mg_time */</span></div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;  <span class="keywordtype">double</span> time;</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;};</div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;</div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;<span class="comment">/* Establishes connection to given sntp server */</span></div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *mg_sntp_connect(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr,</div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;                                      <a class="code" href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a>(<a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> event_handler,</div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;                                            <span class="keywordtype">void</span> *<a class="code" href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">user_data</a>),</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;                                      <span class="keyword">const</span> <span class="keywordtype">char</span> *sntp_server_name);</div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;<span class="comment">/* Sends time request to given connection */</span></div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;<span class="keywordtype">void</span> mg_sntp_send_request(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *c);</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;<span class="comment"> * Helper function</span></div><div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;<span class="comment"> * Establishes connection to time server, tries to send request</span></div><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;<span class="comment"> * repeats sending SNTP_ATTEMPTS times every SNTP_TIMEOUT sec</span></div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;<span class="comment"> * (if needed)</span></div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;<span class="comment"> * See sntp_client example</span></div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__connection.html">mg_connection</a> *mg_sntp_get_time(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *mgr,</div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;                                       <a class="code" href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a> event_handler,</div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">char</span> *sntp_server_name);</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;</div><div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CS_MONGOOSE_SRC_SNTP_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;<span class="preprocessor">#ifdef MG_MODULE_LINES</span></div><div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;<span class="preprocessor">#line 1 &quot;mongoose/src/socks.h&quot;</span></div><div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;<span class="comment"> * Copyright (c) 2017 Cesanta Software Limited</span></div><div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;<span class="comment"> * All rights reserved</span></div><div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;</div><div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;<span class="preprocessor">#ifndef CS_MONGOOSE_SRC_SOCKS_H_</span></div><div class="line"><a name="l06065"></a><span class="lineno"><a class="line" href="mongoose_8h_a5b9e5a81906efd749df9c31bcbda9681.html#a5b9e5a81906efd749df9c31bcbda9681"> 6065</a></span>&#160;<span class="preprocessor">#define CS_MONGOOSE_SRC_SOCKS_H_</span></div><div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;</div><div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;<span class="preprocessor">#if MG_ENABLE_SOCKS</span></div><div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;</div><div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;<span class="preprocessor">#define MG_SOCKS_VERSION 5</span></div><div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;</div><div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;<span class="preprocessor">#define MG_SOCKS_HANDSHAKE_DONE MG_F_USER_1</span></div><div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;<span class="preprocessor">#define MG_SOCKS_CONNECT_DONE MG_F_USER_2</span></div><div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;</div><div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;<span class="comment">/* SOCKS5 handshake methods */</span></div><div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;<span class="keyword">enum</span> mg_socks_handshake_method {</div><div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;  MG_SOCKS_HANDSHAKE_NOAUTH = 0,     <span class="comment">/* Handshake method - no authentication */</span></div><div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;  MG_SOCKS_HANDSHAKE_GSSAPI = 1,     <span class="comment">/* Handshake method - GSSAPI auth */</span></div><div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;  MG_SOCKS_HANDSHAKE_USERPASS = 2,   <span class="comment">/* Handshake method - user/password auth */</span></div><div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;  MG_SOCKS_HANDSHAKE_FAILURE = 0xff, <span class="comment">/* Handshake method - failure */</span></div><div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;};</div><div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;</div><div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;<span class="comment">/* SOCKS5 commands */</span></div><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;<span class="keyword">enum</span> mg_socks_command {</div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;  MG_SOCKS_CMD_CONNECT = 1,       <span class="comment">/* Command: CONNECT */</span></div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;  MG_SOCKS_CMD_BIND = 2,          <span class="comment">/* Command: BIND */</span></div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;  MG_SOCKS_CMD_UDP_ASSOCIATE = 3, <span class="comment">/* Command: UDP ASSOCIATE */</span></div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;};</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;</div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;<span class="comment">/* SOCKS5 address types */</span></div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;<span class="keyword">enum</span> mg_socks_address_type {</div><div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;  MG_SOCKS_ADDR_IPV4 = 1,   <span class="comment">/* Address type: IPv4 */</span></div><div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;  MG_SOCKS_ADDR_DOMAIN = 3, <span class="comment">/* Address type: Domain name */</span></div><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;  MG_SOCKS_ADDR_IPV6 = 4,   <span class="comment">/* Address type: IPv6 */</span></div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;};</div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;</div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;<span class="comment">/* SOCKS5 response codes */</span></div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;<span class="keyword">enum</span> mg_socks_response {</div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;  MG_SOCKS_SUCCESS = 0,            <span class="comment">/* Response: success */</span></div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;  MG_SOCKS_FAILURE = 1,            <span class="comment">/* Response: failure */</span></div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;  MG_SOCKS_NOT_ALLOWED = 2,        <span class="comment">/* Response: connection not allowed */</span></div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;  MG_SOCKS_NET_UNREACHABLE = 3,    <span class="comment">/* Response: network unreachable */</span></div><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;  MG_SOCKS_HOST_UNREACHABLE = 4,   <span class="comment">/* Response: network unreachable */</span></div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;  MG_SOCKS_CONN_REFUSED = 5,       <span class="comment">/* Response: network unreachable */</span></div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;  MG_SOCKS_TTL_EXPIRED = 6,        <span class="comment">/* Response: network unreachable */</span></div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;  MG_SOCKS_CMD_NOT_SUPPORTED = 7,  <span class="comment">/* Response: network unreachable */</span></div><div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;  MG_SOCKS_ADDR_NOT_SUPPORTED = 8, <span class="comment">/* Response: network unreachable */</span></div><div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;};</div><div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;<span class="comment">/* Turn the connection into the SOCKS server */</span></div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;<span class="keywordtype">void</span> mg_set_protocol_socks(<span class="keyword">struct</span> <a class="code" href="structmg__connection.html">mg_connection</a> *c);</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;<span class="comment">/* Create socks tunnel for the client connection */</span></div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;<span class="keyword">struct </span><a class="code" href="structmg__iface.html">mg_iface</a> *mg_socks_mk_iface(<span class="keyword">struct</span> <a class="code" href="structmg__mgr.html">mg_mgr</a> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *proxy_addr);</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;</div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;}</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;</div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="structmg__connect__opts_a88039c409267c457638a0ebce97d7c5c_html_a88039c409267c457638a0ebce97d7c5c"><div class="ttname"><a href="structmg__connect__opts_a88039c409267c457638a0ebce97d7c5c.html#a88039c409267c457638a0ebce97d7c5c">mg_connect_opts::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3673</div></div>
<div class="ttc" id="structmg__connection_a19cb5ee4c2402582dcf4cb6a4f899136_html_a19cb5ee4c2402582dcf4cb6a4f899136"><div class="ttname"><a href="structmg__connection_a19cb5ee4c2402582dcf4cb6a4f899136.html#a19cb5ee4c2402582dcf4cb6a4f899136">mg_connection::mgr_data</a></div><div class="ttdeci">void * mgr_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3447</div></div>
<div class="ttc" id="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48_html_afd27e187a02127a98a04757013aecd48"><div class="ttname"><a href="structmg__dns__resource__record_afd27e187a02127a98a04757013aecd48.html#afd27e187a02127a98a04757013aecd48">mg_dns_resource_record::name</a></div><div class="ttdeci">struct mg_str name</div><div class="ttdef"><b>Definition:</b> mongoose.h:5527</div></div>
<div class="ttc" id="mongoose_8h_a6f89d6763b9a9b6f7e41a19bbc51c832_html_a6f89d6763b9a9b6f7e41a19bbc51c832"><div class="ttname"><a href="mongoose_8h_a6f89d6763b9a9b6f7e41a19bbc51c832.html#a6f89d6763b9a9b6f7e41a19bbc51c832">mg_if_create_iface</a></div><div class="ttdeci">struct mg_iface * mg_if_create_iface(const struct mg_iface_vtable *vtable, struct mg_mgr *mgr)</div><div class="ttdef"><b>Definition:</b> mongoose.c:3283</div></div>
<div class="ttc" id="structmbuf_a4da00860609dd46fe8b679d5e1deeac3_html_a4da00860609dd46fe8b679d5e1deeac3"><div class="ttname"><a href="structmbuf_a4da00860609dd46fe8b679d5e1deeac3.html#a4da00860609dd46fe8b679d5e1deeac3">mbuf::len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> mongoose.h:1947</div></div>
<div class="ttc" id="structmg__dns__message_html"><div class="ttname"><a href="structmg__dns__message.html">mg_dns_message</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5536</div></div>
<div class="ttc" id="structmg__dns__resource__record_html"><div class="ttname"><a href="structmg__dns__resource__record.html">mg_dns_resource_record</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5526</div></div>
<div class="ttc" id="mongoose_8h_add06e43dec71654cf9872f353af49b72_html_add06e43dec71654cf9872f353af49b72"><div class="ttname"><a href="mongoose_8h_add06e43dec71654cf9872f353af49b72.html#add06e43dec71654cf9872f353af49b72">cs_sha1_update</a></div><div class="ttdeci">void cs_sha1_update(cs_sha1_ctx *, const unsigned char *data, uint32_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1243</div></div>
<div class="ttc" id="structmg__http__multipart__part_a728d1246c153ef43fb1f821bee61925a_html_a728d1246c153ef43fb1f821bee61925a"><div class="ttname"><a href="structmg__http__multipart__part_a728d1246c153ef43fb1f821bee61925a.html#a728d1246c153ef43fb1f821bee61925a">mg_http_multipart_part::status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> mongoose.h:4275</div></div>
<div class="ttc" id="mongoose_8h_af5598a0890430f5953cd7c86fb371eea_html_af5598a0890430f5953cd7c86fb371eea"><div class="ttname"><a href="mongoose_8h_af5598a0890430f5953cd7c86fb371eea.html#af5598a0890430f5953cd7c86fb371eea">mg_printf</a></div><div class="ttdeci">int mg_printf(struct mg_connection *, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2442</div></div>
<div class="ttc" id="structmg__add__sock__opts_af927a96c42e76f43592b510eca4e1f8e_html_af927a96c42e76f43592b510eca4e1f8e"><div class="ttname"><a href="structmg__add__sock__opts_af927a96c42e76f43592b510eca4e1f8e.html#af927a96c42e76f43592b510eca4e1f8e">mg_add_sock_opts::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3574</div></div>
<div class="ttc" id="mongoose_8h_ad92c952f7a90d0ddc227a0fbaeb41aad_html_ad92c952f7a90d0ddc227a0fbaeb41aad"><div class="ttname"><a href="mongoose_8h_ad92c952f7a90d0ddc227a0fbaeb41aad.html#ad92c952f7a90d0ddc227a0fbaeb41aad">mg_dns_copy_questions</a></div><div class="ttdeci">int mg_dns_copy_questions(struct mbuf *io, struct mg_dns_message *msg)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10944</div></div>
<div class="ttc" id="structwebsocket__message_html"><div class="ttname"><a href="structwebsocket__message.html">websocket_message</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:4263</div></div>
<div class="ttc" id="structmg__resolve__async__opts_adeb3e0102e6e1eb86340e86fcc2b3560_html_adeb3e0102e6e1eb86340e86fcc2b3560"><div class="ttname"><a href="structmg__resolve__async__opts_adeb3e0102e6e1eb86340e86fcc2b3560.html#adeb3e0102e6e1eb86340e86fcc2b3560">mg_resolve_async_opts::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> mongoose.h:5782</div></div>
<div class="ttc" id="structmg__resolve__async__opts_a6db0305ac9736d2f98507ce07bebcd59_html_a6db0305ac9736d2f98507ce07bebcd59"><div class="ttname"><a href="structmg__resolve__async__opts_a6db0305ac9736d2f98507ce07bebcd59.html#a6db0305ac9736d2f98507ce07bebcd59">mg_resolve_async_opts::max_retries</a></div><div class="ttdeci">int max_retries</div><div class="ttdef"><b>Definition:</b> mongoose.h:5781</div></div>
<div class="ttc" id="mongoose_8h_acc89d313c52054dba755f4809386b6b7_html_acc89d313c52054dba755f4809386b6b7"><div class="ttname"><a href="mongoose_8h_acc89d313c52054dba755f4809386b6b7.html#acc89d313c52054dba755f4809386b6b7">mg_add_sock</a></div><div class="ttdeci">struct mg_connection * mg_add_sock(struct mg_mgr *mgr, sock_t sock, MG_CB(mg_event_handler_t handler, void *user_data))</div></div>
<div class="ttc" id="mongoose_8h_abc1e540c922be63eea4488f520e3523d_html_abc1e540c922be63eea4488f520e3523d"><div class="ttname"><a href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523d">mg_dns_resource_record_kind</a></div><div class="ttdeci">mg_dns_resource_record_kind</div><div class="ttdef"><b>Definition:</b> mongoose.h:5519</div></div>
<div class="ttc" id="mongoose_8h_acc7181dfd683586091c42f6fcdbf886e_html_acc7181dfd683586091c42f6fcdbf886e"><div class="ttname"><a href="mongoose_8h_acc7181dfd683586091c42f6fcdbf886e.html#acc7181dfd683586091c42f6fcdbf886e">cs_md5_final</a></div><div class="ttdeci">void cs_md5_final(unsigned char *md, cs_md5_ctx *c)</div></div>
<div class="ttc" id="mongoose_8h_a02baa6e213509fe13515d82681d6f2d9_html_a02baa6e213509fe13515d82681d6f2d9"><div class="ttname"><a href="mongoose_8h_a02baa6e213509fe13515d82681d6f2d9.html#a02baa6e213509fe13515d82681d6f2d9">mg_asprintf</a></div><div class="ttdeci">int mg_asprintf(char **buf, size_t size, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1914</div></div>
<div class="ttc" id="mongoose_8h_a957de876a8d109fae4d9026389ff71d2_html_a957de876a8d109fae4d9026389ff71d2"><div class="ttname"><a href="mongoose_8h_a957de876a8d109fae4d9026389ff71d2.html#a957de876a8d109fae4d9026389ff71d2">mg_assemble_uri</a></div><div class="ttdeci">int mg_assemble_uri(const struct mg_str *scheme, const struct mg_str *user_info, const struct mg_str *host, unsigned int port, const struct mg_str *path, const struct mg_str *query, const struct mg_str *fragment, int normalize_path, struct mg_str *uri)</div><div class="ttdef"><b>Definition:</b> mongoose.c:5491</div></div>
<div class="ttc" id="mongoose_8h_abe1edc7ce2a347318aac5bb0fb91c163_html_abe1edc7ce2a347318aac5bb0fb91c163"><div class="ttname"><a href="mongoose_8h_abe1edc7ce2a347318aac5bb0fb91c163.html#abe1edc7ce2a347318aac5bb0fb91c163">mg_hash_md5_v</a></div><div class="ttdeci">void mg_hash_md5_v(size_t num_msgs, const uint8_t *msgs[], const size_t *msg_lens, uint8_t *digest)</div></div>
<div class="ttc" id="mongoose_8h_a3481a6b79218165d9332e7856f6916fa_html_a3481a6b79218165d9332e7856f6916fa"><div class="ttname"><a href="mongoose_8h_a3481a6b79218165d9332e7856f6916fa.html#a3481a6b79218165d9332e7856f6916fa">mg_get_http_basic_auth</a></div><div class="ttdeci">int mg_get_http_basic_auth(struct http_message *hm, char *user, size_t user_len, char *pass, size_t pass_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7146</div></div>
<div class="ttc" id="mongoose_8h_a14d0e6865386f4d95bd56c03892e0cc8_html_a14d0e6865386f4d95bd56c03892e0cc8"><div class="ttname"><a href="mongoose_8h_a14d0e6865386f4d95bd56c03892e0cc8.html#a14d0e6865386f4d95bd56c03892e0cc8">c_vsnprintf</a></div><div class="ttdeci">int c_vsnprintf(char *buf, size_t buf_size, const char *format, va_list ap)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1634</div></div>
<div class="ttc" id="mongoose_8h_a9847181fe56b9289e485386315fc5519_html_a9847181fe56b9289e485386315fc5519"><div class="ttname"><a href="mongoose_8h_a9847181fe56b9289e485386315fc5519.html#a9847181fe56b9289e485386315fc5519">mg_bind_opt</a></div><div class="ttdeci">struct mg_connection * mg_bind_opt(struct mg_mgr *mgr, const char *address, MG_CB(mg_event_handler_t handler, void *user_data), struct mg_bind_opts opts)</div></div>
<div class="ttc" id="mongoose_8h_acb5c96f1b5d26b71d4b397fc2b2fda54_html_acb5c96f1b5d26b71d4b397fc2b2fda54"><div class="ttname"><a href="mongoose_8h_acb5c96f1b5d26b71d4b397fc2b2fda54.html#acb5c96f1b5d26b71d4b397fc2b2fda54">mg_resolve_callback_t</a></div><div class="ttdeci">void(* mg_resolve_callback_t)(struct mg_dns_message *dns_message, void *user_data, enum mg_resolve_err)</div><div class="ttdef"><b>Definition:</b> mongoose.h:5775</div></div>
<div class="ttc" id="structmg__http__endpoint__opts_html"><div class="ttname"><a href="structmg__http__endpoint__opts.html">mg_http_endpoint_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:4941</div></div>
<div class="ttc" id="structmg__mgr_a5354db212e2db2b8e115017ecf1060df_html_a5354db212e2db2b8e115017ecf1060df"><div class="ttname"><a href="structmg__mgr_a5354db212e2db2b8e115017ecf1060df.html#a5354db212e2db2b8e115017ecf1060df">mg_mgr::num_ifaces</a></div><div class="ttdeci">int num_ifaces</div><div class="ttdef"><b>Definition:</b> mongoose.h:3409</div></div>
<div class="ttc" id="mongoose_8h_adb813dc930103a8ee7208fe700e1af59_html_adb813dc930103a8ee7208fe700e1af59"><div class="ttname"><a href="mongoose_8h_adb813dc930103a8ee7208fe700e1af59.html#adb813dc930103a8ee7208fe700e1af59">mbuf_trim</a></div><div class="ttdeci">void mbuf_trim(struct mbuf *)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1376</div></div>
<div class="ttc" id="structmg__resolve__async__opts_a2fb7183d887260a2b3576e47641e96dc_html_a2fb7183d887260a2b3576e47641e96dc"><div class="ttname"><a href="structmg__resolve__async__opts_a2fb7183d887260a2b3576e47641e96dc.html#a2fb7183d887260a2b3576e47641e96dc">mg_resolve_async_opts::nameserver</a></div><div class="ttdeci">const char * nameserver</div><div class="ttdef"><b>Definition:</b> mongoose.h:5780</div></div>
<div class="ttc" id="mongoose_8h_a984773b80f958b983265208dd054b500_html_a984773b80f958b983265208dd054b500"><div class="ttname"><a href="mongoose_8h_a984773b80f958b983265208dd054b500.html#a984773b80f958b983265208dd054b500">mg_http_send_redirect</a></div><div class="ttdeci">void mg_http_send_redirect(struct mg_connection *nc, int status_code, const struct mg_str location, const struct mg_str extra_headers)</div><div class="ttdef"><b>Definition:</b> mongoose.c:6791</div></div>
<div class="ttc" id="mongoose_8h_a1db131b77c3d3046fc7aa7577b52dfae_html_a1db131b77c3d3046fc7aa7577b52dfae"><div class="ttname"><a href="mongoose_8h_a1db131b77c3d3046fc7aa7577b52dfae.html#a1db131b77c3d3046fc7aa7577b52dfae">mg_resolve_async_opt</a></div><div class="ttdeci">int mg_resolve_async_opt(struct mg_mgr *mgr, const char *name, int query, mg_resolve_callback_t cb, void *data, struct mg_resolve_async_opts opts)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11549</div></div>
<div class="ttc" id="mongoose_8h_ab18d4c40465496efc32955c98c8e97f0_html_ab18d4c40465496efc32955c98c8e97f0"><div class="ttname"><a href="mongoose_8h_ab18d4c40465496efc32955c98c8e97f0.html#ab18d4c40465496efc32955c98c8e97f0">cs_time</a></div><div class="ttdeci">double cs_time(void)</div><div class="ttdef"><b>Definition:</b> mongoose.c:756</div></div>
<div class="ttc" id="mongoose_8h_aafce5d3ac0f161c1bbd30908af98a29d_html_aafce5d3ac0f161c1bbd30908af98a29d"><div class="ttname"><a href="mongoose_8h_aafce5d3ac0f161c1bbd30908af98a29d.html#aafce5d3ac0f161c1bbd30908af98a29d">mg_set_close_on_exec</a></div><div class="ttdeci">void mg_set_close_on_exec(sock_t)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9977</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_html"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts.html">mg_send_mqtt_handshake_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5201</div></div>
<div class="ttc" id="structmg__connection_a608f2461b3dd53e503d6ed3c84ec55b0_html_a608f2461b3dd53e503d6ed3c84ec55b0"><div class="ttname"><a href="structmg__connection_a608f2461b3dd53e503d6ed3c84ec55b0.html#a608f2461b3dd53e503d6ed3c84ec55b0">mg_connection::sock</a></div><div class="ttdeci">sock_t sock</div><div class="ttdef"><b>Definition:</b> mongoose.h:3422</div></div>
<div class="ttc" id="structmg__dns__message_a035ced22ef43b6b23ad6df3ad3aad126_html_a035ced22ef43b6b23ad6df3ad3aad126"><div class="ttname"><a href="structmg__dns__message_a035ced22ef43b6b23ad6df3ad3aad126.html#a035ced22ef43b6b23ad6df3ad3aad126">mg_dns_message::num_questions</a></div><div class="ttdeci">int num_questions</div><div class="ttdef"><b>Definition:</b> mongoose.h:5540</div></div>
<div class="ttc" id="mongoose_8h_a53af9cc9bde042bcdb792fa1c6a67129_html_a53af9cc9bde042bcdb792fa1c6a67129"><div class="ttname"><a href="mongoose_8h_a53af9cc9bde042bcdb792fa1c6a67129.html#a53af9cc9bde042bcdb792fa1c6a67129">mg_strdup</a></div><div class="ttdeci">struct mg_str mg_strdup(const struct mg_str s)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1492</div></div>
<div class="ttc" id="mongoose_8h_a23b37b4236cfa9615daab4f522d6cc83_html_a23b37b4236cfa9615daab4f522d6cc83"><div class="ttname"><a href="mongoose_8h_a23b37b4236cfa9615daab4f522d6cc83.html#a23b37b4236cfa9615daab4f522d6cc83">mg_mqtt_connack</a></div><div class="ttdeci">void mg_mqtt_connack(struct mg_connection *nc, uint8_t return_code)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10602</div></div>
<div class="ttc" id="structmg__bind__opts_a3bd493ef5bd6c8da605b1480a6c189c4_html_a3bd493ef5bd6c8da605b1480a6c189c4"><div class="ttname"><a href="structmg__bind__opts_a3bd493ef5bd6c8da605b1480a6c189c4.html#a3bd493ef5bd6c8da605b1480a6c189c4">mg_bind_opts::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3608</div></div>
<div class="ttc" id="mongoose_8h_ac13b929593fe45bd22487365951b28d0_html_ac13b929593fe45bd22487365951b28d0"><div class="ttname"><a href="mongoose_8h_ac13b929593fe45bd22487365951b28d0.html#ac13b929593fe45bd22487365951b28d0">mbuf_init</a></div><div class="ttdeci">void mbuf_init(struct mbuf *, size_t initial_capacity)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1346</div></div>
<div class="ttc" id="structcs__base64__ctx_a5753baf57fe83161369e2270d57e4a9e_html_a5753baf57fe83161369e2270d57e4a9e"><div class="ttname"><a href="structcs__base64__ctx_a5753baf57fe83161369e2270d57e4a9e.html#a5753baf57fe83161369e2270d57e4a9e">cs_base64_ctx::chunk_size</a></div><div class="ttdeci">int chunk_size</div><div class="ttdef"><b>Definition:</b> mongoose.h:2024</div></div>
<div class="ttc" id="mongoose_8h_a3c92c6beae4ba6f769d3525c687e13c9_html_a3c92c6beae4ba6f769d3525c687e13c9"><div class="ttname"><a href="mongoose_8h_a3c92c6beae4ba6f769d3525c687e13c9.html#a3c92c6beae4ba6f769d3525c687e13c9">mbuf_free</a></div><div class="ttdeci">void mbuf_free(struct mbuf *)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1353</div></div>
<div class="ttc" id="mongoose_8h_a80648e9df5c0ddf56b33f0d397e0ad50_html_a80648e9df5c0ddf56b33f0d397e0ad50"><div class="ttname"><a href="mongoose_8h_a80648e9df5c0ddf56b33f0d397e0ad50.html#a80648e9df5c0ddf56b33f0d397e0ad50">cs_base64_finish</a></div><div class="ttdeci">void cs_base64_finish(struct cs_base64_ctx *ctx)</div><div class="ttdef"><b>Definition:</b> mongoose.c:459</div></div>
<div class="ttc" id="mongoose_8h_abd2b5b0874803614548d497856aa02a1_html_abd2b5b0874803614548d497856aa02a1"><div class="ttname"><a href="mongoose_8h_abd2b5b0874803614548d497856aa02a1.html#abd2b5b0874803614548d497856aa02a1">mg_mqtt_unsuback</a></div><div class="ttdeci">void mg_mqtt_unsuback(struct mg_connection *nc, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10649</div></div>
<div class="ttc" id="mongoose_8h_a12ec0f9dfd1ce08498bb2aeed8a80d40_html_a12ec0f9dfd1ce08498bb2aeed8a80d40"><div class="ttname"><a href="mongoose_8h_a12ec0f9dfd1ce08498bb2aeed8a80d40.html#a12ec0f9dfd1ce08498bb2aeed8a80d40">MG_MAX_HTTP_HEADERS</a></div><div class="ttdeci">#define MG_MAX_HTTP_HEADERS</div><div class="ttdef"><b>Definition:</b> mongoose.h:4217</div></div>
<div class="ttc" id="structmg__iface__vtable_html"><div class="ttname"><a href="structmg__iface__vtable.html">mg_iface_vtable</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3166</div></div>
<div class="ttc" id="mongoose_8h_a84f36ff9caf50e0d70d10244a2c64b45_html_a84f36ff9caf50e0d70d10244a2c64b45"><div class="ttname"><a href="mongoose_8h_a84f36ff9caf50e0d70d10244a2c64b45.html#a84f36ff9caf50e0d70d10244a2c64b45">MG_MAX_DNS_QUESTIONS</a></div><div class="ttdeci">#define MG_MAX_DNS_QUESTIONS</div><div class="ttdef"><b>Definition:</b> mongoose.h:5514</div></div>
<div class="ttc" id="mongoose_8h_a9a51702b7cb2ed34dbe63af83e6d108a_html_a9a51702b7cb2ed34dbe63af83e6d108a"><div class="ttname"><a href="mongoose_8h_a9a51702b7cb2ed34dbe63af83e6d108a.html#a9a51702b7cb2ed34dbe63af83e6d108a">mg_mk_str_n</a></div><div class="ttdeci">struct mg_str mg_mk_str_n(const char *s, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1451</div></div>
<div class="ttc" id="structmg__connection_ac341f1f2bd18e030fe90a914e4517506_html_ac341f1f2bd18e030fe90a914e4517506"><div class="ttname"><a href="structmg__connection_ac341f1f2bd18e030fe90a914e4517506.html#ac341f1f2bd18e030fe90a914e4517506">mg_connection::mgr</a></div><div class="ttdeci">struct mg_mgr * mgr</div><div class="ttdef"><b>Definition:</b> mongoose.h:3420</div></div>
<div class="ttc" id="mongoose_8h_a629bf8d53c4ed29e29574933681a2bd4_html_a629bf8d53c4ed29e29574933681a2bd4"><div class="ttname"><a href="mongoose_8h_a629bf8d53c4ed29e29574933681a2bd4.html#a629bf8d53c4ed29e29574933681a2bd4">mg_casecmp</a></div><div class="ttdeci">int mg_casecmp(const char *s1, const char *s2)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1909</div></div>
<div class="ttc" id="structcs__base64__ctx_a59b8384fbdd1681555a9dd18ed6585ae_html_a59b8384fbdd1681555a9dd18ed6585ae"><div class="ttname"><a href="structcs__base64__ctx_a59b8384fbdd1681555a9dd18ed6585ae.html#a59b8384fbdd1681555a9dd18ed6585ae">cs_base64_ctx::b64_putc</a></div><div class="ttdeci">cs_base64_putc_t b64_putc</div><div class="ttdef"><b>Definition:</b> mongoose.h:2022</div></div>
<div class="ttc" id="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9_html_a4c4b4acce406523462d38e0a0862dfb9"><div class="ttname"><a href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9">mg_resolve_err</a></div><div class="ttdeci">mg_resolve_err</div><div class="ttdef"><b>Definition:</b> mongoose.h:5768</div></div>
<div class="ttc" id="structmg__http__endpoint__opts_acdb6a63492d91f7e1c4f34242ba6be1d_html_acdb6a63492d91f7e1c4f34242ba6be1d"><div class="ttname"><a href="structmg__http__endpoint__opts_acdb6a63492d91f7e1c4f34242ba6be1d.html#acdb6a63492d91f7e1c4f34242ba6be1d">mg_http_endpoint_opts::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:4942</div></div>
<div class="ttc" id="structmg__mqtt__message_a5ac9625e8214e6a3ac6c835f19b3a9c8_html_a5ac9625e8214e6a3ac6c835f19b3a9c8"><div class="ttname"><a href="structmg__mqtt__message_a5ac9625e8214e6a3ac6c835f19b3a9c8.html#a5ac9625e8214e6a3ac6c835f19b3a9c8">mg_mqtt_message::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> mongoose.h:5177</div></div>
<div class="ttc" id="structmg__connection_afcfd89f119a87cba6f6dfec2d2eda5d9_html_afcfd89f119a87cba6f6dfec2d2eda5d9"><div class="ttname"><a href="structmg__connection_afcfd89f119a87cba6f6dfec2d2eda5d9.html#afcfd89f119a87cba6f6dfec2d2eda5d9">mg_connection::next</a></div><div class="ttdeci">struct mg_connection * next</div><div class="ttdef"><b>Definition:</b> mongoose.h:3418</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_a3110a5a3589f32974b23f442b970ee85_html_a3110a5a3589f32974b23f442b970ee85"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts_a3110a5a3589f32974b23f442b970ee85.html#a3110a5a3589f32974b23f442b970ee85">mg_send_mqtt_handshake_opts::user_name</a></div><div class="ttdeci">const char * user_name</div><div class="ttdef"><b>Definition:</b> mongoose.h:5206</div></div>
<div class="ttc" id="structmg__connection_a6f337461553de516901473bd8bb11a0a_html_a6f337461553de516901473bd8bb11a0a"><div class="ttname"><a href="structmg__connection_a6f337461553de516901473bd8bb11a0a.html#a6f337461553de516901473bd8bb11a0a">mg_connection::iface</a></div><div class="ttdeci">struct mg_iface * iface</div><div class="ttdef"><b>Definition:</b> mongoose.h:3448</div></div>
<div class="ttc" id="mongoose_8h_aaf77e1d30ef9c704be1706f2e40c89c7_html_aaf77e1d30ef9c704be1706f2e40c89c7"><div class="ttname"><a href="mongoose_8h_aaf77e1d30ef9c704be1706f2e40c89c7.html#aaf77e1d30ef9c704be1706f2e40c89c7">mg_http_check_digest_auth</a></div><div class="ttdeci">int mg_http_check_digest_auth(struct http_message *hm, const char *auth_domain, FILE *fp)</div></div>
<div class="ttc" id="mongoose_8h_abc1e540c922be63eea4488f520e3523d_html_abc1e540c922be63eea4488f520e3523da040994f9cd7f4d58856a996e51e778f9"><div class="ttname"><a href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523da040994f9cd7f4d58856a996e51e778f9">MG_DNS_INVALID_RECORD</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5520</div></div>
<div class="ttc" id="structcs__base64__ctx_html"><div class="ttname"><a href="structcs__base64__ctx.html">cs_base64_ctx</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:2020</div></div>
<div class="ttc" id="mongoose_8h_ad48bda7f453ecfd8ee745380ed247b9f_html_ad48bda7f453ecfd8ee745380ed247b9f"><div class="ttname"><a href="mongoose_8h_ad48bda7f453ecfd8ee745380ed247b9f.html#ad48bda7f453ecfd8ee745380ed247b9f">mg_get_http_var</a></div><div class="ttdeci">int mg_get_http_var(const struct mg_str *buf, const char *name, char *dst, size_t dst_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7006</div></div>
<div class="ttc" id="structmg__add__sock__opts_html"><div class="ttname"><a href="structmg__add__sock__opts.html">mg_add_sock_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3573</div></div>
<div class="ttc" id="mongoose_8h_ab965bcfe8bc9e43a27ced4390301ea28_html_ab965bcfe8bc9e43a27ced4390301ea28"><div class="ttname"><a href="mongoose_8h_ab965bcfe8bc9e43a27ced4390301ea28.html#ab965bcfe8bc9e43a27ced4390301ea28">mg_parse_dns</a></div><div class="ttdeci">int mg_parse_dns(const char *buf, int len, struct mg_dns_message *msg)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11115</div></div>
<div class="ttc" id="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9_html_a4c4b4acce406523462d38e0a0862dfb9ad5e3180ee26f6b358b9692b471424615"><div class="ttname"><a href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9ad5e3180ee26f6b358b9692b471424615">MG_RESOLVE_OK</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5769</div></div>
<div class="ttc" id="mongoose_8h_a565a83b815183775e6788c032cabcb4e_html_a565a83b815183775e6788c032cabcb4e"><div class="ttname"><a href="mongoose_8h_a565a83b815183775e6788c032cabcb4e.html#a565a83b815183775e6788c032cabcb4e">mg_printf_html_escape</a></div><div class="ttdeci">void mg_printf_html_escape(struct mg_connection *nc, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7082</div></div>
<div class="ttc" id="mongoose_8h_ac41fbcc1cce8ce4b7c470e7a4464b9b9_html_ac41fbcc1cce8ce4b7c470e7a4464b9b9"><div class="ttname"><a href="mongoose_8h_ac41fbcc1cce8ce4b7c470e7a4464b9b9.html#ac41fbcc1cce8ce4b7c470e7a4464b9b9">mbuf_append</a></div><div class="ttdeci">size_t mbuf_append(struct mbuf *, const void *data, size_t data_size)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1414</div></div>
<div class="ttc" id="structwebsocket__message_af7ae89c0cba9566b64a47d40c5ea700a_html_af7ae89c0cba9566b64a47d40c5ea700a"><div class="ttname"><a href="structwebsocket__message_af7ae89c0cba9566b64a47d40c5ea700a.html#af7ae89c0cba9566b64a47d40c5ea700a">websocket_message::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> mongoose.h:4265</div></div>
<div class="ttc" id="structmg__connection_aeb5efea496ac74ed2e0b8864f4fd6f65_html_aeb5efea496ac74ed2e0b8864f4fd6f65"><div class="ttname"><a href="structmg__connection_aeb5efea496ac74ed2e0b8864f4fd6f65.html#aeb5efea496ac74ed2e0b8864f4fd6f65">mg_connection::priv_2</a></div><div class="ttdeci">void * priv_2</div><div class="ttdef"><b>Definition:</b> mongoose.h:3446</div></div>
<div class="ttc" id="mongoose_8h_a2afa30f0d231b29bb1fbc53e27ce8a56_html_a2afa30f0d231b29bb1fbc53e27ce8a56"><div class="ttname"><a href="mongoose_8h_a2afa30f0d231b29bb1fbc53e27ce8a56.html#a2afa30f0d231b29bb1fbc53e27ce8a56">mbuf_remove</a></div><div class="ttdeci">void mbuf_remove(struct mbuf *, size_t data_size)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1419</div></div>
<div class="ttc" id="mongoose_8h_af87c977d7706368c60d29eedcdbc3bb7_html_af87c977d7706368c60d29eedcdbc3bb7"><div class="ttname"><a href="mongoose_8h_af87c977d7706368c60d29eedcdbc3bb7.html#af87c977d7706368c60d29eedcdbc3bb7">mg_mqtt_next_subscribe_topic</a></div><div class="ttdeci">int mg_mqtt_next_subscribe_topic(struct mg_mqtt_message *msg, struct mg_str *topic, uint8_t *qos, int pos)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10569</div></div>
<div class="ttc" id="structmg__mgr__init__opts_html"><div class="ttname"><a href="structmg__mgr__init__opts.html">mg_mgr_init_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3502</div></div>
<div class="ttc" id="structmg__mqtt__proto__data_html"><div class="ttname"><a href="structmg__mqtt__proto__data.html">mg_mqtt_proto_data</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5211</div></div>
<div class="ttc" id="mongoose_8h_a2e0549498ee17cc8829e43301f3da235_html_a2e0549498ee17cc8829e43301f3da235"><div class="ttname"><a href="mongoose_8h_a2e0549498ee17cc8829e43301f3da235.html#a2e0549498ee17cc8829e43301f3da235">mg_mqtt_pubcomp</a></div><div class="ttdeci">void mg_mqtt_pubcomp(struct mg_connection *nc, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10634</div></div>
<div class="ttc" id="mongoose_8h_aef2a5aec1f45c52fe66adbd33b81b69b_html_aef2a5aec1f45c52fe66adbd33b81b69b"><div class="ttname"><a href="mongoose_8h_aef2a5aec1f45c52fe66adbd33b81b69b.html#aef2a5aec1f45c52fe66adbd33b81b69b">mg_mqtt_unsubscribe</a></div><div class="ttdeci">void mg_mqtt_unsubscribe(struct mg_connection *nc, char **topics, size_t topics_len, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10584</div></div>
<div class="ttc" id="structmg__iface_a43da8e59cadad694395f2a55df5c32a8_html_a43da8e59cadad694395f2a55df5c32a8"><div class="ttname"><a href="structmg__iface_a43da8e59cadad694395f2a55df5c32a8.html#a43da8e59cadad694395f2a55df5c32a8">mg_iface::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3162</div></div>
<div class="ttc" id="mongoose_8h_a7ce4b10e6acbb76ded6a48ca41eefad0_html_a7ce4b10e6acbb76ded6a48ca41eefad0"><div class="ttname"><a href="mongoose_8h_a7ce4b10e6acbb76ded6a48ca41eefad0.html#a7ce4b10e6acbb76ded6a48ca41eefad0">mg_send_websocket_handshake2</a></div><div class="ttdeci">void mg_send_websocket_handshake2(struct mg_connection *nc, const char *path, const char *host, const char *protocol, const char *extra_headers)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9771</div></div>
<div class="ttc" id="mongoose_8h_a006a9d8d665592d4f185f9f93913a6ec_html_a006a9d8d665592d4f185f9f93913a6ec"><div class="ttname"><a href="mongoose_8h_a006a9d8d665592d4f185f9f93913a6ec.html#a006a9d8d665592d4f185f9f93913a6ec">mg_mqtt_ping</a></div><div class="ttdeci">void mg_mqtt_ping(struct mg_connection *nc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10653</div></div>
<div class="ttc" id="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2_html_ad25f7c336d2f8f9ae7505412e9c17fc2"><div class="ttname"><a href="structmg__iface_ad25f7c336d2f8f9ae7505412e9c17fc2.html#ad25f7c336d2f8f9ae7505412e9c17fc2">mg_iface::mgr</a></div><div class="ttdeci">struct mg_mgr * mgr</div><div class="ttdef"><b>Definition:</b> mongoose.h:3161</div></div>
<div class="ttc" id="mongoose_8h_a2f76d3856c5886a14303404cbdbd53d5_html_a2f76d3856c5886a14303404cbdbd53d5"><div class="ttname"><a href="mongoose_8h_a2f76d3856c5886a14303404cbdbd53d5.html#a2f76d3856c5886a14303404cbdbd53d5">mg_basic_auth_header</a></div><div class="ttdeci">void mg_basic_auth_header(const struct mg_str user, const struct mg_str pass, struct mbuf *buf)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10174</div></div>
<div class="ttc" id="mongoose_8h_a0452c958c9129815f65c057fb54229fb_html_a0452c958c9129815f65c057fb54229fb"><div class="ttname"><a href="mongoose_8h_a0452c958c9129815f65c057fb54229fb.html#a0452c958c9129815f65c057fb54229fb">cs_to_hex</a></div><div class="ttdeci">void cs_to_hex(char *to, const unsigned char *p, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1843</div></div>
<div class="ttc" id="mongoose_8h_a4c90e8c040a8ef583112add7c64323b6_html_a4c90e8c040a8ef583112add7c64323b6"><div class="ttname"><a href="mongoose_8h_a4c90e8c040a8ef583112add7c64323b6.html#a4c90e8c040a8ef583112add7c64323b6">mg_strstr</a></div><div class="ttdeci">const char * mg_strstr(const struct mg_str haystack, const struct mg_str needle)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1539</div></div>
<div class="ttc" id="structmg__dns__message_afb4a01337779347f74a214c7a273ebcb_html_afb4a01337779347f74a214c7a273ebcb"><div class="ttname"><a href="structmg__dns__message_afb4a01337779347f74a214c7a273ebcb.html#afb4a01337779347f74a214c7a273ebcb">mg_dns_message::transaction_id</a></div><div class="ttdeci">uint16_t transaction_id</div><div class="ttdef"><b>Definition:</b> mongoose.h:5539</div></div>
<div class="ttc" id="structmg__connect__opts_a24fa9723e785487ed74b779c1e30ce75_html_a24fa9723e785487ed74b779c1e30ce75"><div class="ttname"><a href="structmg__connect__opts_a24fa9723e785487ed74b779c1e30ce75.html#a24fa9723e785487ed74b779c1e30ce75">mg_connect_opts::error_string</a></div><div class="ttdeci">const char ** error_string</div><div class="ttdef"><b>Definition:</b> mongoose.h:3675</div></div>
<div class="ttc" id="structmg__bind__opts_html"><div class="ttname"><a href="structmg__bind__opts.html">mg_bind_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3607</div></div>
<div class="ttc" id="structmg__mqtt__message_a79e6436df92ae92c88cd99150c27f8c7_html_a79e6436df92ae92c88cd99150c27f8c7"><div class="ttname"><a href="structmg__mqtt__message_a79e6436df92ae92c88cd99150c27f8c7.html#a79e6436df92ae92c88cd99150c27f8c7">mg_mqtt_message::keep_alive_timer</a></div><div class="ttdeci">uint16_t keep_alive_timer</div><div class="ttdef"><b>Definition:</b> mongoose.h:5187</div></div>
<div class="ttc" id="structhttp__message_a1c4e12c873f1e4d9711d470e2e32fa65_html_a1c4e12c873f1e4d9711d470e2e32fa65"><div class="ttname"><a href="structhttp__message_a1c4e12c873f1e4d9711d470e2e32fa65.html#a1c4e12c873f1e4d9711d470e2e32fa65">http_message::resp_code</a></div><div class="ttdeci">int resp_code</div><div class="ttdef"><b>Definition:</b> mongoose.h:4243</div></div>
<div class="ttc" id="mongoose_8h_abaea0687eb05744ac151ae014cb20046_html_abaea0687eb05744ac151ae014cb20046"><div class="ttname"><a href="mongoose_8h_abaea0687eb05744ac151ae014cb20046.html#abaea0687eb05744ac151ae014cb20046">c_snprintf</a></div><div class="ttdeci">int c_snprintf(char *buf, size_t buf_size, const char *format,...)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1772</div></div>
<div class="ttc" id="structmg__mgr_a6177e6c1145fe43e36d7cc926a7f0d8c_html_a6177e6c1145fe43e36d7cc926a7f0d8c"><div class="ttname"><a href="structmg__mgr_a6177e6c1145fe43e36d7cc926a7f0d8c.html#a6177e6c1145fe43e36d7cc926a7f0d8c">mg_mgr::nameserver</a></div><div class="ttdeci">const char * nameserver</div><div class="ttdef"><b>Definition:</b> mongoose.h:3411</div></div>
<div class="ttc" id="structmg__bind__opts_a9320251e7b1a273fedc123a3739fb9fa_html_a9320251e7b1a273fedc123a3739fb9fa"><div class="ttname"><a href="structmg__bind__opts_a9320251e7b1a273fedc123a3739fb9fa.html#a9320251e7b1a273fedc123a3739fb9fa">mg_bind_opts::error_string</a></div><div class="ttdeci">const char ** error_string</div><div class="ttdef"><b>Definition:</b> mongoose.h:3610</div></div>
<div class="ttc" id="mongoose_8h_a3f0263095b4f7ba23586f8660bdface2_html_a3f0263095b4f7ba23586f8660bdface2"><div class="ttname"><a href="mongoose_8h_a3f0263095b4f7ba23586f8660bdface2.html#a3f0263095b4f7ba23586f8660bdface2">cs_md5_update</a></div><div class="ttdeci">void cs_md5_update(cs_md5_ctx *c, const unsigned char *data, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1000</div></div>
<div class="ttc" id="mongoose_8h_ae662a8a7afb4425fabf95e0b12aabc0a_html_ae662a8a7afb4425fabf95e0b12aabc0a"><div class="ttname"><a href="mongoose_8h_ae662a8a7afb4425fabf95e0b12aabc0a.html#ae662a8a7afb4425fabf95e0b12aabc0a">mg_if_timer</a></div><div class="ttdeci">void mg_if_timer(struct mg_connection *c, double now)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2282</div></div>
<div class="ttc" id="structmg__connection_ae6b1f0d002253c0f80371fc5a7bbfc70_html_ae6b1f0d002253c0f80371fc5a7bbfc70"><div class="ttname"><a href="structmg__connection_ae6b1f0d002253c0f80371fc5a7bbfc70.html#ae6b1f0d002253c0f80371fc5a7bbfc70">mg_connection::proto_handler</a></div><div class="ttdeci">mg_event_handler_t proto_handler</div><div class="ttdef"><b>Definition:</b> mongoose.h:3433</div></div>
<div class="ttc" id="structcs__sha1__ctx_html"><div class="ttname"><a href="structcs__sha1__ctx.html">cs_sha1_ctx</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:1787</div></div>
<div class="ttc" id="mongoose_8h_abc1e540c922be63eea4488f520e3523d_html_abc1e540c922be63eea4488f520e3523daa0729979378c7d0c1658e1502a531f91"><div class="ttname"><a href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523daa0729979378c7d0c1658e1502a531f91">MG_DNS_QUESTION</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5521</div></div>
<div class="ttc" id="mongoose_8h_aa9250670d79f5b1ea7c970f180e1207f_html_aa9250670d79f5b1ea7c970f180e1207f"><div class="ttname"><a href="mongoose_8h_aa9250670d79f5b1ea7c970f180e1207f.html#aa9250670d79f5b1ea7c970f180e1207f">mg_connect_opt</a></div><div class="ttdeci">struct mg_connection * mg_connect_opt(struct mg_mgr *mgr, const char *address, MG_CB(mg_event_handler_t handler, void *user_data), struct mg_connect_opts opts)</div></div>
<div class="ttc" id="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9_html_a4c4b4acce406523462d38e0a0862dfb9aed7b4c97d10cc18cab15c2219cdc06a4"><div class="ttname"><a href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9aed7b4c97d10cc18cab15c2219cdc06a4">MG_RESOLVE_NO_ANSWERS</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5770</div></div>
<div class="ttc" id="mongoose_8h_a844719a6a21476e5f173ef2101473153_html_a844719a6a21476e5f173ef2101473153"><div class="ttname"><a href="mongoose_8h_a844719a6a21476e5f173ef2101473153.html#a844719a6a21476e5f173ef2101473153">mg_time</a></div><div class="ttdeci">double mg_time(void)</div><div class="ttdef"><b>Definition:</b> mongoose.c:3175</div></div>
<div class="ttc" id="structmg__str_html"><div class="ttname"><a href="structmg__str.html">mg_str</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:1859</div></div>
<div class="ttc" id="structmg__mqtt__message_aa62fb03efa898fe46058b34e6031f8db_html_aa62fb03efa898fe46058b34e6031f8db"><div class="ttname"><a href="structmg__mqtt__message_aa62fb03efa898fe46058b34e6031f8db.html#aa62fb03efa898fe46058b34e6031f8db">mg_mqtt_message::message_id</a></div><div class="ttdeci">uint16_t message_id</div><div class="ttdef"><b>Definition:</b> mongoose.h:5182</div></div>
<div class="ttc" id="structmg__mqtt__message_a4a6ff07b1d3fb2f06de4422d13e8e1ec_html_a4a6ff07b1d3fb2f06de4422d13e8e1ec"><div class="ttname"><a href="structmg__mqtt__message_a4a6ff07b1d3fb2f06de4422d13e8e1ec.html#a4a6ff07b1d3fb2f06de4422d13e8e1ec">mg_mqtt_message::connack_ret_code</a></div><div class="ttdeci">uint8_t connack_ret_code</div><div class="ttdef"><b>Definition:</b> mongoose.h:5181</div></div>
<div class="ttc" id="structmg__mgr__init__opts_a1c54576a6dc65d0d1fba5caec53847fd_html_a1c54576a6dc65d0d1fba5caec53847fd"><div class="ttname"><a href="structmg__mgr__init__opts_a1c54576a6dc65d0d1fba5caec53847fd.html#a1c54576a6dc65d0d1fba5caec53847fd">mg_mgr_init_opts::nameserver</a></div><div class="ttdeci">const char * nameserver</div><div class="ttdef"><b>Definition:</b> mongoose.h:3506</div></div>
<div class="ttc" id="mongoose_8h_a491a8389c337a0b86153dfabfde2930c_html_a491a8389c337a0b86153dfabfde2930c"><div class="ttname"><a href="mongoose_8h_a491a8389c337a0b86153dfabfde2930c.html#a491a8389c337a0b86153dfabfde2930c">mg_parse_http</a></div><div class="ttdeci">int mg_parse_http(const char *s, int n, struct http_message *hm, int is_req)</div><div class="ttdef"><b>Definition:</b> mongoose.c:5896</div></div>
<div class="ttc" id="structmg__str_a53945bdd422bf389d74b863f23cd4463_html_a53945bdd422bf389d74b863f23cd4463"><div class="ttname"><a href="structmg__str_a53945bdd422bf389d74b863f23cd4463.html#a53945bdd422bf389d74b863f23cd4463">mg_str::len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> mongoose.h:1861</div></div>
<div class="ttc" id="mongoose_8h_a2ed764a3ef91c75d108534f061d03c7f_html_a2ed764a3ef91c75d108534f061d03c7f"><div class="ttname"><a href="mongoose_8h_a2ed764a3ef91c75d108534f061d03c7f.html#a2ed764a3ef91c75d108534f061d03c7f">mg_mbuf_append_base64_putc</a></div><div class="ttdeci">void mg_mbuf_append_base64_putc(char ch, void *user_data)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10162</div></div>
<div class="ttc" id="structmg__connection_aaf0f39b26deef84e6c204a176ea1e50a_html_aaf0f39b26deef84e6c204a176ea1e50a"><div class="ttname"><a href="structmg__connection_aaf0f39b26deef84e6c204a176ea1e50a.html#aaf0f39b26deef84e6c204a176ea1e50a">mg_connection::last_io_time</a></div><div class="ttdeci">time_t last_io_time</div><div class="ttdef"><b>Definition:</b> mongoose.h:3428</div></div>
<div class="ttc" id="structmg__connect__opts_a53edbf692c49f5ee86d2fe27ebba816c_html_a53edbf692c49f5ee86d2fe27ebba816c"><div class="ttname"><a href="structmg__connect__opts_a53edbf692c49f5ee86d2fe27ebba816c.html#a53edbf692c49f5ee86d2fe27ebba816c">mg_connect_opts::nameserver</a></div><div class="ttdeci">const char * nameserver</div><div class="ttdef"><b>Definition:</b> mongoose.h:3677</div></div>
<div class="ttc" id="mongoose_8h_a29203c832b21ea3e7af11f374e2eccbd_html_a29203c832b21ea3e7af11f374e2eccbd"><div class="ttname"><a href="mongoose_8h_a29203c832b21ea3e7af11f374e2eccbd.html#a29203c832b21ea3e7af11f374e2eccbd">mg_parse_multipart</a></div><div class="ttdeci">size_t mg_parse_multipart(const char *buf, size_t buf_len, char *var_name, size_t var_name_len, char *file_name, size_t file_name_len, const char **chunk, size_t *chunk_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:8349</div></div>
<div class="ttc" id="mongoose_8h_a636b0233879363163fa46791a485681b_html_a636b0233879363163fa46791a485681b"><div class="ttname"><a href="mongoose_8h_a636b0233879363163fa46791a485681b.html#a636b0233879363163fa46791a485681b">mg_send</a></div><div class="ttdeci">void mg_send(struct mg_connection *, const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2646</div></div>
<div class="ttc" id="mongoose_8h_aa37314b5c33ab053f70f7dda2fb37742_html_aa37314b5c33ab053f70f7dda2fb37742"><div class="ttname"><a href="mongoose_8h_aa37314b5c33ab053f70f7dda2fb37742.html#aa37314b5c33ab053f70f7dda2fb37742">mg_vcasecmp</a></div><div class="ttdeci">int mg_vcasecmp(const struct mg_str *str2, const char *str1)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1467</div></div>
<div class="ttc" id="structmg__add__sock__opts_a3d5516f6481c9a317b4708ec370a9b43_html_a3d5516f6481c9a317b4708ec370a9b43"><div class="ttname"><a href="structmg__add__sock__opts_a3d5516f6481c9a317b4708ec370a9b43.html#a3d5516f6481c9a317b4708ec370a9b43">mg_add_sock_opts::iface</a></div><div class="ttdeci">struct mg_iface * iface</div><div class="ttdef"><b>Definition:</b> mongoose.h:3577</div></div>
<div class="ttc" id="mongoose_8h_afaaf58a848fe3c8484fb4758ebd7a232_html_afaaf58a848fe3c8484fb4758ebd7a232"><div class="ttname"><a href="mongoose_8h_afaaf58a848fe3c8484fb4758ebd7a232.html#afaaf58a848fe3c8484fb4758ebd7a232">mg_sock_addr_to_str</a></div><div class="ttdeci">int mg_sock_addr_to_str(const union socket_address *sa, char *buf, size_t len, int flags)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9987</div></div>
<div class="ttc" id="mongoose_8h_a434fcd77e575224c47a797ab0a7aeaa0_html_a434fcd77e575224c47a797ab0a7aeaa0"><div class="ttname"><a href="mongoose_8h_a434fcd77e575224c47a797ab0a7aeaa0.html#a434fcd77e575224c47a797ab0a7aeaa0">mg_if_poll</a></div><div class="ttdeci">void mg_if_poll(struct mg_connection *nc, time_t now)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2290</div></div>
<div class="ttc" id="mongoose_8h_a25d58e0edd722222c88a2d6d8b4cac9b_html_a25d58e0edd722222c88a2d6d8b4cac9b"><div class="ttname"><a href="mongoose_8h_a25d58e0edd722222c88a2d6d8b4cac9b.html#a25d58e0edd722222c88a2d6d8b4cac9b">mg_mqtt_pong</a></div><div class="ttdeci">void mg_mqtt_pong(struct mg_connection *nc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10657</div></div>
<div class="ttc" id="mongoose_8h_ad541c3df7d4e23ab160c9aebc6c4f512_html_ad541c3df7d4e23ab160c9aebc6c4f512"><div class="ttname"><a href="mongoose_8h_ad541c3df7d4e23ab160c9aebc6c4f512.html#ad541c3df7d4e23ab160c9aebc6c4f512">mg_send_websocket_handshake</a></div><div class="ttdeci">void mg_send_websocket_handshake(struct mg_connection *nc, const char *uri, const char *extra_headers)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9841</div></div>
<div class="ttc" id="mongoose_8h_a11bf96f2bbb1d24a3a5837d4a9743362_html_a11bf96f2bbb1d24a3a5837d4a9743362"><div class="ttname"><a href="mongoose_8h_a11bf96f2bbb1d24a3a5837d4a9743362.html#a11bf96f2bbb1d24a3a5837d4a9743362">mg_avprintf</a></div><div class="ttdeci">int mg_avprintf(char **buf, size_t size, const char *fmt, va_list ap)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1924</div></div>
<div class="ttc" id="namespaceTBT_ab2294a8ec1c676b81a8cd10a13a24828_html_ab2294a8ec1c676b81a8cd10a13a24828"><div class="ttname"><a href="namespaceTBT_ab2294a8ec1c676b81a8cd10a13a24828.html#ab2294a8ec1c676b81a8cd10a13a24828">TBT::ev_handler</a></div><div class="ttdeci">void ev_handler(mg_connection *nc, int ev, void *ev_data)</div><div class="ttdef"><b>Definition:</b> WSClientInterface.cpp:96</div></div>
<div class="ttc" id="mongoose_8h_a0e2c21fb32382c57e15c60b05c4a13a6_html_a0e2c21fb32382c57e15c60b05c4a13a6"><div class="ttname"><a href="mongoose_8h_a0e2c21fb32382c57e15c60b05c4a13a6.html#a0e2c21fb32382c57e15c60b05c4a13a6">mg_mqtt_disconnect</a></div><div class="ttdeci">void mg_mqtt_disconnect(struct mg_connection *nc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10661</div></div>
<div class="ttc" id="structmg__http__multipart__part_ab0c10748e6a40d9c85b4ec0ac98047bd_html_ab0c10748e6a40d9c85b4ec0ac98047bd"><div class="ttname"><a href="structmg__http__multipart__part_ab0c10748e6a40d9c85b4ec0ac98047bd.html#ab0c10748e6a40d9c85b4ec0ac98047bd">mg_http_multipart_part::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:4276</div></div>
<div class="ttc" id="mongoose_8h_a11a8939e058117e6e8dc25c68d267450_html_a11a8939e058117e6e8dc25c68d267450"><div class="ttname"><a href="mongoose_8h_a11a8939e058117e6e8dc25c68d267450.html#a11a8939e058117e6e8dc25c68d267450">mg_set_nameserver</a></div><div class="ttdeci">void mg_set_nameserver(struct mg_mgr *mgr, const char *nameserver)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11602</div></div>
<div class="ttc" id="mongoose_8h_aebdeb217cebb5f134c84baab1369b2e3_html_aebdeb217cebb5f134c84baab1369b2e3"><div class="ttname"><a href="mongoose_8h_aebdeb217cebb5f134c84baab1369b2e3.html#aebdeb217cebb5f134c84baab1369b2e3">mg_dns_parse_record_data</a></div><div class="ttdeci">int mg_dns_parse_record_data(struct mg_dns_message *msg, struct mg_dns_resource_record *rr, void *data, size_t data_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10902</div></div>
<div class="ttc" id="mongoose_8h_a215a10a6285d7ad208c15c1f9539a5ed_html_a215a10a6285d7ad208c15c1f9539a5ed"><div class="ttname"><a href="mongoose_8h_a215a10a6285d7ad208c15c1f9539a5ed.html#a215a10a6285d7ad208c15c1f9539a5ed">cs_timegm</a></div><div class="ttdeci">double cs_timegm(const struct tm *tm)</div><div class="ttdef"><b>Definition:</b> mongoose.c:784</div></div>
<div class="ttc" id="structmg__connection_a3dfa1816f5a4b0725d9d04be75bbb3f8_html_a3dfa1816f5a4b0725d9d04be75bbb3f8"><div class="ttname"><a href="structmg__connection_a3dfa1816f5a4b0725d9d04be75bbb3f8.html#a3dfa1816f5a4b0725d9d04be75bbb3f8">mg_connection::sa</a></div><div class="ttdeci">union socket_address sa</div><div class="ttdef"><b>Definition:</b> mongoose.h:3424</div></div>
<div class="ttc" id="structmg__add__sock__opts_a13c0a3d7dc05ad3873a03a7236735a50_html_a13c0a3d7dc05ad3873a03a7236735a50"><div class="ttname"><a href="structmg__add__sock__opts_a13c0a3d7dc05ad3873a03a7236735a50.html#a13c0a3d7dc05ad3873a03a7236735a50">mg_add_sock_opts::error_string</a></div><div class="ttdeci">const char ** error_string</div><div class="ttdef"><b>Definition:</b> mongoose.h:3576</div></div>
<div class="ttc" id="mongoose_8h_a4de7fb521506943105ec64d4587ccf33_html_a4de7fb521506943105ec64d4587ccf33"><div class="ttname"><a href="mongoose_8h_a4de7fb521506943105ec64d4587ccf33.html#a4de7fb521506943105ec64d4587ccf33">mg_connect_http</a></div><div class="ttdeci">struct mg_connection * mg_connect_http(struct mg_mgr *mgr, MG_CB(mg_event_handler_t event_handler, void *user_data), const char *url, const char *extra_headers, const char *post_data)</div></div>
<div class="ttc" id="mongoose_8h_a130d32ddb7c73fc58222bf5165394b79_html_a130d32ddb7c73fc58222bf5165394b79"><div class="ttname"><a href="mongoose_8h_a130d32ddb7c73fc58222bf5165394b79.html#a130d32ddb7c73fc58222bf5165394b79">mg_dns_next_record</a></div><div class="ttdeci">struct mg_dns_resource_record * mg_dns_next_record(struct mg_dns_message *msg, int query, struct mg_dns_resource_record *prev)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10888</div></div>
<div class="ttc" id="structmg__mqtt__message_a28adc3153ad7cca48588a73297dff2b4_html_a28adc3153ad7cca48588a73297dff2b4"><div class="ttname"><a href="structmg__mqtt__message_a28adc3153ad7cca48588a73297dff2b4.html#a28adc3153ad7cca48588a73297dff2b4">mg_mqtt_message::protocol_version</a></div><div class="ttdeci">uint8_t protocol_version</div><div class="ttdef"><b>Definition:</b> mongoose.h:5185</div></div>
<div class="ttc" id="mongoose_8h_aed89d9cc01411bdca562bda37c77b58f_html_aed89d9cc01411bdca562bda37c77b58f"><div class="ttname"><a href="mongoose_8h_aed89d9cc01411bdca562bda37c77b58f.html#aed89d9cc01411bdca562bda37c77b58f">mg_connect_ws</a></div><div class="ttdeci">struct mg_connection * mg_connect_ws(struct mg_mgr *mgr, MG_CB(mg_event_handler_t event_handler, void *user_data), const char *url, const char *protocol, const char *extra_headers)</div></div>
<div class="ttc" id="mongoose_8h_aa6ff7f3654a28ce8958b9aaafba871c8_html_aa6ff7f3654a28ce8958b9aaafba871c8"><div class="ttname"><a href="mongoose_8h_aa6ff7f3654a28ce8958b9aaafba871c8.html#aa6ff7f3654a28ce8958b9aaafba871c8">mg_base64_decode</a></div><div class="ttdeci">int mg_base64_decode(const unsigned char *s, int len, char *dst)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9947</div></div>
<div class="ttc" id="structmg__dns__resource__record_a9d314632522fcca513858285c639bee9_html_a9d314632522fcca513858285c639bee9"><div class="ttname"><a href="structmg__dns__resource__record_a9d314632522fcca513858285c639bee9.html#a9d314632522fcca513858285c639bee9">mg_dns_resource_record::rtype</a></div><div class="ttdeci">int rtype</div><div class="ttdef"><b>Definition:</b> mongoose.h:5528</div></div>
<div class="ttc" id="mongoose_8h_ae0607c1237c089d738025538b95c3318_html_ae0607c1237c089d738025538b95c3318"><div class="ttname"><a href="mongoose_8h_ae0607c1237c089d738025538b95c3318.html#ae0607c1237c089d738025538b95c3318">mg_vcmp</a></div><div class="ttdeci">int mg_vcmp(const struct mg_str *str2, const char *str1)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1457</div></div>
<div class="ttc" id="mongoose_8h_ab35d9402402a39d7d6e47c8426807cda_html_ab35d9402402a39d7d6e47c8426807cda"><div class="ttname"><a href="mongoose_8h_ab35d9402402a39d7d6e47c8426807cda.html#ab35d9402402a39d7d6e47c8426807cda">mg_set_protocol_dns</a></div><div class="ttdeci">void mg_set_protocol_dns(struct mg_connection *nc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11239</div></div>
<div class="ttc" id="structmg__dns__message_a87f916bb55651d46ce74f930a5e08327_html_a87f916bb55651d46ce74f930a5e08327"><div class="ttname"><a href="structmg__dns__message_a87f916bb55651d46ce74f930a5e08327.html#a87f916bb55651d46ce74f930a5e08327">mg_dns_message::flags</a></div><div class="ttdeci">uint16_t flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:5538</div></div>
<div class="ttc" id="structmg__bind__opts_a328924ea266e19c9add95902d82271ad_html_a328924ea266e19c9add95902d82271ad"><div class="ttname"><a href="structmg__bind__opts_a328924ea266e19c9add95902d82271ad.html#a328924ea266e19c9add95902d82271ad">mg_bind_opts::iface</a></div><div class="ttdeci">struct mg_iface * iface</div><div class="ttdef"><b>Definition:</b> mongoose.h:3611</div></div>
<div class="ttc" id="mongoose_8c_aa853a3248256f9d3d1a32490964697ef_html_aa853a3248256f9d3d1a32490964697ef"><div class="ttname"><a href="mongoose_8c_aa853a3248256f9d3d1a32490964697ef.html#aa853a3248256f9d3d1a32490964697ef">intptr_t</a></div><div class="ttdeci">#define intptr_t</div><div class="ttdef"><b>Definition:</b> mongoose.c:2207</div></div>
<div class="ttc" id="mongoose_8h_ab2260ef7657f28e31f29dcc1313f1e8d_html_ab2260ef7657f28e31f29dcc1313f1e8d"><div class="ttname"><a href="mongoose_8h_ab2260ef7657f28e31f29dcc1313f1e8d.html#ab2260ef7657f28e31f29dcc1313f1e8d">cs_base64_putc_t</a></div><div class="ttdeci">void(* cs_base64_putc_t)(char, void *)</div><div class="ttdef"><b>Definition:</b> mongoose.h:2018</div></div>
<div class="ttc" id="mongoose_8h_acf2f96f6386c4b52dff08be514b72ff6_html_acf2f96f6386c4b52dff08be514b72ff6"><div class="ttname"><a href="mongoose_8h_acf2f96f6386c4b52dff08be514b72ff6.html#acf2f96f6386c4b52dff08be514b72ff6">cs_sha1_final</a></div><div class="ttdeci">void cs_sha1_final(unsigned char digest[20], cs_sha1_ctx *)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1263</div></div>
<div class="ttc" id="mongoose_8h_a00e8d99b05aa6677b8788b9f5a9f4000_html_a00e8d99b05aa6677b8788b9f5a9f4000"><div class="ttname"><a href="mongoose_8h_a00e8d99b05aa6677b8788b9f5a9f4000.html#a00e8d99b05aa6677b8788b9f5a9f4000">mg_mgr_free</a></div><div class="ttdeci">void mg_mgr_free(struct mg_mgr *)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2382</div></div>
<div class="ttc" id="mongoose_8h_a38631bcf9f50213200764415341c59b0_html_a38631bcf9f50213200764415341c59b0"><div class="ttname"><a href="mongoose_8h_a38631bcf9f50213200764415341c59b0.html#a38631bcf9f50213200764415341c59b0">mg_parse_http_basic_auth</a></div><div class="ttdeci">int mg_parse_http_basic_auth(struct mg_str *hdr, char *user, size_t user_len, char *pass, size_t pass_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7153</div></div>
<div class="ttc" id="mongoose_8h_aa0ce1f2850118c808d1b92cb96a6a90d_html_aa0ce1f2850118c808d1b92cb96a6a90d"><div class="ttname"><a href="mongoose_8h_aa0ce1f2850118c808d1b92cb96a6a90d.html#aa0ce1f2850118c808d1b92cb96a6a90d">cs_fprint_base64</a></div><div class="ttdeci">void cs_fprint_base64(FILE *f, const unsigned char *src, int src_len)</div></div>
<div class="ttc" id="structmg__connection_aa93fd5ca83f11230bc971a68a7fa8d5e_html_aa93fd5ca83f11230bc971a68a7fa8d5e"><div class="ttname"><a href="structmg__connection_aa93fd5ca83f11230bc971a68a7fa8d5e.html#aa93fd5ca83f11230bc971a68a7fa8d5e">mg_connection::prev</a></div><div class="ttdeci">struct mg_connection * prev</div><div class="ttdef"><b>Definition:</b> mongoose.h:3418</div></div>
<div class="ttc" id="mongoose_8h_aea2ef4926eb7f9f89f8d1435d6a9e8a0_html_aea2ef4926eb7f9f89f8d1435d6a9e8a0"><div class="ttname"><a href="mongoose_8h_aea2ef4926eb7f9f89f8d1435d6a9e8a0.html#aea2ef4926eb7f9f89f8d1435d6a9e8a0">cs_sha1_init</a></div><div class="ttdeci">void cs_sha1_init(cs_sha1_ctx *)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1234</div></div>
<div class="ttc" id="mongoose_8h_a5ac0c1c762a5839f16c7e68dfb571cf5_html_a5ac0c1c762a5839f16c7e68dfb571cf5"><div class="ttname"><a href="mongoose_8h_a5ac0c1c762a5839f16c7e68dfb571cf5.html#a5ac0c1c762a5839f16c7e68dfb571cf5">mg_if_sent_cb</a></div><div class="ttdeci">void mg_if_sent_cb(struct mg_connection *nc, int num_sent)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2655</div></div>
<div class="ttc" id="mongoose_8h_a20b4eafe4de8c81ef396cfeb8c2a4b38_html_a20b4eafe4de8c81ef396cfeb8c2a4b38"><div class="ttname"><a href="mongoose_8h_a20b4eafe4de8c81ef396cfeb8c2a4b38.html#a20b4eafe4de8c81ef396cfeb8c2a4b38">mg_ifaces</a></div><div class="ttdeci">const struct mg_iface_vtable * mg_ifaces[]</div><div class="ttdef"><b>Definition:</b> mongoose.c:3274</div></div>
<div class="ttc" id="mongoose_8h_a2b1b8bd86c01ee6dae737670e870f44c_html_a2b1b8bd86c01ee6dae737670e870f44c"><div class="ttname"><a href="mongoose_8h_a2b1b8bd86c01ee6dae737670e870f44c.html#a2b1b8bd86c01ee6dae737670e870f44c">mg_mgr_init</a></div><div class="ttdeci">void mg_mgr_init(struct mg_mgr *mgr, void *user_data)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2324</div></div>
<div class="ttc" id="structmg__mgr__init__opts_ac72a1f670b50b1ab79bc9e2790f114c3_html_ac72a1f670b50b1ab79bc9e2790f114c3"><div class="ttname"><a href="structmg__mgr__init__opts_ac72a1f670b50b1ab79bc9e2790f114c3.html#ac72a1f670b50b1ab79bc9e2790f114c3">mg_mgr_init_opts::main_iface</a></div><div class="ttdeci">const struct mg_iface_vtable * main_iface</div><div class="ttdef"><b>Definition:</b> mongoose.h:3503</div></div>
<div class="ttc" id="mongoose_8h_afd1f26bca4497394c4256aa32a2b1292_html_afd1f26bca4497394c4256aa32a2b1292"><div class="ttname"><a href="mongoose_8h_afd1f26bca4497394c4256aa32a2b1292.html#afd1f26bca4497394c4256aa32a2b1292">cs_md5_init</a></div><div class="ttdeci">void cs_md5_init(cs_md5_ctx *c)</div><div class="ttdef"><b>Definition:</b> mongoose.c:908</div></div>
<div class="ttc" id="mongoose_8h_a361ad3a39d0a8304514c5cc8074fb3c3_html_a361ad3a39d0a8304514c5cc8074fb3c3"><div class="ttname"><a href="mongoose_8h_a361ad3a39d0a8304514c5cc8074fb3c3.html#a361ad3a39d0a8304514c5cc8074fb3c3">mg_vprintf</a></div><div class="ttdeci">int mg_vprintf(struct mg_connection *, const char *fmt, va_list ap)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2428</div></div>
<div class="ttc" id="structmg__dns__resource__record_aa5d1c1a7ba2d02908c27fab68ded25be_html_aa5d1c1a7ba2d02908c27fab68ded25be"><div class="ttname"><a href="structmg__dns__resource__record_aa5d1c1a7ba2d02908c27fab68ded25be.html#aa5d1c1a7ba2d02908c27fab68ded25be">mg_dns_resource_record::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> mongoose.h:5530</div></div>
<div class="ttc" id="structmg__mgr_afd2b46e44b87ffc58a8e286ed784ee31_html_afd2b46e44b87ffc58a8e286ed784ee31"><div class="ttname"><a href="structmg__mgr_afd2b46e44b87ffc58a8e286ed784ee31.html#afd2b46e44b87ffc58a8e286ed784ee31">mg_mgr::ifaces</a></div><div class="ttdeci">struct mg_iface ** ifaces</div><div class="ttdef"><b>Definition:</b> mongoose.h:3410</div></div>
<div class="ttc" id="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda_html_ae5a76da37b3496fcdf561e51648eabda"><div class="ttname"><a href="mongoose_8h_ae5a76da37b3496fcdf561e51648eabda.html#ae5a76da37b3496fcdf561e51648eabda">mg_event_handler_t</a></div><div class="ttdeci">void(* mg_event_handler_t)(struct mg_connection *nc, int ev, void *ev_data MG_UD_ARG(void *user_data))</div><div class="ttdef"><b>Definition:</b> mongoose.h:3385</div></div>
<div class="ttc" id="mongoose_8h_aa718a4e8e712cf409544b9f31d0fc9e4_html_aa718a4e8e712cf409544b9f31d0fc9e4"><div class="ttname"><a href="mongoose_8h_aa718a4e8e712cf409544b9f31d0fc9e4.html#aa718a4e8e712cf409544b9f31d0fc9e4">mg_mqtt_match_topic_expression</a></div><div class="ttdeci">int mg_mqtt_match_topic_expression(struct mg_str exp, struct mg_str topic)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10398</div></div>
<div class="ttc" id="structwebsocket__message_aeb8922c34831455b764d83083ae39968_html_aeb8922c34831455b764d83083ae39968"><div class="ttname"><a href="structwebsocket__message_aeb8922c34831455b764d83083ae39968.html#aeb8922c34831455b764d83083ae39968">websocket_message::data</a></div><div class="ttdeci">unsigned char * data</div><div class="ttdef"><b>Definition:</b> mongoose.h:4264</div></div>
<div class="ttc" id="unionsocket__address_html"><div class="ttname"><a href="unionsocket__address.html">socket_address</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3369</div></div>
<div class="ttc" id="mongoose_8h_ad281ec2c88a87500882fb3dffd2d8701_html_ad281ec2c88a87500882fb3dffd2d8701"><div class="ttname"><a href="mongoose_8h_ad281ec2c88a87500882fb3dffd2d8701.html#ad281ec2c88a87500882fb3dffd2d8701">mg_send_websocket_handshake3</a></div><div class="ttdeci">void mg_send_websocket_handshake3(struct mg_connection *nc, const char *path, const char *host, const char *protocol, const char *extra_headers, const char *user, const char *pass)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9778</div></div>
<div class="ttc" id="structmg__mqtt__proto__data_add8062f8f2802a844056ead961485bc0_html_add8062f8f2802a844056ead961485bc0"><div class="ttname"><a href="structmg__mqtt__proto__data_add8062f8f2802a844056ead961485bc0.html#add8062f8f2802a844056ead961485bc0">mg_mqtt_proto_data::keep_alive</a></div><div class="ttdeci">uint16_t keep_alive</div><div class="ttdef"><b>Definition:</b> mongoose.h:5212</div></div>
<div class="ttc" id="structmg__mgr_html"><div class="ttname"><a href="structmg__mgr.html">mg_mgr</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3400</div></div>
<div class="ttc" id="structmg__mqtt__message_a5c5bca3da240c7a3cbc7bef8b67bc90e_html_a5c5bca3da240c7a3cbc7bef8b67bc90e"><div class="ttname"><a href="structmg__mqtt__message_a5c5bca3da240c7a3cbc7bef8b67bc90e.html#a5c5bca3da240c7a3cbc7bef8b67bc90e">mg_mqtt_message::qos</a></div><div class="ttdeci">int qos</div><div class="ttdef"><b>Definition:</b> mongoose.h:5176</div></div>
<div class="ttc" id="mongoose_8h_a8666e3133ed8642cc139c439e20a61e7_html_a8666e3133ed8642cc139c439e20a61e7"><div class="ttname"><a href="mongoose_8h_a8666e3133ed8642cc139c439e20a61e7.html#a8666e3133ed8642cc139c439e20a61e7">mg_sock_to_str</a></div><div class="ttdeci">void mg_sock_to_str(sock_t sock, char *buf, size_t len, int flags)</div><div class="ttdef"><b>Definition:</b> mongoose.c:4012</div></div>
<div class="ttc" id="structmg__ssi__call__ctx_html"><div class="ttname"><a href="structmg__ssi__call__ctx.html">mg_ssi_call_ctx</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:4280</div></div>
<div class="ttc" id="structmbuf_ae245d03a50c2891c1fb228093d842270_html_ae245d03a50c2891c1fb228093d842270"><div class="ttname"><a href="structmbuf_ae245d03a50c2891c1fb228093d842270.html#ae245d03a50c2891c1fb228093d842270">mbuf::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> mongoose.h:1948</div></div>
<div class="ttc" id="mongoose_8h_a080dc50cfd880656bc8e79513c62fc2d_html_a080dc50cfd880656bc8e79513c62fc2d"><div class="ttname"><a href="mongoose_8h_a080dc50cfd880656bc8e79513c62fc2d.html#a080dc50cfd880656bc8e79513c62fc2d">mg_send_dns_query</a></div><div class="ttdeci">void mg_send_dns_query(struct mg_connection *nc, const char *name, int query_type)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11028</div></div>
<div class="ttc" id="mongoose_8h_a7441246a6da4d19051f35d4438e8eddc_html_a7441246a6da4d19051f35d4438e8eddc"><div class="ttname"><a href="mongoose_8h_a7441246a6da4d19051f35d4438e8eddc.html#a7441246a6da4d19051f35d4438e8eddc">mg_http_create_digest_auth_header</a></div><div class="ttdeci">int mg_http_create_digest_auth_header(char *buf, size_t buf_len, const char *method, const char *uri, const char *auth_domain, const char *user, const char *passwd)</div></div>
<div class="ttc" id="mongoose_8h_a4af484415c34d126628f7b3981a984d5_html_a4af484415c34d126628f7b3981a984d5"><div class="ttname"><a href="mongoose_8h_a4af484415c34d126628f7b3981a984d5.html#a4af484415c34d126628f7b3981a984d5">mg_num_ifaces</a></div><div class="ttdeci">int mg_num_ifaces</div><div class="ttdef"><b>Definition:</b> mongoose.c:3281</div></div>
<div class="ttc" id="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9_html_a4c4b4acce406523462d38e0a0862dfb9ad00b64839df458acf79081a2f7e74ff2"><div class="ttname"><a href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9ad00b64839df458acf79081a2f7e74ff2">MG_RESOLVE_EXCEEDED_RETRY_COUNT</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5771</div></div>
<div class="ttc" id="mongoose_8h_a34fa5a03fe913545413422d65e3a8c8b_html_a34fa5a03fe913545413422d65e3a8c8b"><div class="ttname"><a href="mongoose_8h_a34fa5a03fe913545413422d65e3a8c8b.html#a34fa5a03fe913545413422d65e3a8c8b">mg_normalize_uri_path</a></div><div class="ttdeci">int mg_normalize_uri_path(const struct mg_str *in, struct mg_str *out)</div><div class="ttdef"><b>Definition:</b> mongoose.c:5457</div></div>
<div class="ttc" id="mongoose_8h_a46f725f5b4a9ae9daaca141579844dfd_html_a46f725f5b4a9ae9daaca141579844dfd"><div class="ttname"><a href="mongoose_8h_a46f725f5b4a9ae9daaca141579844dfd.html#a46f725f5b4a9ae9daaca141579844dfd">mg_send_websocket_handshake3v</a></div><div class="ttdeci">void mg_send_websocket_handshake3v(struct mg_connection *nc, const struct mg_str path, const struct mg_str host, const struct mg_str protocol, const struct mg_str extra_headers, const struct mg_str user, const struct mg_str pass)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9787</div></div>
<div class="ttc" id="mongoose_8h_a2cbd4a7623976a4a7f4afd779861f6bb_html_a2cbd4a7623976a4a7f4afd779861f6bb"><div class="ttname"><a href="mongoose_8h_a2cbd4a7623976a4a7f4afd779861f6bb.html#a2cbd4a7623976a4a7f4afd779861f6bb">mg_dns_insert_header</a></div><div class="ttdeci">int mg_dns_insert_header(struct mbuf *io, size_t pos, struct mg_dns_message *msg)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10931</div></div>
<div class="ttc" id="structmg__dns__resource__record_a9be7dc2d7ef4e2dc20413289a55f6ff7_html_a9be7dc2d7ef4e2dc20413289a55f6ff7"><div class="ttname"><a href="structmg__dns__resource__record_a9be7dc2d7ef4e2dc20413289a55f6ff7.html#a9be7dc2d7ef4e2dc20413289a55f6ff7">mg_dns_resource_record::rclass</a></div><div class="ttdeci">int rclass</div><div class="ttdef"><b>Definition:</b> mongoose.h:5529</div></div>
<div class="ttc" id="structmg__mqtt__proto__data_afebe290ccf2c1929b1c05a25bfe7f4d7_html_afebe290ccf2c1929b1c05a25bfe7f4d7"><div class="ttname"><a href="structmg__mqtt__proto__data_afebe290ccf2c1929b1c05a25bfe7f4d7.html#afebe290ccf2c1929b1c05a25bfe7f4d7">mg_mqtt_proto_data::last_control_time</a></div><div class="ttdeci">double last_control_time</div><div class="ttdef"><b>Definition:</b> mongoose.h:5213</div></div>
<div class="ttc" id="mongoose_8h_af61196528db9402aae10ac9e2339b657_html_af61196528db9402aae10ac9e2339b657"><div class="ttname"><a href="mongoose_8h_af61196528db9402aae10ac9e2339b657.html#af61196528db9402aae10ac9e2339b657">mg_mqtt_pubrel</a></div><div class="ttdeci">void mg_mqtt_pubrel(struct mg_connection *nc, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10630</div></div>
<div class="ttc" id="mongoose_8h_a45031ed3fb7ce9757f2cd543ac379c13_html_a45031ed3fb7ce9757f2cd543ac379c13"><div class="ttname"><a href="mongoose_8h_a45031ed3fb7ce9757f2cd543ac379c13.html#a45031ed3fb7ce9757f2cd543ac379c13">mg_set_timer</a></div><div class="ttdeci">double mg_set_timer(struct mg_connection *c, double timestamp)</div><div class="ttdef"><b>Definition:</b> mongoose.c:3124</div></div>
<div class="ttc" id="mongoose_8h_a8b314b9753d45adb4dd62438576e6a1c_html_a8b314b9753d45adb4dd62438576e6a1c"><div class="ttname"><a href="mongoose_8h_a8b314b9753d45adb4dd62438576e6a1c.html#a8b314b9753d45adb4dd62438576e6a1c">mg_next_comma_list_entry</a></div><div class="ttdeci">const char * mg_next_comma_list_entry(const char *list, struct mg_str *val, struct mg_str *eq_val)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1972</div></div>
<div class="ttc" id="mongoose_8h_a7271747e2e6b7754ade288a7457c340a_html_a7271747e2e6b7754ade288a7457c340a"><div class="ttname"><a href="mongoose_8h_a7271747e2e6b7754ade288a7457c340a.html#a7271747e2e6b7754ade288a7457c340a">c_strnstr</a></div><div class="ttdeci">const char * c_strnstr(const char *s, const char *find, size_t slen)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1813</div></div>
<div class="ttc" id="mongoose_8h_aba504889d00dcb957e8f3e92a4a19d6b_html_aba504889d00dcb957e8f3e92a4a19d6b"><div class="ttname"><a href="mongoose_8h_aba504889d00dcb957e8f3e92a4a19d6b.html#aba504889d00dcb957e8f3e92a4a19d6b">mg_skip</a></div><div class="ttdeci">const char * mg_skip(const char *s, const char *end_string, const char *delimiters, struct mg_str *v)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9892</div></div>
<div class="ttc" id="structmg__add__sock__opts_ac836b917617be7c0a38e6a322cdf9cff_html_ac836b917617be7c0a38e6a322cdf9cff"><div class="ttname"><a href="structmg__add__sock__opts_ac836b917617be7c0a38e6a322cdf9cff.html#ac836b917617be7c0a38e6a322cdf9cff">mg_add_sock_opts::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:3575</div></div>
<div class="ttc" id="mongoose_8h_a6434df14580c4a10b5514935dd91a2c6_html_a6434df14580c4a10b5514935dd91a2c6"><div class="ttname"><a href="mongoose_8h_a6434df14580c4a10b5514935dd91a2c6.html#a6434df14580c4a10b5514935dd91a2c6">mg_socketpair</a></div><div class="ttdeci">int mg_socketpair(sock_t[2], int sock_type)</div></div>
<div class="ttc" id="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9_html_a4c4b4acce406523462d38e0a0862dfb9a974987bbd29f526f623288c0a801c471"><div class="ttname"><a href="mongoose_8h_a4c4b4acce406523462d38e0a0862dfb9.html#a4c4b4acce406523462d38e0a0862dfb9a974987bbd29f526f623288c0a801c471">MG_RESOLVE_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5772</div></div>
<div class="ttc" id="mongoose_8h_a34951229fad1d145805f5bb7a29ace67_html_a34951229fad1d145805f5bb7a29ace67"><div class="ttname"><a href="mongoose_8h_a34951229fad1d145805f5bb7a29ace67.html#a34951229fad1d145805f5bb7a29ace67">mg_if_accept_tcp_cb</a></div><div class="ttdeci">void mg_if_accept_tcp_cb(struct mg_connection *nc, union socket_address *sa, size_t sa_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2639</div></div>
<div class="ttc" id="structhttp__message_html"><div class="ttname"><a href="structhttp__message.html">http_message</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:4233</div></div>
<div class="ttc" id="mongoose_8h_a3b7cf668d0412cd37c5bba8ba5938ee0_html_a3b7cf668d0412cd37c5bba8ba5938ee0"><div class="ttname"><a href="mongoose_8h_a3b7cf668d0412cd37c5bba8ba5938ee0.html#a3b7cf668d0412cd37c5bba8ba5938ee0">mg_if_recv_udp_cb</a></div><div class="ttdeci">void mg_if_recv_udp_cb(struct mg_connection *nc, void *buf, int len, union socket_address *sa, size_t sa_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2712</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_a7cdd8f59da7f39ccd8face3e7267d634_html_a7cdd8f59da7f39ccd8face3e7267d634"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts_a7cdd8f59da7f39ccd8face3e7267d634.html#a7cdd8f59da7f39ccd8face3e7267d634">mg_send_mqtt_handshake_opts::will_topic</a></div><div class="ttdeci">const char * will_topic</div><div class="ttdef"><b>Definition:</b> mongoose.h:5204</div></div>
<div class="ttc" id="structmg__connect__opts_html"><div class="ttname"><a href="structmg__connect__opts.html">mg_connect_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3672</div></div>
<div class="ttc" id="mongoose_8h_a25b56c78c499f837955faa1a52b5d7e5_html_a25b56c78c499f837955faa1a52b5d7e5"><div class="ttname"><a href="mongoose_8h_a25b56c78c499f837955faa1a52b5d7e5.html#a25b56c78c499f837955faa1a52b5d7e5">mg_dns_encode_record</a></div><div class="ttdeci">int mg_dns_encode_record(struct mbuf *io, struct mg_dns_resource_record *rr, const char *name, size_t nlen, const void *rdata, size_t rlen)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10983</div></div>
<div class="ttc" id="structmg__http__multipart__part_af3c6e9825e31f000ec9e26c016eaa707_html_af3c6e9825e31f000ec9e26c016eaa707"><div class="ttname"><a href="structmg__http__multipart__part_af3c6e9825e31f000ec9e26c016eaa707.html#af3c6e9825e31f000ec9e26c016eaa707">mg_http_multipart_part::var_name</a></div><div class="ttdeci">const char * var_name</div><div class="ttdef"><b>Definition:</b> mongoose.h:4273</div></div>
<div class="ttc" id="structmg__resolve__async__opts_ae7bb70da865548e33663e1292e334293_html_ae7bb70da865548e33663e1292e334293"><div class="ttname"><a href="structmg__resolve__async__opts_ae7bb70da865548e33663e1292e334293.html#ae7bb70da865548e33663e1292e334293">mg_resolve_async_opts::only_literal</a></div><div class="ttdeci">int only_literal</div><div class="ttdef"><b>Definition:</b> mongoose.h:5784</div></div>
<div class="ttc" id="structmg__connection_ab15e90e7fb7b8719cc7dcc67f45856e1_html_ab15e90e7fb7b8719cc7dcc67f45856e1"><div class="ttname"><a href="structmg__connection_ab15e90e7fb7b8719cc7dcc67f45856e1.html#ab15e90e7fb7b8719cc7dcc67f45856e1">mg_connection::recv_mbuf_limit</a></div><div class="ttdeci">size_t recv_mbuf_limit</div><div class="ttdef"><b>Definition:</b> mongoose.h:3425</div></div>
<div class="ttc" id="mongoose_8h_a6dc91813be124910bd42a1c6233e1b82_html_a6dc91813be124910bd42a1c6233e1b82"><div class="ttname"><a href="mongoose_8h_a6dc91813be124910bd42a1c6233e1b82.html#a6dc91813be124910bd42a1c6233e1b82">mg_find_iface</a></div><div class="ttdeci">struct mg_iface * mg_find_iface(struct mg_mgr *mgr, const struct mg_iface_vtable *vtable, struct mg_iface *from)</div><div class="ttdef"><b>Definition:</b> mongoose.c:3292</div></div>
<div class="ttc" id="mongoose_8h_abc1e540c922be63eea4488f520e3523d_html_abc1e540c922be63eea4488f520e3523da6ddce58b99210fa84e2b4d0e13770985"><div class="ttname"><a href="mongoose_8h_abc1e540c922be63eea4488f520e3523d.html#abc1e540c922be63eea4488f520e3523da6ddce58b99210fa84e2b4d0e13770985">MG_DNS_ANSWER</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5522</div></div>
<div class="ttc" id="mongoose_8h_a6842bbd8fac97833cc3b25a2b25dbeca_html_a6842bbd8fac97833cc3b25a2b25dbeca"><div class="ttname"><a href="mongoose_8h_a6842bbd8fac97833cc3b25a2b25dbeca.html#a6842bbd8fac97833cc3b25a2b25dbeca">mg_send_http_chunk</a></div><div class="ttdeci">void mg_send_http_chunk(struct mg_connection *nc, const char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7052</div></div>
<div class="ttc" id="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09_html_a69b66a5c9964d21e894358d0b44bed09"><div class="ttname"><a href="mongoose_8h_a69b66a5c9964d21e894358d0b44bed09.html#a69b66a5c9964d21e894358d0b44bed09">MG_CB</a></div><div class="ttdeci">#define MG_CB(cb, ud)</div><div class="ttdef"><b>Definition:</b> mongoose.h:3121</div></div>
<div class="ttc" id="mongoose_8h_aac203b0b75c3c6e3cb8fcb8f56b984c7_html_aac203b0b75c3c6e3cb8fcb8f56b984c7"><div class="ttname"><a href="mongoose_8h_aac203b0b75c3c6e3cb8fcb8f56b984c7.html#aac203b0b75c3c6e3cb8fcb8f56b984c7">mg_mqtt_pubrec</a></div><div class="ttdeci">void mg_mqtt_pubrec(struct mg_connection *nc, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10626</div></div>
<div class="ttc" id="structmg__mgr__init__opts_a9e6fe35e823019f31446d34e29cc3f4a_html_a9e6fe35e823019f31446d34e29cc3f4a"><div class="ttname"><a href="structmg__mgr__init__opts_a9e6fe35e823019f31446d34e29cc3f4a.html#a9e6fe35e823019f31446d34e29cc3f4a">mg_mgr_init_opts::num_ifaces</a></div><div class="ttdeci">int num_ifaces</div><div class="ttdef"><b>Definition:</b> mongoose.h:3504</div></div>
<div class="ttc" id="mongoose_8h_aa08250ec322dd7b5ddb7aaae7550116c_html_aa08250ec322dd7b5ddb7aaae7550116c"><div class="ttname"><a href="mongoose_8h_aa08250ec322dd7b5ddb7aaae7550116c.html#aa08250ec322dd7b5ddb7aaae7550116c">mg_send_websocket_framev</a></div><div class="ttdeci">void mg_send_websocket_framev(struct mg_connection *nc, int op_and_flags, const struct mg_str *strings, int num_strings)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9663</div></div>
<div class="ttc" id="mongoose_8h_ac97e32affece7eff0d37c77555f97bcb_html_ac97e32affece7eff0d37c77555f97bcb"><div class="ttname"><a href="mongoose_8h_ac97e32affece7eff0d37c77555f97bcb.html#ac97e32affece7eff0d37c77555f97bcb">mg_base64_encode</a></div><div class="ttdeci">void mg_base64_encode(const unsigned char *src, int src_len, char *dst)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9943</div></div>
<div class="ttc" id="mongoose_8h_aa588727712fe512035b7b76ad0b29b06_html_aa588727712fe512035b7b76ad0b29b06"><div class="ttname"><a href="mongoose_8h_aa588727712fe512035b7b76ad0b29b06.html#aa588727712fe512035b7b76ad0b29b06">mg_url_decode</a></div><div class="ttdeci">int mg_url_decode(const char *src, int src_len, char *dst, int dst_len, int is_form_url_encoded)</div><div class="ttdef"><b>Definition:</b> mongoose.c:6978</div></div>
<div class="ttc" id="mongoose_8h_a9da21b9e0796262d42fb69a200b97071_html_a9da21b9e0796262d42fb69a200b97071"><div class="ttname"><a href="mongoose_8h_a9da21b9e0796262d42fb69a200b97071.html#a9da21b9e0796262d42fb69a200b97071">cs_hmac_sha1</a></div><div class="ttdeci">void cs_hmac_sha1(const unsigned char *key, size_t key_len, const unsigned char *text, size_t text_len, unsigned char out[20])</div><div class="ttdef"><b>Definition:</b> mongoose.c:1287</div></div>
<div class="ttc" id="mongoose_8h_aef2378acb5b7cc16530dfe648c8d37eb_html_aef2378acb5b7cc16530dfe648c8d37eb"><div class="ttname"><a href="mongoose_8h_aef2378acb5b7cc16530dfe648c8d37eb.html#aef2378acb5b7cc16530dfe648c8d37eb">mg_bind</a></div><div class="ttdeci">struct mg_connection * mg_bind(struct mg_mgr *mgr, const char *address, MG_CB(mg_event_handler_t handler, void *user_data))</div></div>
<div class="ttc" id="structmg__connection_a9bff1f6466b9a610dad5591bdbe79daa_html_a9bff1f6466b9a610dad5591bdbe79daa"><div class="ttname"><a href="structmg__connection_a9bff1f6466b9a610dad5591bdbe79daa.html#a9bff1f6466b9a610dad5591bdbe79daa">mg_connection::f</a></div><div class="ttdeci">mg_event_handler_t f</div><div class="ttdef"><b>Definition:</b> mongoose.h:3444</div></div>
<div class="ttc" id="namespaceTBT_a625f01f6d8d0db8cd557bae99d0a8ae0_html_a625f01f6d8d0db8cd557bae99d0a8ae0"><div class="ttname"><a href="namespaceTBT_a625f01f6d8d0db8cd557bae99d0a8ae0.html#a625f01f6d8d0db8cd557bae99d0a8ae0">TBT::__attribute__</a></div><div class="ttdeci">TBT::UDPClient __attribute__</div></div>
<div class="ttc" id="structmbuf_html"><div class="ttname"><a href="structmbuf.html">mbuf</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:1945</div></div>
<div class="ttc" id="mongoose_8h_a259bc1f872b9a24d54d33e4e74cf75b4_html_a259bc1f872b9a24d54d33e4e74cf75b4"><div class="ttname"><a href="mongoose_8h_a259bc1f872b9a24d54d33e4e74cf75b4.html#a259bc1f872b9a24d54d33e4e74cf75b4">mg_connect</a></div><div class="ttdeci">struct mg_connection * mg_connect(struct mg_mgr *mgr, const char *address, MG_CB(mg_event_handler_t handler, void *user_data))</div></div>
<div class="ttc" id="mongoose_8h_a01dbdfd769a4bc517c4f2b2f380bda2d_html_a01dbdfd769a4bc517c4f2b2f380bda2d"><div class="ttname"><a href="mongoose_8h_a01dbdfd769a4bc517c4f2b2f380bda2d.html#a01dbdfd769a4bc517c4f2b2f380bda2d">cs_base64_update</a></div><div class="ttdeci">void cs_base64_update(struct cs_base64_ctx *ctx, const char *str, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:447</div></div>
<div class="ttc" id="mongoose_8h_aec2ccd0e8c215504508af23f04480be6_html_aec2ccd0e8c215504508af23f04480be6"><div class="ttname"><a href="mongoose_8h_aec2ccd0e8c215504508af23f04480be6.html#aec2ccd0e8c215504508af23f04480be6">LIST_ENTRY</a></div><div class="ttdeci">#define LIST_ENTRY(type)</div><div class="ttdef"><b>Definition:</b> mongoose.h:2597</div></div>
<div class="ttc" id="mongoose_8h_ab6fb7900e99440aa777f089728daf264_html_ab6fb7900e99440aa777f089728daf264"><div class="ttname"><a href="mongoose_8h_ab6fb7900e99440aa777f089728daf264.html#ab6fb7900e99440aa777f089728daf264">mg_next</a></div><div class="ttdeci">struct mg_connection * mg_next(struct mg_mgr *mgr, struct mg_connection *c)</div><div class="ttdef"><b>Definition:</b> mongoose.c:3044</div></div>
<div class="ttc" id="structmg__mqtt__message_abfc247fa4aaf411b0957e71df6f6ce2b_html_abfc247fa4aaf411b0957e71df6f6ce2b"><div class="ttname"><a href="structmg__mqtt__message_abfc247fa4aaf411b0957e71df6f6ce2b.html#abfc247fa4aaf411b0957e71df6f6ce2b">mg_mqtt_message::cmd</a></div><div class="ttdeci">int cmd</div><div class="ttdef"><b>Definition:</b> mongoose.h:5175</div></div>
<div class="ttc" id="mongoose_8h_a86b3b18850b4a122e8cd173941b43ab6_html_a86b3b18850b4a122e8cd173941b43ab6"><div class="ttname"><a href="mongoose_8h_a86b3b18850b4a122e8cd173941b43ab6.html#a86b3b18850b4a122e8cd173941b43ab6">mg_match_prefix</a></div><div class="ttdeci">int mg_match_prefix(const char *pattern, int pattern_len, const char *str)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2067</div></div>
<div class="ttc" id="mongoose_8h_acad098986b7ca8b1056601edeb888746_html_acad098986b7ca8b1056601edeb888746"><div class="ttname"><a href="mongoose_8h_acad098986b7ca8b1056601edeb888746.html#acad098986b7ca8b1056601edeb888746">mg_send_websocket_frame</a></div><div class="ttdeci">void mg_send_websocket_frame(struct mg_connection *nc, int op_and_flags, const void *data, size_t data_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9649</div></div>
<div class="ttc" id="mongoose_8h_a8ba0ed8d1d0901fcba91c0615ad50f21_html_a8ba0ed8d1d0901fcba91c0615ad50f21"><div class="ttname"><a href="mongoose_8h_a8ba0ed8d1d0901fcba91c0615ad50f21.html#a8ba0ed8d1d0901fcba91c0615ad50f21">mg_printf_websocket_frame</a></div><div class="ttdeci">void mg_printf_websocket_frame(struct mg_connection *nc, int op_and_flags, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9685</div></div>
<div class="ttc" id="structmg__mgr__init__opts_adf5a32b0abe41300d2109969b768f33d_html_adf5a32b0abe41300d2109969b768f33d"><div class="ttname"><a href="structmg__mgr__init__opts_adf5a32b0abe41300d2109969b768f33d.html#adf5a32b0abe41300d2109969b768f33d">mg_mgr_init_opts::ifaces</a></div><div class="ttdeci">const struct mg_iface_vtable ** ifaces</div><div class="ttdef"><b>Definition:</b> mongoose.h:3505</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_ac16baef17869ac723d502190b19780bf_html_ac16baef17869ac723d502190b19780bf"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts_ac16baef17869ac723d502190b19780bf.html#ac16baef17869ac723d502190b19780bf">mg_send_mqtt_handshake_opts::password</a></div><div class="ttdeci">const char * password</div><div class="ttdef"><b>Definition:</b> mongoose.h:5207</div></div>
<div class="ttc" id="structmbuf_ae2a6e23a4997e9aea0908628db2b23d0_html_ae2a6e23a4997e9aea0908628db2b23d0"><div class="ttname"><a href="structmbuf_ae2a6e23a4997e9aea0908628db2b23d0.html#ae2a6e23a4997e9aea0908628db2b23d0">mbuf::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> mongoose.h:1946</div></div>
<div class="ttc" id="structmg__mqtt__message_a74388e94b78a4aed9260dc2c4d4da5da_html_a74388e94b78a4aed9260dc2c4d4da5da"><div class="ttname"><a href="structmg__mqtt__message_a74388e94b78a4aed9260dc2c4d4da5da.html#a74388e94b78a4aed9260dc2c4d4da5da">mg_mqtt_message::connect_flags</a></div><div class="ttdeci">uint8_t connect_flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:5186</div></div>
<div class="ttc" id="structmg__mqtt__topic__expression_a04074697217a1c329b32a9242d63ed8f_html_a04074697217a1c329b32a9242d63ed8f"><div class="ttname"><a href="structmg__mqtt__topic__expression_a04074697217a1c329b32a9242d63ed8f.html#a04074697217a1c329b32a9242d63ed8f">mg_mqtt_topic_expression::topic</a></div><div class="ttdeci">const char * topic</div><div class="ttdef"><b>Definition:</b> mongoose.h:5197</div></div>
<div class="ttc" id="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb_html_a1f14bd154357c301cce137c9ac1d1edb"><div class="ttname"><a href="structmg__connection_a1f14bd154357c301cce137c9ac1d1edb.html#a1f14bd154357c301cce137c9ac1d1edb">mg_connection::handler</a></div><div class="ttdeci">mg_event_handler_t handler</div><div class="ttdef"><b>Definition:</b> mongoose.h:3436</div></div>
<div class="ttc" id="mongoose_8h_a0ee862018546e5ce25be6d0c079d46d3_html_a0ee862018546e5ce25be6d0c079d46d3"><div class="ttname"><a href="mongoose_8h_a0ee862018546e5ce25be6d0c079d46d3.html#a0ee862018546e5ce25be6d0c079d46d3">mg_mqtt_publish</a></div><div class="ttdeci">void mg_mqtt_publish(struct mg_connection *nc, const char *topic, uint16_t message_id, int flags, const void *data, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10530</div></div>
<div class="ttc" id="mongoose_8h_a8755d2c1c429a6e46a66661c8276c219_html_a8755d2c1c429a6e46a66661c8276c219"><div class="ttname"><a href="mongoose_8h_a8755d2c1c429a6e46a66661c8276c219.html#a8755d2c1c429a6e46a66661c8276c219">mg_mqtt_puback</a></div><div class="ttdeci">void mg_mqtt_puback(struct mg_connection *nc, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10622</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_a89a41409815899bd7ed46a510a162bc8_html_a89a41409815899bd7ed46a510a162bc8"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts_a89a41409815899bd7ed46a510a162bc8.html#a89a41409815899bd7ed46a510a162bc8">mg_send_mqtt_handshake_opts::flags</a></div><div class="ttdeci">unsigned char flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:5202</div></div>
<div class="ttc" id="mongoose_8h_ae3059501d12b30e53dadbe79ef5a2e17_html_ae3059501d12b30e53dadbe79ef5a2e17"><div class="ttname"><a href="mongoose_8h_ae3059501d12b30e53dadbe79ef5a2e17.html#ae3059501d12b30e53dadbe79ef5a2e17">mg_check_ip_acl</a></div><div class="ttdeci">int mg_check_ip_acl(const char *acl, uint32_t remote_ip)</div><div class="ttdef"><b>Definition:</b> mongoose.c:3094</div></div>
<div class="ttc" id="structmg__resolve__async__opts_ac82e8d612fe2f822fc99ca3bd2d9921c_html_ac82e8d612fe2f822fc99ca3bd2d9921c"><div class="ttname"><a href="structmg__resolve__async__opts_ac82e8d612fe2f822fc99ca3bd2d9921c.html#ac82e8d612fe2f822fc99ca3bd2d9921c">mg_resolve_async_opts::dns_conn</a></div><div class="ttdeci">struct mg_connection ** dns_conn</div><div class="ttdef"><b>Definition:</b> mongoose.h:5785</div></div>
<div class="ttc" id="structwebsocket__message_a72b32c83b4a065faac7ae28802a5adf1_html_a72b32c83b4a065faac7ae28802a5adf1"><div class="ttname"><a href="structwebsocket__message_a72b32c83b4a065faac7ae28802a5adf1.html#a72b32c83b4a065faac7ae28802a5adf1">websocket_message::flags</a></div><div class="ttdeci">unsigned char flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:4266</div></div>
<div class="ttc" id="mongoose_8h_ad2749ecf09e951753f13583a47336bed_html_ad2749ecf09e951753f13583a47336bed"><div class="ttname"><a href="mongoose_8h_ad2749ecf09e951753f13583a47336bed.html#ad2749ecf09e951753f13583a47336bed">mg_http_parse_header</a></div><div class="ttdeci">int mg_http_parse_header(struct mg_str *hdr, const char *var_name, char *buf, size_t buf_size)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7109</div></div>
<div class="ttc" id="mongoose_8h_a73a3e947b6d29f71542c280fdbe4fce0_html_a73a3e947b6d29f71542c280fdbe4fce0"><div class="ttname"><a href="mongoose_8h_a73a3e947b6d29f71542c280fdbe4fce0.html#a73a3e947b6d29f71542c280fdbe4fce0">mg_if_connect_cb</a></div><div class="ttdeci">void mg_if_connect_cb(struct mg_connection *nc, int err)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2791</div></div>
<div class="ttc" id="mongoose_8h_a97fd4ac5ef21a5492ee309a61f9916e1_html_a97fd4ac5ef21a5492ee309a61f9916e1"><div class="ttname"><a href="mongoose_8h_a97fd4ac5ef21a5492ee309a61f9916e1.html#a97fd4ac5ef21a5492ee309a61f9916e1">mg_strchr</a></div><div class="ttdeci">const char * mg_strchr(const struct mg_str s, int c)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1502</div></div>
<div class="ttc" id="structmg__mqtt__message_html"><div class="ttname"><a href="structmg__mqtt__message.html">mg_mqtt_message</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5174</div></div>
<div class="ttc" id="structmg__connection_a1c70d397e2abcd97dfdee3311357f9cd_html_a1c70d397e2abcd97dfdee3311357f9cd"><div class="ttname"><a href="structmg__connection_a1c70d397e2abcd97dfdee3311357f9cd.html#a1c70d397e2abcd97dfdee3311357f9cd">mg_connection::v</a></div><div class="ttdeci">void * v</div><div class="ttdef"><b>Definition:</b> mongoose.h:3439</div></div>
<div class="ttc" id="structmg__mqtt__topic__expression_a56df5bba82939797c94dd68993b0beff_html_a56df5bba82939797c94dd68993b0beff"><div class="ttname"><a href="structmg__mqtt__topic__expression_a56df5bba82939797c94dd68993b0beff.html#a56df5bba82939797c94dd68993b0beff">mg_mqtt_topic_expression::qos</a></div><div class="ttdeci">uint8_t qos</div><div class="ttdef"><b>Definition:</b> mongoose.h:5198</div></div>
<div class="ttc" id="structmg__bind__opts_ae257fe726a23692a36fb8c92885d4873_html_ae257fe726a23692a36fb8c92885d4873"><div class="ttname"><a href="structmg__bind__opts_ae257fe726a23692a36fb8c92885d4873.html#ae257fe726a23692a36fb8c92885d4873">mg_bind_opts::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:3609</div></div>
<div class="ttc" id="mongoose_8h_a9aed3a9d7ac01bc6919db0c672a21e99_html_a9aed3a9d7ac01bc6919db0c672a21e99"><div class="ttname"><a href="mongoose_8h_a9aed3a9d7ac01bc6919db0c672a21e99.html#a9aed3a9d7ac01bc6919db0c672a21e99">c_strnlen</a></div><div class="ttdeci">size_t c_strnlen(const char *s, size_t maxlen)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1571</div></div>
<div class="ttc" id="structmg__connection_a9392bec67d0dc8df58e6c171214ddf8d_html_a9392bec67d0dc8df58e6c171214ddf8d"><div class="ttname"><a href="structmg__connection_a9392bec67d0dc8df58e6c171214ddf8d.html#a9392bec67d0dc8df58e6c171214ddf8d">mg_connection::listener</a></div><div class="ttdeci">struct mg_connection * listener</div><div class="ttdef"><b>Definition:</b> mongoose.h:3419</div></div>
<div class="ttc" id="structmg__ssi__call__ctx_ae4f6225598743855f1da5103a5640302_html_ae4f6225598743855f1da5103a5640302"><div class="ttname"><a href="structmg__ssi__call__ctx_ae4f6225598743855f1da5103a5640302.html#ae4f6225598743855f1da5103a5640302">mg_ssi_call_ctx::req</a></div><div class="ttdeci">struct http_message * req</div><div class="ttdef"><b>Definition:</b> mongoose.h:4281</div></div>
<div class="ttc" id="mongoose_8h_a2dfcbaf7ad4885852337450d17ab0608_html_a2dfcbaf7ad4885852337450d17ab0608"><div class="ttname"><a href="mongoose_8h_a2dfcbaf7ad4885852337450d17ab0608.html#a2dfcbaf7ad4885852337450d17ab0608">mg_send_head</a></div><div class="ttdeci">void mg_send_head(struct mg_connection *n, int status_code, int64_t content_length, const char *extra_headers)</div><div class="ttdef"><b>Definition:</b> mongoose.c:6813</div></div>
<div class="ttc" id="structmg__connection_a7508851a3c070a1357c226781fa92bb7_html_a7508851a3c070a1357c226781fa92bb7"><div class="ttname"><a href="structmg__connection_a7508851a3c070a1357c226781fa92bb7.html#a7508851a3c070a1357c226781fa92bb7">mg_connection::proto_data</a></div><div class="ttdeci">void * proto_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3434</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_a747846d48256c35b24544a1e19321f09_html_a747846d48256c35b24544a1e19321f09"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts_a747846d48256c35b24544a1e19321f09.html#a747846d48256c35b24544a1e19321f09">mg_send_mqtt_handshake_opts::will_message</a></div><div class="ttdeci">const char * will_message</div><div class="ttdef"><b>Definition:</b> mongoose.h:5205</div></div>
<div class="ttc" id="mongoose_8h_ae72219f63b2fe9bce774a64e11404179_html_ae72219f63b2fe9bce774a64e11404179"><div class="ttname"><a href="mongoose_8h_ae72219f63b2fe9bce774a64e11404179.html#ae72219f63b2fe9bce774a64e11404179">LIST_HEAD</a></div><div class="ttdeci">#define LIST_HEAD(name, type)</div><div class="ttdef"><b>Definition:</b> mongoose.h:2584</div></div>
<div class="ttc" id="structmg__http__multipart__part_a838efa2eb99ad6cecd6ae714d4775091_html_a838efa2eb99ad6cecd6ae714d4775091"><div class="ttname"><a href="structmg__http__multipart__part_a838efa2eb99ad6cecd6ae714d4775091.html#a838efa2eb99ad6cecd6ae714d4775091">mg_http_multipart_part::file_name</a></div><div class="ttdeci">const char * file_name</div><div class="ttdef"><b>Definition:</b> mongoose.h:4272</div></div>
<div class="ttc" id="structmg__connection_html"><div class="ttname"><a href="structmg__connection.html">mg_connection</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3417</div></div>
<div class="ttc" id="structmg__connection_a84d1a7e42f1326c70f61f71e65082dc0_html_a84d1a7e42f1326c70f61f71e65082dc0"><div class="ttname"><a href="structmg__connection_a84d1a7e42f1326c70f61f71e65082dc0.html#a84d1a7e42f1326c70f61f71e65082dc0">mg_connection::ev_timer_time</a></div><div class="ttdeci">double ev_timer_time</div><div class="ttdef"><b>Definition:</b> mongoose.h:3429</div></div>
<div class="ttc" id="mongoose_8h_ad29ff9ca37fd7635a97c9b9ab0d08bf2_html_ad29ff9ca37fd7635a97c9b9ab0d08bf2"><div class="ttname"><a href="mongoose_8h_ad29ff9ca37fd7635a97c9b9ab0d08bf2.html#ad29ff9ca37fd7635a97c9b9ab0d08bf2">mg_parse_uri</a></div><div class="ttdeci">int mg_parse_uri(const struct mg_str uri, struct mg_str *scheme, struct mg_str *user_info, struct mg_str *host, unsigned int *port, struct mg_str *path, struct mg_str *query, struct mg_str *fragment)</div><div class="ttdef"><b>Definition:</b> mongoose.c:5327</div></div>
<div class="ttc" id="mongoose_8h_a27a424a231709f818d12ad9d0dadbb86_html_a27a424a231709f818d12ad9d0dadbb86"><div class="ttname"><a href="mongoose_8h_a27a424a231709f818d12ad9d0dadbb86.html#a27a424a231709f818d12ad9d0dadbb86">mg_is_big_endian</a></div><div class="ttdeci">int mg_is_big_endian(void)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10147</div></div>
<div class="ttc" id="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891_html_ab6a9b0bc545e839df7e06e5b6bff0891"><div class="ttname"><a href="unionsocket__address_ab6a9b0bc545e839df7e06e5b6bff0891.html#ab6a9b0bc545e839df7e06e5b6bff0891">socket_address::sa</a></div><div class="ttdeci">struct sockaddr sa</div><div class="ttdef"><b>Definition:</b> mongoose.h:3370</div></div>
<div class="ttc" id="mongoose_8h_abd3e9df33c85726efbd1291d81a7f067_html_abd3e9df33c85726efbd1291d81a7f067"><div class="ttname"><a href="mongoose_8h_abd3e9df33c85726efbd1291d81a7f067.html#abd3e9df33c85726efbd1291d81a7f067">cs_base64_init</a></div><div class="ttdeci">void cs_base64_init(struct cs_base64_ctx *ctx, cs_base64_putc_t putc, void *user_data)</div><div class="ttdef"><b>Definition:</b> mongoose.c:440</div></div>
<div class="ttc" id="mongoose_8h_a9f8dc6ab99c0ffe17672edd78c6672be_html_a9f8dc6ab99c0ffe17672edd78c6672be"><div class="ttname"><a href="mongoose_8h_a9f8dc6ab99c0ffe17672edd78c6672be.html#a9f8dc6ab99c0ffe17672edd78c6672be">mg_set_protocol_http_websocket</a></div><div class="ttdeci">void mg_set_protocol_http_websocket(struct mg_connection *nc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:6642</div></div>
<div class="ttc" id="mongoose_8h_ad370e6a9b01504eb5f1b7217bfeeb07f_html_ad370e6a9b01504eb5f1b7217bfeeb07f"><div class="ttname"><a href="mongoose_8h_ad370e6a9b01504eb5f1b7217bfeeb07f.html#ad370e6a9b01504eb5f1b7217bfeeb07f">mg_mk_str</a></div><div class="ttdeci">struct mg_str mg_mk_str(const char *s)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1444</div></div>
<div class="ttc" id="mongoose_8h_a423c078d1e052e8cf92ea0d2d30acf2a_html_a423c078d1e052e8cf92ea0d2d30acf2a"><div class="ttname"><a href="mongoose_8h_a423c078d1e052e8cf92ea0d2d30acf2a.html#a423c078d1e052e8cf92ea0d2d30acf2a">mg_url_encode</a></div><div class="ttdeci">struct mg_str mg_url_encode(const struct mg_str src)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10193</div></div>
<div class="ttc" id="structmg__connection_aa47edda11152dd7769a76d806a87e1aa_html_aa47edda11152dd7769a76d806a87e1aa"><div class="ttname"><a href="structmg__connection_aa47edda11152dd7769a76d806a87e1aa.html#aa47edda11152dd7769a76d806a87e1aa">mg_connection::flags</a></div><div class="ttdeci">unsigned long flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:3449</div></div>
<div class="ttc" id="mongoose_8h_a5a65e3a3235b6ab764af7f5090233c52_html_a5a65e3a3235b6ab764af7f5090233c52"><div class="ttname"><a href="mongoose_8h_a5a65e3a3235b6ab764af7f5090233c52.html#a5a65e3a3235b6ab764af7f5090233c52">mg_if_accept_new_conn</a></div><div class="ttdeci">struct mg_connection * mg_if_accept_new_conn(struct mg_connection *lc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2622</div></div>
<div class="ttc" id="mongoose_8h_abbadafd3b6ce148e82e413f4d0dfa934_html_abbadafd3b6ce148e82e413f4d0dfa934"><div class="ttname"><a href="mongoose_8h_abbadafd3b6ce148e82e413f4d0dfa934.html#abbadafd3b6ce148e82e413f4d0dfa934">mg_send_response_line</a></div><div class="ttdeci">void mg_send_response_line(struct mg_connection *nc, int status_code, const char *extra_headers)</div><div class="ttdef"><b>Definition:</b> mongoose.c:6786</div></div>
<div class="ttc" id="mongoose_8h_af568ca12452ee3d3cd2dc7bf0d1cd7da_html_af568ca12452ee3d3cd2dc7bf0d1cd7da"><div class="ttname"><a href="mongoose_8h_af568ca12452ee3d3cd2dc7bf0d1cd7da.html#af568ca12452ee3d3cd2dc7bf0d1cd7da">mg_mqtt_subscribe</a></div><div class="ttdeci">void mg_mqtt_subscribe(struct mg_connection *nc, const struct mg_mqtt_topic_expression *topics, size_t topics_len, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10549</div></div>
<div class="ttc" id="mongoose_8h_a55f8f83c2fd984700206ece02df64968_html_a55f8f83c2fd984700206ece02df64968"><div class="ttname"><a href="mongoose_8h_a55f8f83c2fd984700206ece02df64968.html#a55f8f83c2fd984700206ece02df64968">mg_register_http_endpoint</a></div><div class="ttdeci">void mg_register_http_endpoint(struct mg_connection *nc, const char *uri_path, MG_CB(mg_event_handler_t handler, void *user_data))</div><div class="ttdef"><b>Definition:</b> mongoose.c:8443</div></div>
<div class="ttc" id="mongoose_8h_a38d833c3c352508abac7aa3ae0def23f_html_a38d833c3c352508abac7aa3ae0def23f"><div class="ttname"><a href="mongoose_8h_a38d833c3c352508abac7aa3ae0def23f.html#a38d833c3c352508abac7aa3ae0def23f">MG_UD_ARG</a></div><div class="ttdeci">#define MG_UD_ARG(ud)</div><div class="ttdef"><b>Definition:</b> mongoose.h:3120</div></div>
<div class="ttc" id="structmg__resolve__async__opts_html"><div class="ttname"><a href="structmg__resolve__async__opts.html">mg_resolve_async_opts</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5779</div></div>
<div class="ttc" id="mongoose_8h_a5357794c2b9d072ca2a6cf35af2dd39a_html_a5357794c2b9d072ca2a6cf35af2dd39a"><div class="ttname"><a href="mongoose_8h_a5357794c2b9d072ca2a6cf35af2dd39a.html#a5357794c2b9d072ca2a6cf35af2dd39a">mg_conn_addr_to_str</a></div><div class="ttdeci">int mg_conn_addr_to_str(struct mg_connection *c, char *buf, size_t len, int flags)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10047</div></div>
<div class="ttc" id="mongoose_8h_ab640f92c3ed206f3c8cdae4fc76fe553_html_ab640f92c3ed206f3c8cdae4fc76fe553"><div class="ttname"><a href="mongoose_8h_ab640f92c3ed206f3c8cdae4fc76fe553.html#ab640f92c3ed206f3c8cdae4fc76fe553">mg_mqtt_suback</a></div><div class="ttdeci">void mg_mqtt_suback(struct mg_connection *nc, uint8_t *qoss, size_t qoss_len, uint16_t message_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10638</div></div>
<div class="ttc" id="mongoose_8h_a3d93bd313a02285ccd37773aba1beeb5_html_a3d93bd313a02285ccd37773aba1beeb5"><div class="ttname"><a href="mongoose_8h_a3d93bd313a02285ccd37773aba1beeb5.html#a3d93bd313a02285ccd37773aba1beeb5">mg_get_http_header</a></div><div class="ttdeci">struct mg_str * mg_get_http_header(struct http_message *hm, const char *name)</div><div class="ttdef"><b>Definition:</b> mongoose.c:5960</div></div>
<div class="ttc" id="mongoose_8h_aa392353a491081f279ee8dc588f3b675_html_aa392353a491081f279ee8dc588f3b675"><div class="ttname"><a href="mongoose_8h_aa392353a491081f279ee8dc588f3b675.html#aa392353a491081f279ee8dc588f3b675">mg_match_prefix_n</a></div><div class="ttdeci">int mg_match_prefix_n(const struct mg_str pattern, const struct mg_str str)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2018</div></div>
<div class="ttc" id="mongoose_8h_a4db56a474f8bf90550f0917ae54dc963_html_a4db56a474f8bf90550f0917ae54dc963"><div class="ttname"><a href="mongoose_8h_a4db56a474f8bf90550f0917ae54dc963.html#a4db56a474f8bf90550f0917ae54dc963">mg_strdup_nul</a></div><div class="ttdeci">struct mg_str mg_strdup_nul(const struct mg_str s)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1497</div></div>
<div class="ttc" id="mongoose_8h_ae39d09d53167a1469ed969475ca415de_html_ae39d09d53167a1469ed969475ca415de"><div class="ttname"><a href="mongoose_8h_ae39d09d53167a1469ed969475ca415de.html#ae39d09d53167a1469ed969475ca415de">cs_from_hex</a></div><div class="ttdeci">void cs_from_hex(char *to, const char *p, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1865</div></div>
<div class="ttc" id="mongoose_8h_a2820cf0d2389fb3597e918a53f3f8cfb_html_a2820cf0d2389fb3597e918a53f3f8cfb"><div class="ttname"><a href="mongoose_8h_a2820cf0d2389fb3597e918a53f3f8cfb.html#a2820cf0d2389fb3597e918a53f3f8cfb">mbuf_insert</a></div><div class="ttdeci">size_t mbuf_insert(struct mbuf *, size_t, const void *, size_t)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1381</div></div>
<div class="ttc" id="mongoose_8h_a61d93cfd74b29d8f333053673cc3726c_html_a61d93cfd74b29d8f333053673cc3726c"><div class="ttname"><a href="mongoose_8h_a61d93cfd74b29d8f333053673cc3726c.html#a61d93cfd74b29d8f333053673cc3726c">mg_connect_http_opt</a></div><div class="ttdeci">struct mg_connection * mg_connect_http_opt(struct mg_mgr *mgr, MG_CB(mg_event_handler_t ev_handler, void *user_data), struct mg_connect_opts opts, const char *url, const char *extra_headers, const char *post_data)</div><div class="ttdef"><b>Definition:</b> mongoose.c:8306</div></div>
<div class="ttc" id="mongoose_8h_a01b40ebd30681c3d77814be6e5ac2a55_html_a01b40ebd30681c3d77814be6e5ac2a55"><div class="ttname"><a href="mongoose_8h_a01b40ebd30681c3d77814be6e5ac2a55.html#a01b40ebd30681c3d77814be6e5ac2a55">mg_resolve_from_hosts_file</a></div><div class="ttdeci">int mg_resolve_from_hosts_file(const char *host, union socket_address *usa)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11427</div></div>
<div class="ttc" id="structmg__http__endpoint__opts_a5af8bb0311abbac3f9388c4b95210dac_html_a5af8bb0311abbac3f9388c4b95210dac"><div class="ttname"><a href="structmg__http__endpoint__opts_a5af8bb0311abbac3f9388c4b95210dac.html#a5af8bb0311abbac3f9388c4b95210dac">mg_http_endpoint_opts::auth_domain</a></div><div class="ttdeci">const char * auth_domain</div><div class="ttdef"><b>Definition:</b> mongoose.h:4944</div></div>
<div class="ttc" id="mongoose_8h_ab32cc3b42fd1e60f754e8475b7d7fe18_html_ab32cc3b42fd1e60f754e8475b7d7fe18"><div class="ttname"><a href="mongoose_8h_ab32cc3b42fd1e60f754e8475b7d7fe18.html#ab32cc3b42fd1e60f754e8475b7d7fe18">mg_if_recv_tcp_cb</a></div><div class="ttdeci">void mg_if_recv_tcp_cb(struct mg_connection *nc, void *buf, int len, int own)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2708</div></div>
<div class="ttc" id="structcs__md5__ctx_html"><div class="ttname"><a href="structcs__md5__ctx.html">cs_md5_ctx</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:1749</div></div>
<div class="ttc" id="structmg__http__multipart__part_html"><div class="ttname"><a href="structmg__http__multipart__part.html">mg_http_multipart_part</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:4271</div></div>
<div class="ttc" id="mongoose_8h_acd8e58739ec13389ed8752ae93f71a64_html_acd8e58739ec13389ed8752ae93f71a64"><div class="ttname"><a href="mongoose_8h_acd8e58739ec13389ed8752ae93f71a64.html#acd8e58739ec13389ed8752ae93f71a64">mg_mqtt_vmatch_topic_expression</a></div><div class="ttdeci">int mg_mqtt_vmatch_topic_expression(const char *exp, struct mg_str topic)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10420</div></div>
<div class="ttc" id="structmg__iface_html"><div class="ttname"><a href="structmg__iface.html">mg_iface</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:3160</div></div>
<div class="ttc" id="mongoose_8h_a91283e6737dc5e1d55eff3385e396c81_html_a91283e6737dc5e1d55eff3385e396c81"><div class="ttname"><a href="mongoose_8h_a91283e6737dc5e1d55eff3385e396c81.html#a91283e6737dc5e1d55eff3385e396c81">cs_base64_decode</a></div><div class="ttdeci">int cs_base64_decode(const unsigned char *s, int len, char *dst, int *dec_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:569</div></div>
<div class="ttc" id="structmg__resolve__async__opts_a9e7955b13fd4cac697a92ca28dff30ae_html_a9e7955b13fd4cac697a92ca28dff30ae"><div class="ttname"><a href="structmg__resolve__async__opts_a9e7955b13fd4cac697a92ca28dff30ae.html#a9e7955b13fd4cac697a92ca28dff30ae">mg_resolve_async_opts::accept_literal</a></div><div class="ttdeci">int accept_literal</div><div class="ttdef"><b>Definition:</b> mongoose.h:5783</div></div>
<div class="ttc" id="structmg__mqtt__topic__expression_html"><div class="ttname"><a href="structmg__mqtt__topic__expression.html">mg_mqtt_topic_expression</a></div><div class="ttdef"><b>Definition:</b> mongoose.h:5196</div></div>
<div class="ttc" id="structmg__http__endpoint__opts_a57ae875a1cc356870d396f3d864d2fc8_html_a57ae875a1cc356870d396f3d864d2fc8"><div class="ttname"><a href="structmg__http__endpoint__opts_a57ae875a1cc356870d396f3d864d2fc8.html#a57ae875a1cc356870d396f3d864d2fc8">mg_http_endpoint_opts::auth_file</a></div><div class="ttdeci">const char * auth_file</div><div class="ttdef"><b>Definition:</b> mongoose.h:4945</div></div>
<div class="ttc" id="structmg__iface_ae02adab992b9704f4e61e937c505f336_html_ae02adab992b9704f4e61e937c505f336"><div class="ttname"><a href="structmg__iface_ae02adab992b9704f4e61e937c505f336.html#ae02adab992b9704f4e61e937c505f336">mg_iface::vtable</a></div><div class="ttdeci">const struct mg_iface_vtable * vtable</div><div class="ttdef"><b>Definition:</b> mongoose.h:3163</div></div>
<div class="ttc" id="mongoose_8h_a53797056e739907aa124fa932c1d7708_html_a53797056e739907aa124fa932c1d7708"><div class="ttname"><a href="mongoose_8h_a53797056e739907aa124fa932c1d7708.html#a53797056e739907aa124fa932c1d7708">mbuf_resize</a></div><div class="ttdeci">void mbuf_resize(struct mbuf *, size_t new_size)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1361</div></div>
<div class="ttc" id="mongoose_8h_a851d7cda36c3661c7db8cffbabf3fb3e_html_a851d7cda36c3661c7db8cffbabf3fb3e"><div class="ttname"><a href="mongoose_8h_a851d7cda36c3661c7db8cffbabf3fb3e.html#a851d7cda36c3661c7db8cffbabf3fb3e">mg_strcmp</a></div><div class="ttdeci">int mg_strcmp(const struct mg_str str1, const struct mg_str str2)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1511</div></div>
<div class="ttc" id="structmg__connect__opts_a47c10391acd986fe2ff3f4f308bd1637_html_a47c10391acd986fe2ff3f4f308bd1637"><div class="ttname"><a href="structmg__connect__opts_a47c10391acd986fe2ff3f4f308bd1637.html#a47c10391acd986fe2ff3f4f308bd1637">mg_connect_opts::iface</a></div><div class="ttdeci">struct mg_iface * iface</div><div class="ttdef"><b>Definition:</b> mongoose.h:3676</div></div>
<div class="ttc" id="mongoose_8h_a008152c925b906c1c202f6752750e62c_html_a008152c925b906c1c202f6752750e62c"><div class="ttname"><a href="mongoose_8h_a008152c925b906c1c202f6752750e62c.html#a008152c925b906c1c202f6752750e62c">mg_set_protocol_mqtt</a></div><div class="ttdeci">void mg_set_protocol_mqtt(struct mg_connection *nc)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10424</div></div>
<div class="ttc" id="mongoose_8h_a2c92ac0d106eed3725227053a4ce323f_html_a2c92ac0d106eed3725227053a4ce323f"><div class="ttname"><a href="mongoose_8h_a2c92ac0d106eed3725227053a4ce323f.html#a2c92ac0d106eed3725227053a4ce323f">mg_http_send_error</a></div><div class="ttdeci">void mg_http_send_error(struct mg_connection *nc, int code, const char *reason)</div><div class="ttdef"><b>Definition:</b> mongoose.c:6824</div></div>
<div class="ttc" id="structmg__str_a1e743a766f92c904d25fe4d058017486_html_a1e743a766f92c904d25fe4d058017486"><div class="ttname"><a href="structmg__str_a1e743a766f92c904d25fe4d058017486.html#a1e743a766f92c904d25fe4d058017486">mg_str::p</a></div><div class="ttdeci">const char * p</div><div class="ttdef"><b>Definition:</b> mongoose.h:1860</div></div>
<div class="ttc" id="mongoose_8h_afef8ba7b50b93fcf9948c226755d05e9_html_afef8ba7b50b93fcf9948c226755d05e9"><div class="ttname"><a href="mongoose_8h_afef8ba7b50b93fcf9948c226755d05e9.html#afef8ba7b50b93fcf9948c226755d05e9">mg_register_http_endpoint_opt</a></div><div class="ttdeci">void mg_register_http_endpoint_opt(struct mg_connection *nc, const char *uri_path, mg_event_handler_t handler, struct mg_http_endpoint_opts opts)</div><div class="ttdef"><b>Definition:</b> mongoose.c:8387</div></div>
<div class="ttc" id="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d_html_ab6d66a4eacc5d4d15f817ce98f26322d"><div class="ttname"><a href="structmg__connection_ab6d66a4eacc5d4d15f817ce98f26322d.html#ab6d66a4eacc5d4d15f817ce98f26322d">mg_connection::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3437</div></div>
<div class="ttc" id="structmg__mgr_abb2e9f2e7a4851f22e84da9f87d9cca2_html_abb2e9f2e7a4851f22e84da9f87d9cca2"><div class="ttname"><a href="structmg__mgr_abb2e9f2e7a4851f22e84da9f87d9cca2.html#abb2e9f2e7a4851f22e84da9f87d9cca2">mg_mgr::active_connections</a></div><div class="ttdeci">struct mg_connection * active_connections</div><div class="ttdef"><b>Definition:</b> mongoose.h:3401</div></div>
<div class="ttc" id="mongoose_8h_a1832d47a93efb88b807286ed1ae80646_html_a1832d47a93efb88b807286ed1ae80646"><div class="ttname"><a href="mongoose_8h_a1832d47a93efb88b807286ed1ae80646.html#a1832d47a93efb88b807286ed1ae80646">MG_MAX_DNS_ANSWERS</a></div><div class="ttdeci">#define MG_MAX_DNS_ANSWERS</div><div class="ttdef"><b>Definition:</b> mongoose.h:5515</div></div>
<div class="ttc" id="mongoose_8h_a411376e1a1915ab6c7ce6f8212adebb5_html_a411376e1a1915ab6c7ce6f8212adebb5"><div class="ttname"><a href="mongoose_8h_a411376e1a1915ab6c7ce6f8212adebb5.html#a411376e1a1915ab6c7ce6f8212adebb5">mg_hash_sha1_v</a></div><div class="ttdeci">void mg_hash_sha1_v(size_t num_msgs, const uint8_t *msgs[], const size_t *msg_lens, uint8_t *digest)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9730</div></div>
<div class="ttc" id="mongoose_8h_aeb5153bb18d4395fbb9c91181eda5420_html_aeb5153bb18d4395fbb9c91181eda5420"><div class="ttname"><a href="mongoose_8h_aeb5153bb18d4395fbb9c91181eda5420.html#aeb5153bb18d4395fbb9c91181eda5420">mg_ncasecmp</a></div><div class="ttdeci">int mg_ncasecmp(const char *s1, const char *s2, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1898</div></div>
<div class="ttc" id="mongoose_8h_ac2734b66171767f69ab0d15b61eae7c7_html_ac2734b66171767f69ab0d15b61eae7c7"><div class="ttname"><a href="mongoose_8h_ac2734b66171767f69ab0d15b61eae7c7.html#ac2734b66171767f69ab0d15b61eae7c7">mg_send_mqtt_handshake_opt</a></div><div class="ttdeci">void mg_send_mqtt_handshake_opt(struct mg_connection *nc, const char *client_id, struct mg_send_mqtt_handshake_opts)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10460</div></div>
<div class="ttc" id="mongoose_8h_adb30c08fe723f18fd758311bde7082e2_html_adb30c08fe723f18fd758311bde7082e2"><div class="ttname"><a href="mongoose_8h_adb30c08fe723f18fd758311bde7082e2.html#adb30c08fe723f18fd758311bde7082e2">mg_add_sock_opt</a></div><div class="ttdeci">struct mg_connection * mg_add_sock_opt(struct mg_mgr *mgr, sock_t sock, MG_CB(mg_event_handler_t handler, void *user_data), struct mg_add_sock_opts opts)</div></div>
<div class="ttc" id="mongoose_8h_a00051e79a693bfb8ffb9c7849ce5a5d9_html_a00051e79a693bfb8ffb9c7849ce5a5d9"><div class="ttname"><a href="mongoose_8h_a00051e79a693bfb8ffb9c7849ce5a5d9.html#a00051e79a693bfb8ffb9c7849ce5a5d9">mg_mgr_poll</a></div><div class="ttdeci">time_t mg_mgr_poll(struct mg_mgr *, int milli)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2413</div></div>
<div class="ttc" id="mongoose_8h_ad6216276f7a0b334ad97aafcc95f677f_html_ad6216276f7a0b334ad97aafcc95f677f"><div class="ttname"><a href="mongoose_8h_ad6216276f7a0b334ad97aafcc95f677f.html#ad6216276f7a0b334ad97aafcc95f677f">mg_printf_http_chunk</a></div><div class="ttdeci">void mg_printf_http_chunk(struct mg_connection *nc, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> mongoose.c:7062</div></div>
<div class="ttc" id="mongoose_8h_a7021bd3f4a2112c8f3ddd88956b45a10_html_a7021bd3f4a2112c8f3ddd88956b45a10"><div class="ttname"><a href="mongoose_8h_a7021bd3f4a2112c8f3ddd88956b45a10.html#a7021bd3f4a2112c8f3ddd88956b45a10">mg_mgr_init_opt</a></div><div class="ttdeci">void mg_mgr_init_opt(struct mg_mgr *mgr, void *user_data, struct mg_mgr_init_opts opts)</div><div class="ttdef"><b>Definition:</b> mongoose.c:2330</div></div>
<div class="ttc" id="mongoose_8h_ad45093745332fcb36539dcd8442c1239_html_ad45093745332fcb36539dcd8442c1239"><div class="ttname"><a href="mongoose_8h_ad45093745332fcb36539dcd8442c1239.html#ad45093745332fcb36539dcd8442c1239">cs_base64_encode</a></div><div class="ttdeci">void cs_base64_encode(const unsigned char *src, int src_len, char *dst)</div><div class="ttdef"><b>Definition:</b> mongoose.c:505</div></div>
<div class="ttc" id="structmg__mgr_ac2e8ed98ad341f9f58bfd3add2c6bdc6_html_ac2e8ed98ad341f9f58bfd3add2c6bdc6"><div class="ttname"><a href="structmg__mgr_ac2e8ed98ad341f9f58bfd3add2c6bdc6.html#ac2e8ed98ad341f9f58bfd3add2c6bdc6">mg_mgr::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:3408</div></div>
<div class="ttc" id="mongoose_8h_a3963d4e573819f175d59c41c5045fd91_html_a3963d4e573819f175d59c41c5045fd91"><div class="ttname"><a href="mongoose_8h_a3963d4e573819f175d59c41c5045fd91.html#a3963d4e573819f175d59c41c5045fd91">mg_send_mqtt_handshake</a></div><div class="ttdeci">void mg_send_mqtt_handshake(struct mg_connection *nc, const char *client_id)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10455</div></div>
<div class="ttc" id="structmg__send__mqtt__handshake__opts_a39a20b37f0de09f81c6de35690f7d98f_html_a39a20b37f0de09f81c6de35690f7d98f"><div class="ttname"><a href="structmg__send__mqtt__handshake__opts_a39a20b37f0de09f81c6de35690f7d98f.html#a39a20b37f0de09f81c6de35690f7d98f">mg_send_mqtt_handshake_opts::keep_alive</a></div><div class="ttdeci">uint16_t keep_alive</div><div class="ttdef"><b>Definition:</b> mongoose.h:5203</div></div>
<div class="ttc" id="structmg__connection_aa13a0bd4a2ce3d6384866acb7e00344a_html_aa13a0bd4a2ce3d6384866acb7e00344a"><div class="ttname"><a href="structmg__connection_aa13a0bd4a2ce3d6384866acb7e00344a.html#aa13a0bd4a2ce3d6384866acb7e00344a">mg_connection::err</a></div><div class="ttdeci">int err</div><div class="ttdef"><b>Definition:</b> mongoose.h:3423</div></div>
<div class="ttc" id="mongoose_8h_a32b1220140b7bcee01f64ac254237f0d_html_a32b1220140b7bcee01f64ac254237f0d"><div class="ttname"><a href="mongoose_8h_a32b1220140b7bcee01f64ac254237f0d.html#a32b1220140b7bcee01f64ac254237f0d">mg_resolve_async</a></div><div class="ttdeci">int mg_resolve_async(struct mg_mgr *mgr, const char *name, int query, mg_resolve_callback_t cb, void *data)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11542</div></div>
<div class="ttc" id="mongoose_8h_aca70cc85f25278380c14fd01c135fdce_html_aca70cc85f25278380c14fd01c135fdce"><div class="ttname"><a href="mongoose_8h_aca70cc85f25278380c14fd01c135fdce.html#aca70cc85f25278380c14fd01c135fdce">mg_dns_encode_name</a></div><div class="ttdeci">int mg_dns_encode_name(struct mbuf *io, const char *name, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10954</div></div>
<div class="ttc" id="mongoose_8h_ab25c4918da918cea5ac2b996effe665e_html_ab25c4918da918cea5ac2b996effe665e"><div class="ttname"><a href="mongoose_8h_ab25c4918da918cea5ac2b996effe665e.html#ab25c4918da918cea5ac2b996effe665e">mg_strncmp</a></div><div class="ttdeci">int mg_strncmp(const struct mg_str str1, const struct mg_str str2, size_t n)</div><div class="ttdef"><b>Definition:</b> mongoose.c:1524</div></div>
<div class="ttc" id="mongoose_8h_a857c53ce2eb0f6c86ade55fed164a199_html_a857c53ce2eb0f6c86ade55fed164a199"><div class="ttname"><a href="mongoose_8h_a857c53ce2eb0f6c86ade55fed164a199.html#a857c53ce2eb0f6c86ade55fed164a199">mg_mbuf_append_base64</a></div><div class="ttdeci">void mg_mbuf_append_base64(struct mbuf *mbuf, const void *data, size_t len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:10167</div></div>
<div class="ttc" id="structmg__dns__message_a6ebecefbdcb5c292f439123b7c780517_html_a6ebecefbdcb5c292f439123b7c780517"><div class="ttname"><a href="structmg__dns__message_a6ebecefbdcb5c292f439123b7c780517.html#a6ebecefbdcb5c292f439123b7c780517">mg_dns_message::num_answers</a></div><div class="ttdeci">int num_answers</div><div class="ttdef"><b>Definition:</b> mongoose.h:5541</div></div>
<div class="ttc" id="structcs__base64__ctx_ac6023cc2887001835a99b6a71db9f43b_html_ac6023cc2887001835a99b6a71db9f43b"><div class="ttname"><a href="structcs__base64__ctx_ac6023cc2887001835a99b6a71db9f43b.html#ac6023cc2887001835a99b6a71db9f43b">cs_base64_ctx::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> mongoose.h:2025</div></div>
<div class="ttc" id="structmg__connect__opts_a794f93a8213aa29cdb59fb42075c0ab0_html_a794f93a8213aa29cdb59fb42075c0ab0"><div class="ttname"><a href="structmg__connect__opts_a794f93a8213aa29cdb59fb42075c0ab0.html#a794f93a8213aa29cdb59fb42075c0ab0">mg_connect_opts::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> mongoose.h:3674</div></div>
<div class="ttc" id="mongoose_8h_a07613513316e3fd2012dc6746ab9898a_html_a07613513316e3fd2012dc6746ab9898a"><div class="ttname"><a href="mongoose_8h_a07613513316e3fd2012dc6746ab9898a.html#a07613513316e3fd2012dc6746ab9898a">mg_connect_ws_opt</a></div><div class="ttdeci">struct mg_connection * mg_connect_ws_opt(struct mg_mgr *mgr, MG_CB(mg_event_handler_t ev_handler, void *user_data), struct mg_connect_opts opts, const char *url, const char *protocol, const char *extra_headers)</div><div class="ttdef"><b>Definition:</b> mongoose.c:9849</div></div>
<div class="ttc" id="mongoose_8h_a99861af97ad5c71937c11583d62a69f8_html_a99861af97ad5c71937c11583d62a69f8"><div class="ttname"><a href="mongoose_8h_a99861af97ad5c71937c11583d62a69f8.html#a99861af97ad5c71937c11583d62a69f8">mg_check_digest_auth</a></div><div class="ttdeci">int mg_check_digest_auth(struct mg_str method, struct mg_str uri, struct mg_str username, struct mg_str cnonce, struct mg_str response, struct mg_str qop, struct mg_str nc, struct mg_str nonce, struct mg_str auth_domain, FILE *fp)</div></div>
<div class="ttc" id="mongoose_8h_ad8632dc50f1013eddb59c461554c291c_html_ad8632dc50f1013eddb59c461554c291c"><div class="ttname"><a href="mongoose_8h_ad8632dc50f1013eddb59c461554c291c.html#ad8632dc50f1013eddb59c461554c291c">mg_dns_uncompress_name</a></div><div class="ttdeci">size_t mg_dns_uncompress_name(struct mg_dns_message *msg, struct mg_str *name, char *dst, int dst_len)</div><div class="ttdef"><b>Definition:</b> mongoose.c:11151</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mongoose_8h.html">mongoose.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
